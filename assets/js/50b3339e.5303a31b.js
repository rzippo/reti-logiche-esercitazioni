"use strict";(self.webpackChunkreti_logiche_esercitazioni=self.webpackChunkreti_logiche_esercitazioni||[]).push([[697],{38189:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"esercitazioni/Assembler/Documentazione/Ambiente e script","title":"Ambiente e script","description":"","source":"@site/versioned_docs/version-2024-25/esercitazioni/Assembler/Documentazione/50. Ambiente e script.mdx","sourceDirName":"esercitazioni/Assembler/Documentazione","slug":"/esercitazioni/Assembler/Documentazione/Ambiente e script","permalink":"/reti-logiche-esercitazioni/2024-25/esercitazioni/Assembler/Documentazione/Ambiente e script","draft":false,"unlisted":false,"tags":[],"version":"2024-25","sidebarPosition":50,"frontMatter":{"description":""},"sidebar":"esercitazioniSidebar","previous":{"title":"Tabella ASCII","permalink":"/reti-logiche-esercitazioni/2024-25/esercitazioni/Assembler/Documentazione/Tabella ASCII"},"next":{"title":"Problemi comuni","permalink":"/reti-logiche-esercitazioni/2024-25/esercitazioni/Assembler/Problemi comuni"}}');var r=n(74848),t=n(28453),l=n(86025);const o={description:""},a="Ambiente d'esame e i suoi script",c={},d=[{value:"Aprire l&#39;ambiente",id:"aprire-lambiente",level:2},{value:"Il terminale Powershell",id:"il-terminale-powershell",level:2},{value:"Eseguire gli script",id:"eseguire-gli-script",level:2},{value:"<code>assemble.ps1</code>",id:"assembleps1",level:3},{value:"<code>debug.ps1</code>",id:"debugps1",level:3},{value:"<code>run-test.ps1</code>",id:"run-testps1",level:3},{value:"<code>run-tests.ps1</code>",id:"run-testsps1",level:3}];function p(e){const i={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.header,{children:(0,r.jsx)(i.h1,{id:"ambiente-desame-e-i-suoi-script",children:"Ambiente d'esame e i suoi script"})}),"\n",(0,r.jsxs)(i.p,{children:["Qui di seguito sono documentati gli script dell'ambiente.\r\nI principali sono ",(0,r.jsx)(i.code,{children:"assemble.ps1"})," e ",(0,r.jsx)(i.code,{children:"debug.ps1"}),", il cui uso \xe8 mostrato nelle esercitazioni.\r\nGli script ",(0,r.jsx)(i.code,{children:"run-test.ps1"})," e ",(0,r.jsx)(i.code,{children:"run-tests.ps1"})," sono utili per automatizzare i test, il loro uso \xe8 del tutto opzionale."]}),"\n",(0,r.jsx)(i.h2,{id:"aprire-lambiente",children:"Aprire l'ambiente"}),"\n",(0,r.jsxs)(i.p,{children:["Sulle macchine all'esame (o sulla propria, se si seguono tutti i passi indicati nel pacchetto di installazione) troverete una cartella ",(0,r.jsx)(i.code,{children:"C:/reti_logiche"})," con contenuto come da figura."]}),"\n",(0,r.jsx)("img",{src:(0,l.Ay)("2024-25/img/assembler/ambiente/c-reti_logiche.png"),alt:""}),"\n",(0,r.jsxs)(i.p,{children:["Facendo doppio click sul file ",(0,r.jsx)(i.code,{children:"assembler.code-workspace"})," verr\xe0 lanciato VS Code, collegandosi alla macchina virtuale WSL e la cartella di lavoro ",(0,r.jsx)(i.code,{children:"C:/reti_logiche/assembler"}),"."]}),"\n",(0,r.jsx)(i.p,{children:"La finestra VS Code che si aprir\xe0 sar\xe0 simile alla seguente."}),"\n",(0,r.jsx)("img",{src:(0,l.Ay)("2024-25/img/assembler/ambiente/vs-code-assembler-start.png"),alt:""}),"\n",(0,r.jsxs)(i.p,{children:["Nell'angolo in basso a sinistra, ",(0,r.jsx)(i.code,{children:"WSL: Ubuntu-22.04"})," sta a indicare che l'editor \xe8 correttamente connesso alla macchina virtuale."]}),"\n",(0,r.jsx)(i.p,{children:"I file e cartelle mostrati nell'immagine sono quelli che ci si deve aspettare dall'ambiente vuoto."}),"\n",(0,r.jsx)(i.admonition,{type:"tip",children:(0,r.jsxs)(i.p,{children:["In caso si trovino file in pi\xf9 all'esame, si possono ",(0,r.jsx)(i.em,{children:"cancellare"}),"."]})}),"\n",(0,r.jsxs)(i.p,{children:["Il file ",(0,r.jsx)(i.code,{children:"test-ambiente.s"})," \xe8 un semplice programma per verificare che l'ambiente funzioni. Il contenuto \xe8 il seguente:"]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-assembler",metastring:"showLines",children:'.include "./files/utility.s"\r\n\r\n.data\r\nmessaggio: .ascii "Ok.\\r"\r\n\r\n.text\r\n_main:  \r\n   nop\r\n   lea messaggio, %ebx\r\n   call outline\r\n   ret\r\n\n'})}),"\n",(0,r.jsx)(i.h2,{id:"il-terminale-powershell",children:"Il terminale Powershell"}),"\n",(0,r.jsxs)(i.p,{children:["Per aprire un terminale in VS Code possiamo usare ",(0,r.jsx)(i.code,{children:"Terminale -> Nuovo Terminale"}),".\r\nPer eseguire gli script dell'ambiente c'\xe8 bisogno di aprire un terminale ",(0,r.jsx)(i.em,{children:"Powershell"}),".\r\nLa shell standard di Linux, ",(0,r.jsx)(i.code,{children:"bash"}),", non \xe8 in grado di eseguire questi script."]}),"\n",(0,r.jsx)(i.p,{children:"Non cos\xec:"}),"\n",(0,r.jsx)("img",{src:(0,l.Ay)("2024-25/img/assembler/ambiente/vs-code-assembler-terminal-bash.png"),alt:""}),"\n",(0,r.jsx)(i.p,{children:"Ma cos\xec:"}),"\n",(0,r.jsx)("img",{src:(0,l.Ay)("2024-25/img/assembler/ambiente/vs-code-assembler-terminal-pwsh.png"),alt:""}),"\n",(0,r.jsxs)(i.p,{children:["Per cambiare shell si pu\xf2 usare il bottone ",(0,r.jsx)(i.code,{children:"+"})," sulla sinistra, o lanciare il comando ",(0,r.jsx)(i.code,{children:"pwsh"})," senza argomenti."]}),"\n",(0,r.jsx)(i.admonition,{type:"tip",children:(0,r.jsx)(i.p,{children:"Se si preferisce, in VS Code si pu\xf2 aprire un terminale anche come tab dell'editor, o spostandolo al lato anzich\xe9 in basso."})}),"\n",(0,r.jsx)(i.admonition,{title:"Perch\xe9 Powershell?",type:"note",children:(0,r.jsxs)(i.p,{children:["Perch\xe9 Powershell (2006) \xe8 object-oriented, e permette di scrivere script leggibili e manutenibili, in modo semplice.\r\nBash (1989) \xe8 invece text-oriented, con una ",(0,r.jsx)(i.a,{href:"https://mywiki.wooledge.org/BashPitfalls",children:"lunga lista di trappole da saper evitare"}),"."]})}),"\n",(0,r.jsx)(i.h2,{id:"eseguire-gli-script",children:"Eseguire gli script"}),"\n",(0,r.jsxs)(i.p,{children:["Gli script forniti permettono di assemblare, debuggare e testare il proprio programma.\r\n\xc8 importante che vengano eseguiti ",(0,r.jsx)("u",{children:"senza cambiare cartella"}),", cio\xe8 ",(0,r.jsx)("u",{children:"non"})," usando il comando ",(0,r.jsx)(i.code,{children:"cd"})," o simili.\r\nRicordarsi anche dei ",(0,r.jsx)(i.code,{children:"./"}),", necessari per indicare al terminale che i file indicati vanno cercati nella cartella corrente."]}),"\n",(0,r.jsxs)(i.p,{children:["Il tasto ",(0,r.jsx)(i.code,{children:"tab"})," \u2b7e della tastiera invoca l'autocompletamento, che aiuta ad assicurarsi di inserire percorsi corretti."]}),"\n",(0,r.jsxs)(i.p,{children:["Si ricorda inoltre di ",(0,r.jsx)("u",{children:"salvare"})," il file sorgente prima di provare ad eseguire script."]}),"\n",(0,r.jsx)(i.h3,{id:"assembleps1",children:(0,r.jsx)(i.code,{children:"assemble.ps1"})}),"\n",(0,r.jsxs)(i.blockquote,{children:["\n",(0,r.jsx)(i.p,{children:(0,r.jsx)(i.code,{children:"PS /mnt/c/reti_logiche/assembler> ./assemble.ps1 mio_programma.s"})}),"\n"]}),"\n",(0,r.jsxs)(i.p,{children:["Questo script assembla un sorgente assembler in un file eseguibile.\r\nLo script controlla prima che il file passato non sia un eseguibile, invece che un sorgente.\r\nPoi, il sorgente viene assemblato usando gcc ed includendo il sorgente ",(0,r.jsx)(i.code,{children:"./files/main.c"}),", che si occupa di alcune impostazioni del terminale."]}),"\n",(0,r.jsx)(i.h3,{id:"debugps1",children:(0,r.jsx)(i.code,{children:"debug.ps1"})}),"\n",(0,r.jsxs)(i.blockquote,{children:["\n",(0,r.jsx)(i.p,{children:(0,r.jsx)(i.code,{children:"PS /mnt/c/reti_logiche/assembler> ./debug.ps1 mio_programma"})}),"\n"]}),"\n",(0,r.jsxs)(i.p,{children:["Questo script lancia il debugger per un programma.\r\nLo script controlla prima che il file passato non sia un sorgente, invece che un eseguibile.\r\nPoi, il debugger gdb viene lanciato con il programma dato, includendo le definizioni e comandi iniziali in ",(0,r.jsx)(i.code,{children:"./files/gdb_startup"}),".\r\nQuesti si occupano di definire i comandi ",(0,r.jsx)(i.code,{children:"qquit"})," e ",(0,r.jsx)(i.code,{children:"rrun"})," (non chiedono conferma), creare un breakpoint in ",(0,r.jsx)(i.code,{children:"_main"})," e avviare il programma fino a tale breakpoint (cos\xec da saltare il codice di setup di ",(0,r.jsx)(i.code,{children:"./files/main.c"}),")."]}),"\n",(0,r.jsx)(i.h3,{id:"run-testps1",children:(0,r.jsx)(i.code,{children:"run-test.ps1"})}),"\n",(0,r.jsxs)(i.blockquote,{children:["\n",(0,r.jsx)(i.p,{children:(0,r.jsx)(i.code,{children:"PS /mnt/c/reti_logiche/assembler> ./run-test.ps1 mio_programma input.txt output.txt"})}),"\n"]}),"\n",(0,r.jsx)(i.p,{children:"Lancia un eseguibile usando il contenuto di un file come input, e opzionalmente ne stampa l'output su file.\r\nLo script fa ridirezione di input/output, con alcuni controlli.\r\nTutti i caratteri del file di input verranno visti dal programma come se digitati da tastiera, inclusi i caratteri di fine riga."}),"\n",(0,r.jsx)(i.admonition,{type:"info",children:(0,r.jsxs)(i.p,{children:["Nei computer dei laboratori, questo script si chiama attualmente ",(0,r.jsx)(i.code,{children:"test.ps1"}),"."]})}),"\n",(0,r.jsx)(i.h3,{id:"run-testsps1",children:(0,r.jsx)(i.code,{children:"run-tests.ps1"})}),"\n",(0,r.jsxs)(i.blockquote,{children:["\n",(0,r.jsx)(i.p,{children:(0,r.jsx)(i.code,{children:"PS /mnt/c/reti_logiche/assembler> ./run-tests.ps1 mio_programma cartella_test"})}),"\n"]}),"\n",(0,r.jsx)(i.p,{children:"Testa un eseguibile su una serie di coppie input-output, verificando che l'output sia quello atteso.\r\nStampa riassuntivamente e per ciascun test se \xe8 stato passato o meno."}),"\n",(0,r.jsxs)(i.p,{children:["Lo script prende ciascun file di input, con nome nella forma ",(0,r.jsx)(i.code,{children:"in_*.txt"}),", ed esegue l'eseguibile con tale input.\r\nNe salva poi l'output corrispondente nel file ",(0,r.jsx)(i.code,{children:"out_*.txt"}),".\r\nConfronta poi ",(0,r.jsx)(i.code,{children:"out_*.txt"})," e ",(0,r.jsx)(i.code,{children:"out_ref_*.txt"}),": il test \xe8 passato se i due file coincidono.\r\nNel confronto, viene ignorata la differenza fra le sequenze di fine riga ",(0,r.jsx)(i.code,{children:"\\r\\n"})," e ",(0,r.jsx)(i.code,{children:"\\n"}),"."]})]})}function u(e={}){const{wrapper:i}={...(0,t.R)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},28453:(e,i,n)=>{n.d(i,{R:()=>l,x:()=>o});var s=n(96540);const r={},t=s.createContext(r);function l(e){const i=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function o(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(t.Provider,{value:i},e.children)}}}]);