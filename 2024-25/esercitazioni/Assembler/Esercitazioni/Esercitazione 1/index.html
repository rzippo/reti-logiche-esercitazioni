<!doctype html>
<html lang="it" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-2024-25 docs-doc-page docs-doc-id-esercitazioni/Assembler/Esercitazioni/Esercitazione 1" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.1">
<title data-rh="true">Esercitazione 1 | Esercitazioni di Reti Logiche</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://your-docusaurus-site.example.com/reti-logiche-esercitazioni/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://your-docusaurus-site.example.com/reti-logiche-esercitazioni/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://your-docusaurus-site.example.com/reti-logiche-esercitazioni/2024-25/esercitazioni/Assembler/Esercitazioni/Esercitazione 1"><meta data-rh="true" property="og:locale" content="it"><meta data-rh="true" name="docusaurus_locale" content="it"><meta data-rh="true" name="docsearch:language" content="it"><meta data-rh="true" name="docusaurus_version" content="2024-25"><meta data-rh="true" name="docusaurus_tag" content="docs-default-2024-25"><meta data-rh="true" name="docsearch:version" content="2024-25"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-2024-25"><meta data-rh="true" property="og:title" content="Esercitazione 1 | Esercitazioni di Reti Logiche"><link data-rh="true" rel="icon" href="/reti-logiche-esercitazioni/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://your-docusaurus-site.example.com/reti-logiche-esercitazioni/2024-25/esercitazioni/Assembler/Esercitazioni/Esercitazione 1"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/reti-logiche-esercitazioni/2024-25/esercitazioni/Assembler/Esercitazioni/Esercitazione 1" hreflang="it"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/reti-logiche-esercitazioni/2024-25/esercitazioni/Assembler/Esercitazioni/Esercitazione 1" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://X6QFHIGLL7-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Assembler","item":"https://your-docusaurus-site.example.com/reti-logiche-esercitazioni/2024-25/category/assembler"},{"@type":"ListItem","position":2,"name":"Esercitazioni","item":"https://your-docusaurus-site.example.com/reti-logiche-esercitazioni/2024-25/category/esercitazioni"},{"@type":"ListItem","position":3,"name":"Esercitazione 1","item":"https://your-docusaurus-site.example.com/reti-logiche-esercitazioni/2024-25/esercitazioni/Assembler/Esercitazioni/Esercitazione 1"}]}</script><link rel="alternate" type="application/rss+xml" href="/reti-logiche-esercitazioni/blog/rss.xml" title="Esercitazioni di Reti Logiche RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/reti-logiche-esercitazioni/blog/atom.xml" title="Esercitazioni di Reti Logiche Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GHFPG7JFTZ"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-GHFPG7JFTZ",{anonymize_ip:!0})</script>



<link rel="search" type="application/opensearchdescription+xml" title="Esercitazioni di Reti Logiche" href="/reti-logiche-esercitazioni/opensearch.xml">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/reti-logiche-esercitazioni/assets/css/styles.e959b96b.css">
<script src="/reti-logiche-esercitazioni/assets/js/runtime~main.5ddc92ba.js" defer="defer"></script>
<script src="/reti-logiche-esercitazioni/assets/js/main.72682352.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Passa al contenuto principale"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Passa al contenuto principale</a></div><nav aria-label="Principale" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Attiva/disattiva la barra di navigazione" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/reti-logiche-esercitazioni/"><div class="navbar__logo"><img src="/reti-logiche-esercitazioni/img/logo.png" alt="Reti Logiche" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/reti-logiche-esercitazioni/img/logo.png" alt="Reti Logiche" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Esercitazioni di Reti Logiche</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/reti-logiche-esercitazioni/2024-25/">Esercitazioni</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/reti-logiche-esercitazioni/2024-25/esercitazioni/Assembler/Esercitazioni/Esercitazione 1">2024-25</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/reti-logiche-esercitazioni/esercitazioni/Assembler/Esercitazioni/Esercitazione 1">2025-26</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/reti-logiche-esercitazioni/2024-25/esercitazioni/Assembler/Esercitazioni/Esercitazione 1">2024-25</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Passa dalla modalità scura a quella chiara (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Cerca (Meta+k)" aria-keyshortcuts="Meta+k"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 24 24" aria-hidden="true"><circle cx="11" cy="11" r="8" stroke="currentColor" fill="none" stroke-width="1.4"></circle><path d="m21 21-4.3-4.3" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Cerca</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Torna indietro all&#x27;inizio" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Barra laterale dei documenti" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/reti-logiche-esercitazioni/2024-25/"><span title="Esercitazioni di Reti Logiche" class="linkLabel_WmDU">Esercitazioni di Reti Logiche</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/reti-logiche-esercitazioni/2024-25/esercitazioni/Introduzione"><span title="Introduzione" class="linkLabel_WmDU">Introduzione</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/reti-logiche-esercitazioni/2024-25/category/assembler"><span title="Assembler" class="categoryLinkLabel_W154">Assembler</span></a><button aria-label="Collapse sidebar category &#x27;Assembler&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reti-logiche-esercitazioni/2024-25/esercitazioni/Assembler/Ambiente"><span title="Ambiente" class="linkLabel_WmDU">Ambiente</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex="0" href="/reti-logiche-esercitazioni/2024-25/category/esercitazioni"><span title="Esercitazioni" class="categoryLinkLabel_W154">Esercitazioni</span></a><button aria-label="Collapse sidebar category &#x27;Esercitazioni&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/reti-logiche-esercitazioni/2024-25/esercitazioni/Assembler/Esercitazioni/Esercitazione 1"><span title="Esercitazione 1" class="linkLabel_WmDU">Esercitazione 1</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/reti-logiche-esercitazioni/2024-25/esercitazioni/Assembler/Esercitazioni/Esercitazione 2"><span title="Esercitazione 2" class="linkLabel_WmDU">Esercitazione 2</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/reti-logiche-esercitazioni/2024-25/esercitazioni/Assembler/Esercitazioni/Esercitazione 3"><span title="Esercitazione 3" class="linkLabel_WmDU">Esercitazione 3</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/reti-logiche-esercitazioni/2024-25/esercitazioni/Assembler/Esercitazioni/Esercitazione 4"><span title="Esercitazione 4" class="linkLabel_WmDU">Esercitazione 4</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/reti-logiche-esercitazioni/2024-25/category/documentazione"><span title="Documentazione" class="categoryLinkLabel_W154">Documentazione</span></a><button aria-label="Expand sidebar category &#x27;Documentazione&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reti-logiche-esercitazioni/2024-25/esercitazioni/Assembler/Problemi comuni"><span title="Problemi comuni" class="linkLabel_WmDU">Problemi comuni</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/reti-logiche-esercitazioni/2024-25/category/verilog"><span title="Verilog" class="categoryLinkLabel_W154">Verilog</span></a><button aria-label="Expand sidebar category &#x27;Verilog&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/reti-logiche-esercitazioni/2024-25/esercitazioni/VS-Code"><span title="Uso di VS Code" class="linkLabel_WmDU">Uso di VS Code</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/reti-logiche-esercitazioni/2024-25/esercitazioni/Versioni PDF"><span title="Versioni PDF" class="linkLabel_WmDU">Versioni PDF</span></a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>Questa è la documentazione per <!-- -->Esercitazioni di Reti Logiche<!-- --> <b>2024-25</b>, che non è più attivamente mantenuta.</div><div class="margin-top--md">Per la documentazione aggiornata, guarda la <b><a href="/reti-logiche-esercitazioni/esercitazioni/Assembler/Esercitazioni/Esercitazione 1">ultima versione</a></b> (<!-- -->2025-26<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Briciole di pane"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Pagina principale" class="breadcrumbs__link" href="/reti-logiche-esercitazioni/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/reti-logiche-esercitazioni/2024-25/category/assembler"><span>Assembler</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/reti-logiche-esercitazioni/2024-25/category/esercitazioni"><span>Esercitazioni</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Esercitazione 1</span></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Versione: 2024-25</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">Su questa pagina</button></div><div class="theme-doc-markdown markdown"><header><h1>Esercitazione 1</h1></header>
<p>La caratteristica principale del programmare in assembler è che le operazioni a disposizione sono solo quelle messe a disposizione dal processore.
Infatti, l&#x27;assemblatore fa molto poco: dopo aver sostituito le varie label con indirizzi, traduce ciascuna istruzione, nell&#x27;ordine in cui sono presenti, nel diretto corrispettivo binario (il cosiddetto linguaggio macchina).
Questo binario è poi eseguito direttamente dal processore.
Dato un algoritmo per risolvere un problema, i passi base di questo algoritmo <em>devono</em> essere istruzioni comprese dal processore, e siamo quindi limitati dall&#x27;hardware e le sue caratteristiche.</p>
<p>Per esempio, dato che il processore non supporta <code>mov</code> da un indirizzo di memoria a un&#x27;altro indirizzo di memoria, non possiamo fare questa operazione con una sola istruzione: dobbiamo invece scomporre in <code>mov src, %eax</code> <code>mov %eax, dest</code>, assicurandoci nel frattempo di non aver perso alcun dato importante prima contenuto in <code>%eax</code>.</p>
<p>Per svolgere gli esercizi, bisogna quindi imparare a scomporre strutture di programmazione già note (come if-then-else, cicli, accesso a vettore) nelle operazioni elementari messe ad disposizione dal processore, usando il limitato numero di registri a disposizione al posto di variabili, e tenendo presente quali operazioni da fare con quali dati, senza un sistema di tipizzazione ad aiutarci.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="premesse-per-programmi-nellambiente-del-corso">Premesse per programmi nell&#x27;ambiente del corso<a href="#premesse-per-programmi-nellambiente-del-corso" class="hash-link" aria-label="Link diretto a Premesse per programmi nell&#x27;ambiente del corso" title="Link diretto a Premesse per programmi nell&#x27;ambiente del corso" translate="no">​</a></h2>
<p>Unica eccezione alla logica di cui sopra sono i sottoprogrammi di ingresso/uscita, forniti tramite <code>utility.s</code>:
questi interagiscono con il terminale tramite il <em>kernel</em> usando il meccanismo delle <em>interruzioni</em>, concetti che avrete il tempo di esplorare in corsi successivi.
Qui ci limiteremo a seguirne le specifiche per leggere o stampare a video numeri, caratteri, o stringhe.
Per esempio, parte di queste specifiche è l&#x27;uso del carattere di ritorno carrello <code>\r</code> come terminatore di stringa.
Per usarli, però, va istruito l&#x27;assemblatore di aggiungere questi sottoprogrammi al nostro codice, con</p>
<div class="language-assembler codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-assembler codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token directive keyword" style="color:#00009f">.include </span><span class="token literal-string string" style="color:#e3116c">&quot;./files/utility.s&quot;</span><br></span></code></pre></div></div>
<p>Un altro aspetto importante è dove comincia e finisce il nostro programma:
<em>nell&#x27;ambiente del corso</em>, il punto di ingresso è la label <code>_main</code> e quello di uscita è la corrispendente istruzione <code>ret</code>.
Per motivi di debugging, che saranno chiari più avanti, si tende a cominciare il programma con una istruzione <code>nop</code>.</p>
<p>Inoltre, la distinzione tra zona <code>.data</code> e <code>.text</code> è importante.
Dato che durante l&#x27;esecuzione sono <em>entrambi</em> caricati in memoria, per motivi di sicurezza il kernel Linux ci impedirà di <em>eseguire</em> indirizzi in <code>.data</code> o di <em>scrivere</em> in indirizzi in <code>.text</code>.
Dimenticarsi di dichiararli porta ad eccezioni durante l&#x27;esecuzione.</p>
<p>Infine, l&#x27;assemblatore non vede di buon occhio la mancanza di una riga vuota alla fine del file.
Per evitare messaggi di warning inutili, meglio aggiungerla.</p>
<p>Detto ciò, possiamo quindi comprendere il <a href="/reti-logiche-esercitazioni/assets/files/test-ambiente-a212726513ba02c9e39bddbc0b096260.s" target="_blank">programma di test</a>, che non fa che stampare &quot;Ok.&quot; a terminale e poi termina:</p>
<div class="language-assembler codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-assembler codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm" style="counter-reset:line-count 0"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token directive keyword" style="color:#00009f">.include </span><span class="token literal-string string" style="color:#e3116c">&quot;./files/utility.s&quot;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token directive keyword" style="color:#00009f">.data</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">messaggio:</span><span class="token plain"> </span><span class="token directive keyword" style="color:#00009f">.ascii </span><span class="token literal-string string" style="color:#e3116c">&quot;Ok.\r&quot;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token directive keyword" style="color:#00009f">.text</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">_main:</span><span class="token plain">  </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">nop</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> messaggio</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> outline</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">ret</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Non generalità</div><div class="admonitionContent_BuS1"><p>Le istruzioni di questa sezione sono relative all&#x27;ambiente del corso.
La direttiva <code>.include &quot;./files/utility.s&quot;</code> ricopia il codice del file <code>utility.s</code>, fornito nell&#x27;ambiente del corso.
Le specifiche dei sottoprogrammi (uso dei registri, <code>\r</code> come carattere di terminazione, etc.) sono conseguenza di come è scritto questo codice, che ha a che fare con scelte del corso, tra cui la retrocompatibilità con il vecchio ambiente DOS.
L&#x27;uso di <code>_main</code> e <code>ret</code> (peraltro, senza alcun valore di ritorno), così come il comportamento del terminale, sono anche questi relativi all&#x27;ambiente usato.</p><p>Non sono assolutamente concetti validi in generale, per altri assembler e altri ambienti.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="esercizio-11">Esercizio 1.1<a href="#esercizio-11" class="hash-link" aria-label="Link diretto a Esercizio 1.1" title="Link diretto a Esercizio 1.1" translate="no">​</a></h2>
<p>Partiamo da un esercizio con le seguenti specifiche</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1. Leggere messaggio da terminale.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. Convertire le lettere minuscole in maiuscolo.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3. Stampare messaggio modificato.</span><br></span></code></pre></div></div>
<p>I passi 1 e 3 sono da svolgersi usando i sottoprogrammi <code>inline</code> e <code>outline</code>.
Cominciamo riservando in memoria, nella sezione data, spazio per le due stringhe.</p>
<div class="language-assembler codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-assembler codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token directive keyword" style="color:#00009f">.data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token label function" style="color:#d73a49">msg_in:</span><span class="token plain"> </span><span class="token directive keyword" style="color:#00009f">.fill </span><span class="token plain">80</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token label function" style="color:#d73a49">msg_out:</span><span class="token plain"> </span><span class="token directive keyword" style="color:#00009f">.fill </span><span class="token plain">80</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 0</span><br></span></code></pre></div></div>
<p>Per la lettura useremo</p>
<div class="language-assembler codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-assembler codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token literal-decimal-number number" style="color:#36acaa">$80</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%cx</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> msg_in</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> inline</span><br></span></code></pre></div></div>
<p>Per la scrittura invece useremo</p>
<div class="language-assembler codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-assembler codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> msg_out</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> outline</span><br></span></code></pre></div></div>
<p>Quel che manca ora è il punto 2.
Dobbiamo (capire come) fare diverse cose:</p>
<ul>
<li>ricopiare <code>msg_in</code> in <code>msg_out</code> carattere per carattere</li>
<li>controllare tale carattere, per capire se è una lettera minuscola<!-- -->
<ul>
<li>se sì, cambiare tale carattere nella corrispondente maiuscola</li>
</ul>
</li>
</ul>
<p>Partiamo dal primo di questi punti, e per semplicità, scriviamone il codice ignorando i restanti due punti, ossia ricopiando il carattere indipendentemente dal fatto che sia minuscolo o maiuscolo.</p>
<p>Come scorrere i due vettori? Abbiamo due opzioni: usare un indice per accesso indicizzato, o due puntatori da incrementare.
Anche sulla condizione di terminazione abbiamo due opzioni: fermarsi dopo aver processato il carattere di ritorno carrello <code>\r</code>, o dopo aver processato 80 caratteri.</p>
<p>Per questo esercizio, scegliamo la prima opzione per entrambe le scelte.
Se usassimo C, scriveremmo questo:</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">char</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> msg_in</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> msg_out</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    c </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> msg_in</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    msg_out</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token char">&#x27;\r&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>In assembler, questo si può scrivere così:</p>
<div class="language-assembler codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-assembler codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> msg_in</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%esi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> msg_out</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%edi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token literal-decimal-number number" style="color:#36acaa">$0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ecx</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token label function" style="color:#d73a49">loop:</span><span class="token plain">   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">movb</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token register variable" style="color:#36acaa">%esi</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ecx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">movb</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token register variable" style="color:#36acaa">%edi</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ecx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">inc</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ecx</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cmp</span><span class="token plain"> </span><span class="token literal-hex-number number" style="color:#36acaa">$0x0d</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">jne</span><span class="token plain"> loop</span><br></span></code></pre></div></div>
<p>Ci sono diversi aspetti da sottolineare.
Il primo è che nell&#x27;accesso con indice, a differenza del C, abbiamo completo controllo sia di come è calcolato l&#x27;indirizzo di accesso, sia sulla dimensione della lettura in memoria. Prendiamo il caso di <code>movb (%esi, %ecx), %al</code>.
Ricordiamo che il formato dell&#x27;indirizzazione con indice è <code>offset(%base, %indice, scala)</code>, dove l&#x27;indirizzo è calcolato come <code>offset + %base + (%indice * scala)</code>.
Dunque <code>(%esi, %ecx)</code> è, implicitamente, <code>0(%esi, %ecx, 1)</code>, dove l&#x27;1 indica il fatto che ci spostiamo di un un byte alla volta.
Dato l&#x27;indirizzo, però, in abbiamo controllo di quanti byte leggere, questa volta tramite il suffisso <code>b</code> o, implicitamente, tramite la dimensione del registro di destinazione <code>%al</code>.</p>
<p>In C, questi aspetti sono legati al fatto di usare il tipo <code>char</code>, che è appunto di 1 byte.
In assembler, <u>dobbiamo starci attenti noi</u>.</p>
<p>Prima di passare al resto del punto 2, vale la pena provare a comporre il programma così com&#x27;è, testarlo ed eseguirlo.
Infatti, è sempre una buona idea trovare i bug quanto prima, e quanto più è semplice il codice scritto tanto più lo è trovare la fonte del bug.</p>
<p>Ci rimane ora da controllare che il carattere letto sia una minuscola, e nel caso cambiarla in maiuscola.
Per il primo punto, ci basta ricordare che i caratteri ASCII hanno una codifica binaria ordinata: <code>char c</code> è minuscola se <code>c &gt;= &#x27;a&#x27; &amp;&amp; c &lt;= &#x27;z&#x27;</code>.</p>
<p>Per cambiare invece una minuscola e maiuscola, notiamo sempre dalla tabella ASCII che la distanza tra <code>&#x27;a&#x27;</code> e <code>&#x27;A&#x27;</code>, è la stessa di qualunque altra coppia di maiuscola-minuscola; ci basta infatti sottrarre 32 ad una minuscola per ottenere la corrispondente maiuscola, e aggiungere 32 per fare il contrario.
Guardando alla rappresentazione in base 2, notiamo che l&#x27;operazione è ancora più semplice: essendo <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>32</mn><mo>=</mo><msup><mn>2</mn><mn>5</mn></msup></mrow><annotation encoding="application/x-tex">32 = 2^5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">32</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.8141em"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span></span></span></span>, si tratta di mettere il bit in posizione 5 a 0 o 1, usando <code>and</code>, <code>or</code> o <code>xor</code> con maschere appropriate.</p>
<p>Detto ciò, il codice C diventa:</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">char</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> msg_in</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> msg_out</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    c </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> msg_in</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c </span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> </span><span class="token char">&#x27;a&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> c </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> </span><span class="token char">&#x27;z&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        c </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> c </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0xdf</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    msg_out</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token char">&#x27;\r&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>Dove <code>0xdf</code> corrisponde a <code>1101 1111</code>, ossia l&#x27;<code>and</code> resetta il bit in posizione 5.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Il controllo non è opzionale</div><div class="admonitionContent_BuS1"><p>Domanda: se vogliamo che tutte le lettere siano maiuscole, non basta resettare il bit 5 a prescindere, e non fare il controllo?</p><p>Risposta: no, perché ci sono altri caratteri ASCII con il bit 5 a 1 che non sono affatto lettere. Per esempio, il carattere spazio di codifica <code>0x20</code>.</p></div></div>
<p>Questo si traduce nel seguente assembler:</p>
<div class="language-assembler codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-assembler codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> msg_in</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%esi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> msg_out</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%edi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token literal-decimal-number number" style="color:#36acaa">$0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ecx</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token label function" style="color:#d73a49">loop:</span><span class="token plain">   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">movb</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token register variable" style="color:#36acaa">%esi</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ecx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cmp</span><span class="token plain"> </span><span class="token literal-character number" style="color:#36acaa">$&#x27;a&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">jb</span><span class="token plain"> post_check</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cmp</span><span class="token plain"> </span><span class="token literal-character number" style="color:#36acaa">$&#x27;z&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">ja</span><span class="token plain"> post_check</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">and</span><span class="token plain"> </span><span class="token literal-hex-number number" style="color:#36acaa">$0xdf</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># 1101 1111 -&gt; l&#x27;and resetta il bit 5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token label function" style="color:#d73a49">post_check:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">movb</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token register variable" style="color:#36acaa">%edi</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ecx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">inc</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ecx</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cmp</span><span class="token plain"> </span><span class="token literal-hex-number number" style="color:#36acaa">$0x0d</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">jne</span><span class="token plain"> loop</span><br></span></code></pre></div></div>
<p>Notiamo che le due condizione nell&#x27;if vanno rimaneggiate per essere tradotte, infatti saltiamo a dopo la conversione se le condizioni <em>non</em> sono verificate.</p>
<p>Il codice finale è quindi il seguente, scaricabile <a href="/reti-logiche-esercitazioni/assets/files/maiusc-6156df71580eda49e0a20ec1cede4cfd.s" target="_blank">qui</a> come file sorgente.</p>
<div class="language-assembler codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-assembler codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm" style="counter-reset:line-count 0"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token directive keyword" style="color:#00009f">.include </span><span class="token literal-string string" style="color:#e3116c">&quot;./files/utility.s&quot;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token directive keyword" style="color:#00009f">.data</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">msg_in:</span><span class="token plain"> </span><span class="token directive keyword" style="color:#00009f">.fill </span><span class="token plain">80</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 0</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">msg_out:</span><span class="token plain"> </span><span class="token directive keyword" style="color:#00009f">.fill </span><span class="token plain">80</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 0</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token directive keyword" style="color:#00009f">.text</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">_main:</span><span class="token plain">  </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">nop</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">punto_1:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token literal-decimal-number number" style="color:#36acaa">$80</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%cx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> msg_in</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> inline</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">nop</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">punto_2:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> msg_in</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%esi</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> msg_out</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%edi</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token literal-decimal-number number" style="color:#36acaa">$0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ecx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">loop:</span><span class="token plain">   </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">movb</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token register variable" style="color:#36acaa">%esi</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ecx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cmp</span><span class="token plain"> </span><span class="token literal-character number" style="color:#36acaa">$&#x27;a&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">jb</span><span class="token plain"> post_check</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cmp</span><span class="token plain"> </span><span class="token literal-character number" style="color:#36acaa">$&#x27;z&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">ja</span><span class="token plain"> post_check</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">and</span><span class="token plain"> </span><span class="token literal-hex-number number" style="color:#36acaa">$0xdf</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">post_check:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">movb</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token register variable" style="color:#36acaa">%edi</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ecx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">inc</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ecx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cmp</span><span class="token plain"> </span><span class="token literal-hex-number number" style="color:#36acaa">$0x0d</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">jne</span><span class="token plain"> loop</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">punto_3:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> msg_out</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> outline</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">nop</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">fine:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">ret</span></span><br></span></code></pre></div></div>
<p>Le label <code>punto_1</code>, <code>punto_2</code>, <code>punto_3</code> e <code>fine</code> sono, come è facile verificare, del tutto opzionali.
Sono però utili ai fini del debugging, che presentiamo ora.</p>
<p>Sono da notare le <code>nop</code> aggiunte prima tra le <code>call</code> alle righe 13 e 33 e le successive label:
queste sono un workaround per ovviare ad un problema di <code>gdb</code>, che spiegherò più avanti.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="uso-del-debugger">Uso del debugger<a href="#uso-del-debugger" class="hash-link" aria-label="Link diretto a Uso del debugger" title="Link diretto a Uso del debugger" translate="no">​</a></h2>
<blockquote>
<p><em>Debugging is like being the detective in a crime movie where you are also the murderer.</em> <br>
<a href="https://twitter.com/fortes/status/399339918213652480" target="_blank" rel="noopener noreferrer">Filipe Fortes</a></p>
</blockquote>
<p>La parola <em>debugger</em> suggerisce da sé che sia uno strumento per rimuovere bug ma, purtroppo, questo non vuol dire che lo strumento li rimuove da solo.
Infatti, quello in cui ci è utile il debugger è <em>trovare</em> i bug, seguendo l&#x27;esecuzione del programma passo passo e controllando il suo stato per capire dov&#x27;è che il suo comportamento differisce da quanto ci aspettiamo.
Da lì, spesso indagando a ritroso e con un po&#x27; di intuito, si può trovare le istruzioni incriminate e correggerle.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Uno strumento per essere più efficienti</div><div class="admonitionContent_BuS1"><p>Domanda: sembra complicato, non è più facile rileggere il codice?</p><p>Risposta: sì, lo è. Ma, in genere, quando basta rileggere è perché si è fatto un errore di digitazione, non di ragionamento. Saper usare il debugger significa sapersi tirare fuori <em>velocemente</em> da errori che richiederebbero rileggere <em>a fondo</em> tutto il codice.</p></div></div>
<p>Il debugger che usiamo è <code>gdb</code>, che funziona da linea di comando.
Questo parte da un binario eseguibile, che verrà eseguito passo passo come da noi indicato.</p>
<p>Per semplicità d&#x27;uso, l&#x27;ambiente ha uno script <code>debug.ps1</code>, da lanciare con</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./debug.ps1 nome-eseguibile</span><br></span></code></pre></div></div>
<p>Lo script fa dei controlli, tra cui assicurarsi che si sia passato <em>l&#x27;eseguibile</em> e non <em>il sorgente</em>, lancia il debugger con alcuni comandi tipici già inseriti (imposta un breakpoint a <code>_main</code> e lancia il programma), e ne definisce altri per comodità d&#x27;uso (<code>rr</code> e <code>qq</code>, per riavviare il programma o uscire senza dare conferma).</p>
<p>Vediamo come usarlo, lanciando il debugger sul programma realizzato nell&#x27;esercizio precedente.
Dopo un sezione di presentazione del programma, abbiamo del testo del tipo</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Breakpoint 1, _main () at /mnt/c/reti_logiche/assembler/lezioni/1/maiusc.s:9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">9           nop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) </span><br></span></code></pre></div></div>
<p>Un breakpoint è un punto del programma, in genere una linea di codice, dove si desidera che il debugger fermi l&#x27;esecuzione.
Avendo impostato il primo breakpoint a <code>_main</code>, vediamo infatti che il programma si ferma alla prima istruzione relativa, che è appunto la <code>nop</code>.
Importante: il debugger si ferma <em>prima</em> dell&#x27;esecuzione della riga indicata.</p>
<p>Vediamo poi che il debugger richiede input: infatti possiamo interagire con il debugger <em>solo</em> quando il programma è fermo.
Possiamo fare tre cose in particolare:</p>
<ul>
<li>Osservare il contenuto di registri e indirizzi di memoria (<code>info registers</code> e <code>x</code>),</li>
<li>Impostare nuovi breakpoints (<code>break</code>),</li>
<li>Continuare l&#x27;esecuzione in modo controllato (<code>step</code> e <code>next</code>) o fino al prossimo breakpoint (<code>continue</code>)</li>
</ul>
<p>Vediamoli in azione. Cominciamo con il proseguire fino alla riga 13.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Breakpoint 1, _main () at /mnt/c/reti_logiche/assembler/lezioni/1/maiusc.s:9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">9           nop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) step</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">punto_1 () at /mnt/c/reti_logiche/assembler/lezioni/1/maiusc.s:11</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">11          mov $80, %cx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">12          lea msg_in, %ebx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">13          call inline</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) </span><br></span></code></pre></div></div>
<p>Notiamo che <code>gdb</code> accetta sia comandi per esteso sia abbreviati, per esempio per <code>step</code> va bene anche <code>s</code>.
Con questi 3 step, abbiamo eseguito le prime tre istruzioni ma <em>non</em> la <code>call</code> a riga 13.
Possiamo controllare lo stato dei registri usando <code>info registers</code>, abbreviabile con <code>i r</code>.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) i r</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">eax            0x66                102</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ecx            0x50                80</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">edx            0x2d                45</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ebx            0x56559066          1448448102</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">esp            0xffffc06c          0xffffc06c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ebp            0xffffc078          0xffffc078</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">esi            0xf7fb2000          -134537216</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">edi            0xf7fb2000          -134537216</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">eip            0x5655676e          0x5655676e &lt;punto_1+10&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">eflags         0x282               [ SF IF ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cs             0x23                35</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ss             0x2b                43</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ds             0x2b                43</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">es             0x2b                43</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fs             0x0                 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gs             0x63                99</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) </span><br></span></code></pre></div></div>
<blockquote>
<p>Notare: è <em>un caso</em> trovare i registri già inizializzati a 0, come qui mostrato.</p>
</blockquote>
<p>Questo ci da info su diversi registri, molti dei quali non ci interessano.
Possiamo specificare quali registri vogliamo, anche di dimensioni minori di 32 bit.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) i r cx ebx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cx             0x50                80</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ebx            0x56559066          1448448102</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb)</span><br></span></code></pre></div></div>
<p>La prossima istruzione, se lasciamo il programma eseguire, è una <code>call</code>.
In questo caso, abbiamo due scelte: proseguire <em>nella</em> chiamata al sottoprogramma (andando quindi alle istruzioni di <code>inline</code>, definite in <code>utility.s</code>), o <em>oltre</em> la chiamata, andando quindi direttamente alla riga 14.
Questa è la differenza fra <code>step</code> e <code>next</code>: <code>step</code> prosegue dentro i sottoprogrammi, mentre <code>next</code> prosegue finché il sottoprogramma non ritorna.</p>
<p>È qui però che è rilevante la presenza della <code>nop</code> aggiunta a riga 14, prima di <code>parte_2</code>.
<code>next</code> infatti continua fino alla prossima istruzione della <em>sezione corrente</em> del codice, che è in questo caso <code>punto_1</code>.
Se però tale sezione termina subito dopo la call, e non esiste quindi una successiva istruzione nella stessa sezione, allora usando <code>next</code> il programma continuerà fino alla terminazione.
Aggiungere la <code>nop</code> ovvia al problema essendo una successiva istruzione ancora parte di <code>punto_1</code>.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">13          call inline</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">questo e&#x27; un test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">14          nop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) </span><br></span></code></pre></div></div>
<p>Da notare che &quot;questo e&#x27; un test&quot; è proprio l&#x27;input inserito da tastiera durante l&#x27;esecuzione di <code>inline</code>.</p>
<p>Eseguire il programma un&#x27;istruzione alla volta può risultare molto lento.
Per esempio, quando vogliamo osservare cosa succede ad una particolare iterazione di un loop.
Per questo ci aiutano <code>break</code> e <code>continue</code>.
Nell&#x27;esempio che segue, sono usati per raggiungere rapidamente la quarta iterazione.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) b loop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Breakpoint 2 at 0x56556785: file /mnt/c/reti_logiche/assembler/lezioni/1/maiusc.s, line 20.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Continuing.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Breakpoint 2, loop () at /mnt/c/reti_logiche/assembler/lezioni/1/maiusc.s:20</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">20          movb (%esi, %ecx), %al</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) i r ecx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ecx            0x0                 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Continuing.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Breakpoint 2, loop () at /mnt/c/reti_logiche/assembler/lezioni/1/maiusc.s:20</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">20          movb (%esi, %ecx), %al</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) i r ecx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ecx            0x1                 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Continuing.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Breakpoint 2, loop () at /mnt/c/reti_logiche/assembler/lezioni/1/maiusc.s:20</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">20          movb (%esi, %ecx), %al</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Continuing.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Breakpoint 2, loop () at /mnt/c/reti_logiche/assembler/lezioni/1/maiusc.s:20</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">20          movb (%esi, %ecx), %al</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) i r ecx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ecx            0x3                 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) </span><br></span></code></pre></div></div>
<p>L&#x27;ultima operazione base da vedere è osservare valori in memoria.
Il comando <code>x</code> sta per <em>examine memory</em> ma, a differenza degli altri comandi, esiste solo in forma abbreviata.
Il comando ha 4 argomenti:</p>
<ul>
<li><code>N</code>, il numero di &quot;celle&quot; consecutive della memoria da leggere;</li>
<li><code>F</code>, il formato con cui interpretare il contenuto di tali &quot;celle&quot;, per esempio <code>d</code> per decimale e <code>c</code> per ASCII;</li>
<li><code>U</code>, la dimensione di ciascuna &quot;cella&quot;: <code>b</code> per 1 byte, <code>h</code> per 2 byte, <code>w</code> per 4 byte;</li>
<li><code>addr</code>, l&#x27;indirizzo in memoria da cui cominciare la lettura.</li>
</ul>
<p>Il formato del comando è <code>x/NFU addr</code>.
Gli argomenti <code>N</code>, <code>F</code> e <code>U</code> sono, di default, <em>gli ultimi utilizzati</em>. Questo è infatti un comando <em>con memoria</em>.
Quando non sono specificati, si dovrà omettere anche lo <code>/</code>.
L&#x27;argomento <code>addr</code> si può passare come</p>
<ul>
<li>costante esadecimale, per esempio <code>x 0x56559066</code>;</li>
<li>label preceduta da <code>&amp;</code>, per esempio <code>x &amp;msg_in</code>;</li>
<li>registro preceduto da <code>$</code>, per esempio <code>x $esi</code>;</li>
<li>espressione basata su aritmetica dei puntatori, per esempio <code>x (int*)&amp;msg_in+$ecx</code>.</li>
</ul>
<p>L&#x27;ultima opzione è abbastanza ostica da sfruttare, vedremo come evitarla con una tecnica alternativa.</p>
<p>Vediamo degli esempi tornando al debugging del nostro primo programma:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) x/20cb &amp;msg_in</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0x56559066:     113 &#x27;q&#x27; 117 &#x27;u&#x27; 101 &#x27;e&#x27; 115 &#x27;s&#x27; 116 &#x27;t&#x27; 111 &#x27;o&#x27; 32 &#x27; &#x27;  101 &#x27;e&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0x5655906e:     39 &#x27;\&#x27;&#x27; 32 &#x27; &#x27;  117 &#x27;u&#x27; 110 &#x27;n&#x27; 32 &#x27; &#x27;  116 &#x27;t&#x27; 101 &#x27;e&#x27; 115 &#x27;s&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0x56559076:     116 &#x27;t&#x27; 13 &#x27;\r&#x27; 10 &#x27;\n&#x27; 0 &#x27;\000&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) x/20cb &amp;msg_out</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0x565590b6:     81 &#x27;Q&#x27;  85 &#x27;U&#x27;  69 &#x27;E&#x27;  0 &#x27;\000&#x27;        0 &#x27;\000&#x27;        0 &#x27;\000&#x27;        0 &#x27;\000&#x27;      0 &#x27;\000&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0x565590be:     0 &#x27;\000&#x27;        0 &#x27;\000&#x27;        0 &#x27;\000&#x27;        0 &#x27;\000&#x27;        0 &#x27;\000&#x27;     0 &#x27;\000&#x27; 0 &#x27;\000&#x27;        0 &#x27;\000&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0x565590c6:     0 &#x27;\000&#x27;        0 &#x27;\000&#x27;        0 &#x27;\000&#x27;        0 &#x27;\000&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) x/20cb $esi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0x56559066:     113 &#x27;q&#x27; 117 &#x27;u&#x27; 101 &#x27;e&#x27; 115 &#x27;s&#x27; 116 &#x27;t&#x27; 111 &#x27;o&#x27; 32 &#x27; &#x27;  101 &#x27;e&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0x5655906e:     39 &#x27;\&#x27;&#x27; 32 &#x27; &#x27;  117 &#x27;u&#x27; 110 &#x27;n&#x27; 32 &#x27; &#x27;  116 &#x27;t&#x27; 101 &#x27;e&#x27; 115 &#x27;s&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0x56559076:     116 &#x27;t&#x27; 13 &#x27;\r&#x27; 10 &#x27;\n&#x27; 0 &#x27;\000&#x27;</span><br></span></code></pre></div></div>
<p>In questo programma usiamo un&#x27;indirizzazione con indice per leggere e scrivere lettere nei vettori.
Infatti, vediamo che il registro <code>esi</code> punta sempre alla prima lettera del vettore, e abbiamo bisogno di usare anche <code>ecx</code> per sapere qual&#x27;è la lettera che il programma intende processare in questa iterazione del loop.</p>
<p>Per usare la sintassi menzionata sopra, dovremmo ricordarci come tradurre <code>(%esi, %ecx)</code> in un&#x27;espressione di aritmetica dei puntatori.
Una alternativa molto agevole è invece la scomposizione dell&#x27;istruzione <code>movb (%esi, %ecx), %al</code> in due: una <code>lea</code> e una <code>mov</code>.
Infatti, ricordiamo che la <code>lea</code> ci permette di calcolare un indirizzo, anche se con composto con indice, e salvarlo in un registro.
Possiamo per esempio scrivere</p>
<div class="language-assembler codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-assembler codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token register variable" style="color:#36acaa">%esi</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ecx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">movb</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><br></span></code></pre></div></div>
<p>In questo modo, l&#x27;indirizzo della lettera da leggere sarà contenuto in <code>ebx</code>, cosa che possiamo sfruttare nel debugger con il comando <code>x/1cb $ebx</code>.</p>
<p>Come ultime indicazioni sul debugger, menzioniamo il comando <code>layout regs</code>, che mostra ad ogni passo i registri e il codice da eseguire, e i comandi <code>r</code>, per riavviare il programma e <code>q</code>, per terminare il debugger.
Le versioni <code>qq</code> e <code>rr</code>, <em>definite ad hoc nell&#x27;ambiente di questo corso</em>, fanno lo stesso senza richiedere conferma.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="esercizio-12-istruzioni-stringa">Esercizio 1.2: istruzioni stringa<a href="#esercizio-12-istruzioni-stringa" class="hash-link" aria-label="Link diretto a Esercizio 1.2: istruzioni stringa" title="Link diretto a Esercizio 1.2: istruzioni stringa" translate="no">​</a></h2>
<p>L&#x27;esercizio precedente compie un&#x27;operazione ripetuta su vettori.
Legge da un vettore, una cella alla volta, ne manipola il contenuto, poi lo scrive su un altro vettore.
Questo genere di operazioni è adatto per l&#x27;uso delle <em>istruzioni stringa</em>.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Provare da sé</div><div class="admonitionContent_BuS1"><p>Provare a svolgere da sé l&#x27;esercizio, prima di andare oltre.</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1. Leggere messaggio da terminale.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. Convertire le lettere minuscole in maiuscolo, usando le istruzioni stringa.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3. Stampare messaggio modificato.</span><br></span></code></pre></div></div></div></div>
<p>Le istruzioni stringa sono un esempio di set di istruzioni specializzate, cioè istruzioni che non sono pensate per impementare algoritmi generici, ma sono invece pensate per fornire supporto hardware efficiente ad uno specifico set di operazioni che alcuni algoritmi necessitano.
Infatti, ci si può aspettare che tra due programmi equivalenti, uno scritto con sole istruzioni generali e l&#x27;altro scritto con istruzioni specializzate, il secondo sarà molto più performante del primo.
Altri esempi comuni sono le istruzioni a supporto di crittografia, encoding e decoding di stream multimediali, e, più recentemente, neural networks.</p>
<p>Questi set di istruzioni sono però più &quot;rigidi&quot; delle istruzioni ad uso generale.
Ci impongono infatti dei modi specifici di organizzare dati e codice, perché questi devono essere compatibili con il modo in cui l&#x27;algoritmo eseguito da un&#x27;istruzione è implementato in hardware.</p>
<p>Nell&#x27;esercizio precedente abbiamo considerato due modi di scorrere i due array.
Nel primo, che è quello che abbiamo scelto, si carica l&#x27;indirizzo di inizio del vettore, e si usa un altro registro come indice, usando l&#x27;indirizzazione con indice.
Nel secondo, si usa un registro come puntatore alla cella corrente, inizializzato all&#x27;indirizzo di inizio del vettore e poi incrementato (della quantità giusta) per passare all&#x27;elemento successivo.
In entrambi i casi, siamo liberi di usare i registri che vogliamo, per esempio non abbiamo nessun problema se scriviamo il programma di prima come segue:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    lea msg_in, %eax</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    lea msg_out, %ebx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mov $0, %edx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">loop:   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    movb (%eax, %edx), %cl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span></code></pre></div></div>
<p>Infatti, usare <code>esi</code> ed <code>edi</code> come registri puntatori, ed <code>ecx</code> come registro di indice, è del tutto opzionale.</p>
<p>Tutto questo cambia quando si vogliono esare istruzioni specializzate come le istruzioni stringa.
Queste ci impongono di usare <code>esi</code> come puntatore al vettore sorgente, <code>edi</code> come puntatore al vettore destinatario, <code>eax</code> come registro dove scrivere o da cui leggere il valore da trasferire, <code>ecx</code> come contatore delle ripetizioni da eseguire, etc.
Una volta scelte le istruzioni da usare, dobbiamo quindi assicurarci di seguire quanto imposto dall&#x27;istruzione.</p>
<p>Per questo esercizio siamo interessati alla <code>lods</code>, che legge un valore dal vettore e ne sposta il puntatore allo step successivo, e la <code>stos</code>, che scrive un valore nel vettore.
Partiamo dal riscrivere il <code>punto_2</code> in modo da rendere l&#x27;algoritmo compatibile.</p>
<div class="language-assembler codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-assembler codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token label function" style="color:#d73a49">punto_2:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> msg_in</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%esi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> msg_out</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%edi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token label function" style="color:#d73a49">loop:</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">movb</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token register variable" style="color:#36acaa">%esi</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">inc</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%esi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cmp</span><span class="token plain"> </span><span class="token literal-character number" style="color:#36acaa">$&#x27;a&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">jb</span><span class="token plain"> post_check</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cmp</span><span class="token plain"> </span><span class="token literal-character number" style="color:#36acaa">$&#x27;z&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">ja</span><span class="token plain"> post_check</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">and</span><span class="token plain"> </span><span class="token literal-hex-number number" style="color:#36acaa">$0xdf</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token label function" style="color:#d73a49">post_check:</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">movb</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token register variable" style="color:#36acaa">%edi</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">inc</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%edi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cmp</span><span class="token plain"> </span><span class="token literal-hex-number number" style="color:#36acaa">$0x0d</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">jne</span><span class="token plain"> loop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre></div></div>
<p>Abbiamo dunque rimosso l&#x27;uso di <code>ecx</code> come indice, e usiamo <code>esi</code> ed <code>edi</code> come puntatori.
Il fatto di usare la <code>inc</code> è legato alla dimensione dei dati, cioè 1 byte.
Dovremmo invece scrivere <code>add $2, %esi</code> o <code>add $4, %esi</code> per dati su 2 o 4 byte.
Altra nota è che <em>incrementiamo</em> i puntatori, anziché decrementarli, perché stiamo eseguendo l&#x27;operazione da sinistra verso destra.</p>
<p>Siamo pronti adesso a sostiture le istruzioni evidenziate con delle istruzioni stringa.
Il sorgente finale è scaricabile <a href="/reti-logiche-esercitazioni/assets/files/maiusc-str-172b598e396b4826aa2aba6161c40f87.s" target="_blank">qui</a>.</p>
<div class="language-assembler codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-assembler codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token label function" style="color:#d73a49">punto_2:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> msg_in</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%esi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> msg_out</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%edi</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cld</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token label function" style="color:#d73a49">loop:</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">lodsb</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cmp</span><span class="token plain"> </span><span class="token literal-character number" style="color:#36acaa">$&#x27;a&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">jb</span><span class="token plain"> post_check</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cmp</span><span class="token plain"> </span><span class="token literal-character number" style="color:#36acaa">$&#x27;z&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">ja</span><span class="token plain"> post_check</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">and</span><span class="token plain"> </span><span class="token literal-hex-number number" style="color:#36acaa">$0xdf</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token label function" style="color:#d73a49">post_check:</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">stosb</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cmp</span><span class="token plain"> </span><span class="token literal-hex-number number" style="color:#36acaa">$0x0d</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">jne</span><span class="token plain"> loop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre></div></div>
<p>L&#x27;istruzione <code>cld</code> serve a impostare a 0 il flag di direzione, che serve a indicare alle istruzioni stringa se andare da sinistra verso destra o il contrario.
Dato che tutti i registri sono impliciti, dobbiamo sempre specificare la dimensione delle istruzioni, in questo caso <code>b</code>.</p>
<p>Come esercizio, può essere interessante osservare con il debugger l&#x27;evoluzione dei registri, osservando come si eseguono più operazioni con una sola istruzione.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="esercizi-per-casa">Esercizi per casa<a href="#esercizi-per-casa" class="hash-link" aria-label="Link diretto a Esercizi per casa" title="Link diretto a Esercizi per casa" translate="no">​</a></h2>
<p>Parte fondamentale delle esercitazioni è <em>fare pratica</em>.
Per questo, vengono lasciati alcuni esercizi per casa.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="esercizi-13-e-14">Esercizi 1.3 e 1.4<a href="#esercizi-13-e-14" class="hash-link" aria-label="Link diretto a Esercizi 1.3 e 1.4" title="Link diretto a Esercizi 1.3 e 1.4" translate="no">​</a></h3>
<p>Scrivere dei programmi che si comportano come gli esercizi 1.1 e 1.2, tranne che per il fatto di convertire da maiuscolo in minuscolo anziché il contrario.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="esercizio-15">Esercizio 1.5<a href="#esercizio-15" class="hash-link" aria-label="Link diretto a Esercizio 1.5" title="Link diretto a Esercizio 1.5" translate="no">​</a></h3>
<p>Scrivere un programma che, a partire dalla sezione <code>.data</code> che segue (e scaricabile <a href="/reti-logiche-esercitazioni/assets/files/conta_num-2cb3ada79f2f32f4c02c140e112f85f9.s" target="_blank">qui</a>), conta e stampa il numero di occorrenze di <code>numero</code> in <code>array</code>.</p>
<div class="language-assembler codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-assembler codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token directive keyword" style="color:#00009f">.include </span><span class="token literal-string string" style="color:#e3116c">&quot;./files/utility.s&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token directive keyword" style="color:#00009f">.data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token label function" style="color:#d73a49">array:</span><span class="token plain">      </span><span class="token directive keyword" style="color:#00009f">.word </span><span class="token plain">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 256</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 256</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 512</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 42</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 2048</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 1024</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token label function" style="color:#d73a49">array_len:</span><span class="token plain">  </span><span class="token directive keyword" style="color:#00009f">.long </span><span class="token plain">9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token label function" style="color:#d73a49">numero:</span><span class="token plain">     </span><span class="token directive keyword" style="color:#00009f">.word </span><span class="token plain">1</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="esercizio-16">Esercizio 1.6<a href="#esercizio-16" class="hash-link" aria-label="Link diretto a Esercizio 1.6" title="Link diretto a Esercizio 1.6" translate="no">​</a></h3>
<p>Quello che segue (e scaricabile <a href="/reti-logiche-esercitazioni/assets/files/conta_num_debug-1471f03f00cbbe2941427bb4d6dde83f.s" target="_blank">qui</a>) è un tentativo di soluzione dell&#x27;esercizio precedente.
Contiene tuttavia uno o più bug. Trovarli e correggerli.</p>
<div class="language-assembler codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-assembler codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm" style="counter-reset:line-count 0"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token directive keyword" style="color:#00009f">.include </span><span class="token literal-string string" style="color:#e3116c">&quot;./files/utility.s&quot;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token directive keyword" style="color:#00009f">.data</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">array:</span><span class="token plain">      </span><span class="token directive keyword" style="color:#00009f">.word </span><span class="token plain">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 256</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 256</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 512</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 42</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 2048</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 1024</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 0</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">array_len:</span><span class="token plain">  </span><span class="token directive keyword" style="color:#00009f">.long </span><span class="token plain">9</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">numero:</span><span class="token plain">     </span><span class="token directive keyword" style="color:#00009f">.word </span><span class="token plain">1</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token directive keyword" style="color:#00009f">.text</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">_main:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">nop</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token literal-decimal-number number" style="color:#36acaa">$0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%cl</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> numero</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ax</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token literal-decimal-number number" style="color:#36acaa">$0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%esi</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">comp:</span><span class="token plain"> </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cmp</span><span class="token plain"> array_len</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%esi</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">je</span><span class="token plain"> fine</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cmpw</span><span class="token plain"> array</span><span class="token punctuation" style="color:#393A34">(</span><span class="token register variable" style="color:#36acaa">%esi</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ax</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">jne</span><span class="token plain"> poi</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">inc</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%cl</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">poi:</span><span class="token plain">  </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">inc</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%esi</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">jmp</span><span class="token plain"> comp</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">fine:</span><span class="token plain"> </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%cl</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> outdecimal_byte</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">ret</span></span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="esercizio-17">Esercizio 1.7<a href="#esercizio-17" class="hash-link" aria-label="Link diretto a Esercizio 1.7" title="Link diretto a Esercizio 1.7" translate="no">​</a></h3>
<p>Scrivere un programma che svolge quanto segue.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># leggere 2 numeri interi in base 10, calcolarne il prodotto, e stampare il risultato.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># lettura:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># come primo carattere leggere il segno del numero, cioè un &#x27;+&#x27; o un &#x27;-&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># segue il modulo del numero, minore di 256</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># stampa:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># stampare prima il segno del numero (+ o -), poi il modulo in cifre decimali</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="esercizio-18">Esercizio 1.8<a href="#esercizio-18" class="hash-link" aria-label="Link diretto a Esercizio 1.8" title="Link diretto a Esercizio 1.8" translate="no">​</a></h3>
<p>Quello che segue (e scaricabile <a href="/reti-logiche-esercitazioni/assets/files/imul_debug-262a6a0cb20853ec0d684ab2b7bd8873.s" target="_blank">qui</a>) è un tentativo di soluzione dell&#x27;esercizio precedente.
Contiene tuttavia uno o più bug. Trovarli e correggerli.</p>
<div class="language-assembler codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-assembler codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm" style="counter-reset:line-count 0"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token directive keyword" style="color:#00009f">.include </span><span class="token literal-string string" style="color:#e3116c">&quot;./files/utility.s&quot;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">mess1:</span><span class="token plain">  </span><span class="token directive keyword" style="color:#00009f">.asciz </span><span class="token literal-string string" style="color:#e3116c">&quot;inserire il primo numero intero:\r&quot;</span><span class="token plain"> </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">mess2:</span><span class="token plain">  </span><span class="token directive keyword" style="color:#00009f">.asciz </span><span class="token literal-string string" style="color:#e3116c">&quot;inserire il secondo numero intero:\r&quot;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">mess3:</span><span class="token plain">  </span><span class="token directive keyword" style="color:#00009f">.asciz </span><span class="token literal-string string" style="color:#e3116c">&quot;il prodotto dei due numeri e&#x27;:\r&quot;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">a:</span><span class="token plain">      </span><span class="token directive keyword" style="color:#00009f">.word </span><span class="token plain">0</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">b:</span><span class="token plain">      </span><span class="token directive keyword" style="color:#00009f">.word </span><span class="token plain">0</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">_main:</span><span class="token plain">      </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">nop</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> mess1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> outline</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> in_intero</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ax</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> a</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> mess2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> outline</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> in_intero</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ax</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ax</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%bx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    imul </span><span class="token register variable" style="color:#36acaa">%bx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> mess3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> outline</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> out_intero</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">ret</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># legge un intero composto da segno e modulo minore di 256</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ne lascia la rappresentazione in complemento alla radice base 2 in ax</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">in_intero:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    push </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token literal-decimal-number number" style="color:#36acaa">$0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%bl</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">in_segno_loop:</span><span class="token plain">   </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> inchar</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cmp</span><span class="token plain"> </span><span class="token literal-character number" style="color:#36acaa">$&#x27;+&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">je</span><span class="token plain"> in_segno_poi</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cmp</span><span class="token plain"> </span><span class="token literal-character number" style="color:#36acaa">$&#x27;-&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">jne</span><span class="token plain"> in_segno_loop</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token literal-decimal-number number" style="color:#36acaa">$1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%bl</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">in_segno_poi:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> outchar</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> indecimal_word</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> newline</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cmp</span><span class="token plain"> </span><span class="token literal-decimal-number number" style="color:#36acaa">$1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%bl</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">jne</span><span class="token plain"> in_intero_fine</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    neg </span><span class="token register variable" style="color:#36acaa">%ax</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">in_intero_fine:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    pop </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">ret</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># legge la rappresentazione di un numero intero in complemento alla radice base 2 in eax</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># lo stampa come segno seguito dalle cifre decimali</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">out_intero:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    push </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%eax</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cmp</span><span class="token plain"> </span><span class="token literal-decimal-number number" style="color:#36acaa">$0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">ja</span><span class="token plain"> out_intero_pos</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">jmp</span><span class="token plain"> out_intero_neg</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">out_intero_pos:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token literal-character number" style="color:#36acaa">$&#x27;+&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> outchar</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">jmp</span><span class="token plain"> out_intero_poi</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">out_intero_neg:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token literal-character number" style="color:#36acaa">$&#x27;-&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> outchar</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    neg </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">jmp</span><span class="token plain"> out_intero_poi</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">out_intero_poi:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%eax</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> outdecimal_long</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    pop </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">ret</span></span><br></span></code></pre></div></div></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Pagina del documento"><a class="pagination-nav__link pagination-nav__link--prev" href="/reti-logiche-esercitazioni/2024-25/category/esercitazioni"><div class="pagination-nav__sublabel">Precedente</div><div class="pagination-nav__label">Esercitazioni</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/reti-logiche-esercitazioni/2024-25/esercitazioni/Assembler/Esercitazioni/Esercitazione 2"><div class="pagination-nav__sublabel">Successivo</div><div class="pagination-nav__label">Esercitazione 2</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#premesse-per-programmi-nellambiente-del-corso" class="table-of-contents__link toc-highlight">Premesse per programmi nell&#39;ambiente del corso</a></li><li><a href="#esercizio-11" class="table-of-contents__link toc-highlight">Esercizio 1.1</a></li><li><a href="#uso-del-debugger" class="table-of-contents__link toc-highlight">Uso del debugger</a></li><li><a href="#esercizio-12-istruzioni-stringa" class="table-of-contents__link toc-highlight">Esercizio 1.2: istruzioni stringa</a></li><li><a href="#esercizi-per-casa" class="table-of-contents__link toc-highlight">Esercizi per casa</a><ul><li><a href="#esercizi-13-e-14" class="table-of-contents__link toc-highlight">Esercizi 1.3 e 1.4</a></li><li><a href="#esercizio-15" class="table-of-contents__link toc-highlight">Esercizio 1.5</a></li><li><a href="#esercizio-16" class="table-of-contents__link toc-highlight">Esercizio 1.6</a></li><li><a href="#esercizio-17" class="table-of-contents__link toc-highlight">Esercizio 1.7</a></li><li><a href="#esercizio-18" class="table-of-contents__link toc-highlight">Esercizio 1.8</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Raffaele Zippo. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>