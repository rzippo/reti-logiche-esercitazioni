<!doctype html>
<html lang="it" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-2025-26 docs-doc-page docs-doc-id-esercitazioni/Assembler/Esercitazioni/Esercitazione 3" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.1">
<title data-rh="true">Esercitazione 3 | Esercitazioni di Reti Logiche</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://your-docusaurus-site.example.com/reti-logiche-esercitazioni/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://your-docusaurus-site.example.com/reti-logiche-esercitazioni/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://your-docusaurus-site.example.com/reti-logiche-esercitazioni/esercitazioni/Assembler/Esercitazioni/Esercitazione 3"><meta data-rh="true" property="og:locale" content="it"><meta data-rh="true" name="docusaurus_locale" content="it"><meta data-rh="true" name="docsearch:language" content="it"><meta data-rh="true" name="docusaurus_version" content="2025-26"><meta data-rh="true" name="docusaurus_tag" content="docs-default-2025-26"><meta data-rh="true" name="docsearch:version" content="2025-26"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-2025-26"><meta data-rh="true" property="og:title" content="Esercitazione 3 | Esercitazioni di Reti Logiche"><link data-rh="true" rel="icon" href="/reti-logiche-esercitazioni/img/favicon.png"><link data-rh="true" rel="canonical" href="https://your-docusaurus-site.example.com/reti-logiche-esercitazioni/esercitazioni/Assembler/Esercitazioni/Esercitazione 3"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/reti-logiche-esercitazioni/esercitazioni/Assembler/Esercitazioni/Esercitazione 3" hreflang="it"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/reti-logiche-esercitazioni/esercitazioni/Assembler/Esercitazioni/Esercitazione 3" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://X6QFHIGLL7-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Assembler","item":"https://your-docusaurus-site.example.com/reti-logiche-esercitazioni/category/assembler"},{"@type":"ListItem","position":2,"name":"Esercitazioni","item":"https://your-docusaurus-site.example.com/reti-logiche-esercitazioni/category/esercitazioni"},{"@type":"ListItem","position":3,"name":"Esercitazione 3","item":"https://your-docusaurus-site.example.com/reti-logiche-esercitazioni/esercitazioni/Assembler/Esercitazioni/Esercitazione 3"}]}</script><link rel="alternate" type="application/rss+xml" href="/reti-logiche-esercitazioni/blog/rss.xml" title="Esercitazioni di Reti Logiche RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/reti-logiche-esercitazioni/blog/atom.xml" title="Esercitazioni di Reti Logiche Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GHFPG7JFTZ"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-GHFPG7JFTZ",{anonymize_ip:!0})</script>



<link rel="search" type="application/opensearchdescription+xml" title="Esercitazioni di Reti Logiche" href="/reti-logiche-esercitazioni/opensearch.xml">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/reti-logiche-esercitazioni/assets/css/styles.e959b96b.css">
<script src="/reti-logiche-esercitazioni/assets/js/runtime~main.a254a641.js" defer="defer"></script>
<script src="/reti-logiche-esercitazioni/assets/js/main.99f67563.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Passa al contenuto principale"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Passa al contenuto principale</a></div><nav aria-label="Principale" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Attiva/disattiva la barra di navigazione" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/reti-logiche-esercitazioni/"><div class="navbar__logo"><img src="/reti-logiche-esercitazioni/img/logo.png" alt="Reti Logiche" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/reti-logiche-esercitazioni/img/logo.png" alt="Reti Logiche" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Esercitazioni di Reti Logiche</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/reti-logiche-esercitazioni/">Esercitazioni</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/reti-logiche-esercitazioni/esercitazioni/Assembler/Esercitazioni/Esercitazione 3">2025-26</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/reti-logiche-esercitazioni/esercitazioni/Assembler/Esercitazioni/Esercitazione 3">2025-26</a></li><li><a class="dropdown__link" href="/reti-logiche-esercitazioni/2024-25/esercitazioni/Assembler/Esercitazioni/Esercitazione 3">2024-25</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Passa dalla modalità scura a quella chiara (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Cerca (Meta+k)" aria-keyshortcuts="Meta+k"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 24 24" aria-hidden="true"><circle cx="11" cy="11" r="8" stroke="currentColor" fill="none" stroke-width="1.4"></circle><path d="m21 21-4.3-4.3" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Cerca</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Torna indietro all&#x27;inizio" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Barra laterale dei documenti" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/reti-logiche-esercitazioni/"><span title="Esercitazioni di Reti Logiche" class="linkLabel_WmDU">Esercitazioni di Reti Logiche</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/reti-logiche-esercitazioni/esercitazioni/Introduzione"><span title="Introduzione" class="linkLabel_WmDU">Introduzione</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/reti-logiche-esercitazioni/esercitazioni/Ambienti"><span title="Ambienti di sviluppo" class="linkLabel_WmDU">Ambienti di sviluppo</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/reti-logiche-esercitazioni/category/assembler"><span title="Assembler" class="categoryLinkLabel_W154">Assembler</span></a><button aria-label="Collapse sidebar category &#x27;Assembler&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reti-logiche-esercitazioni/esercitazioni/Assembler/Introduzione"><span title="Introduzione" class="linkLabel_WmDU">Introduzione</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reti-logiche-esercitazioni/esercitazioni/Assembler/Ambiente"><span title="Ambiente" class="linkLabel_WmDU">Ambiente</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex="0" href="/reti-logiche-esercitazioni/category/esercitazioni"><span title="Esercitazioni" class="categoryLinkLabel_W154">Esercitazioni</span></a><button aria-label="Collapse sidebar category &#x27;Esercitazioni&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/reti-logiche-esercitazioni/esercitazioni/Assembler/Esercitazioni/Esercitazione 1"><span title="Esercitazione 1" class="linkLabel_WmDU">Esercitazione 1</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/reti-logiche-esercitazioni/esercitazioni/Assembler/Esercitazioni/Esercitazione 2"><span title="Esercitazione 2" class="linkLabel_WmDU">Esercitazione 2</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/reti-logiche-esercitazioni/esercitazioni/Assembler/Esercitazioni/Esercitazione 3"><span title="Esercitazione 3" class="linkLabel_WmDU">Esercitazione 3</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/reti-logiche-esercitazioni/category/documentazione"><span title="Documentazione" class="categoryLinkLabel_W154">Documentazione</span></a><button aria-label="Expand sidebar category &#x27;Documentazione&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reti-logiche-esercitazioni/esercitazioni/Assembler/Problemi comuni"><span title="Problemi comuni" class="linkLabel_WmDU">Problemi comuni</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/reti-logiche-esercitazioni/category/verilog"><span title="Verilog" class="categoryLinkLabel_W154">Verilog</span></a><button aria-label="Expand sidebar category &#x27;Verilog&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/reti-logiche-esercitazioni/esercitazioni/VS-Code"><span title="Uso di VS Code" class="linkLabel_WmDU">Uso di VS Code</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/reti-logiche-esercitazioni/esercitazioni/Versioni PDF"><span title="Versioni PDF" class="linkLabel_WmDU">Versioni PDF</span></a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Briciole di pane"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Pagina principale" class="breadcrumbs__link" href="/reti-logiche-esercitazioni/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/reti-logiche-esercitazioni/category/assembler"><span>Assembler</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/reti-logiche-esercitazioni/category/esercitazioni"><span>Esercitazioni</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Esercitazione 3</span></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Versione: 2025-26</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">Su questa pagina</button></div><div class="theme-doc-markdown markdown"><header><h1>Esercitazione 3</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="soluzioni-passo-passo-esercizi-per-casa">Soluzioni passo-passo esercizi per casa<a href="#soluzioni-passo-passo-esercizi-per-casa" class="hash-link" aria-label="Link diretto a Soluzioni passo-passo esercizi per casa" title="Link diretto a Soluzioni passo-passo esercizi per casa" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="esercizio-12-istruzioni-stringa-soluzione-passo-passo">Esercizio 1.2: istruzioni stringa, soluzione passo-passo<a href="#esercizio-12-istruzioni-stringa-soluzione-passo-passo" class="hash-link" aria-label="Link diretto a Esercizio 1.2: istruzioni stringa, soluzione passo-passo" title="Link diretto a Esercizio 1.2: istruzioni stringa, soluzione passo-passo" translate="no">​</a></h3>
<p>Ricordiamo la traccia dell&#x27;esercizio:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1. Leggere messaggio da terminale.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. Convertire le lettere minuscole in maiuscolo, usando le istruzioni stringa.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3. Stampare messaggio modificato.</span><br></span></code></pre></div></div>
<p>Le istruzioni stringa sono un esempio di set di istruzioni specializzate, cioè istruzioni che non sono pensate per implementare algoritmi generici, ma sono invece pensate per fornire supporto hardware efficiente a uno specifico set di operazioni che alcuni algoritmi necessitano.
Infatti, ci si può aspettare che tra due programmi equivalenti, uno scritto con sole istruzioni generali e l&#x27;altro scritto con istruzioni specializzate, il secondo sarà molto più performante del primo.
Altri esempi comuni sono le istruzioni a supporto di crittografia, encoding e decoding di stream multimediali, e, più recentemente, neural networks.</p>
<p>Questi set di istruzioni sono però più &quot;rigidi&quot; delle istruzioni a uso generale.
Ci impongono infatti dei modi specifici di organizzare dati e codice, perché questi devono essere compatibili con il modo in cui l&#x27;algoritmo eseguito da un&#x27;istruzione è implementato in hardware.</p>
<p>Nell&#x27;esercizio 1.1 abbiamo considerato due modi di scorrere i due array.
Nel primo, che è quello che abbiamo scelto, si carica l&#x27;indirizzo di inizio del vettore, e si usa un altro registro come indice, usando l&#x27;indirizzazione con indice.
Nel secondo, si usa un registro come puntatore alla cella corrente, inizializzato all&#x27;indirizzo di inizio del vettore e poi incrementato (della quantità giusta) per passare all&#x27;elemento successivo.
In entrambi i casi, siamo liberi di usare i registri che vogliamo, per esempio non abbiamo nessun problema se scriviamo il programma di prima come segue:</p>
<div class="language-assembler codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-assembler codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> msg_in</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%eax</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> msg_out</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token literal-decimal-number number" style="color:#36acaa">$0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%edx</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token label function" style="color:#d73a49">loop:</span><span class="token plain">   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">movb</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token register variable" style="color:#36acaa">%eax</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%edx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%cl</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span></code></pre></div></div>
<p>Infatti, usare <code>esi</code> ed <code>edi</code> come registri puntatori, ed <code>ecx</code> come registro di indice, è del tutto opzionale.</p>
<p>Tutto questo cambia quando si vogliono usare istruzioni specializzate come le istruzioni stringa.
Queste ci impongono di usare <code>esi</code> come puntatore al vettore sorgente, <code>edi</code> come puntatore al vettore destinatario, <code>eax</code> come registro dove scrivere o da cui leggere il valore da trasferire, <code>ecx</code> come contatore delle ripetizioni da eseguire, etc.
Una volta scelte le istruzioni da usare, dobbiamo quindi assicurarci di seguire quanto imposto dall&#x27;istruzione.</p>
<p>Per questo esercizio siamo interessati alla <code>lods</code>, che legge un valore dal vettore e ne sposta il puntatore allo step successivo, e la <code>stos</code>, che scrive un valore nel vettore.
Partiamo dal riscrivere il <code>punto_2</code> dell&#x27;esercizio 1.1 in modo da rendere l&#x27;algoritmo compatibile.</p>
<div class="language-assembler codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-assembler codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token label function" style="color:#d73a49">punto_2:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> msg_in</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%esi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> msg_out</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%edi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token label function" style="color:#d73a49">loop:</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">movb</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token register variable" style="color:#36acaa">%esi</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">inc</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%esi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cmp</span><span class="token plain"> </span><span class="token literal-character number" style="color:#36acaa">$&#x27;a&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">jb</span><span class="token plain"> post_check</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cmp</span><span class="token plain"> </span><span class="token literal-character number" style="color:#36acaa">$&#x27;z&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">ja</span><span class="token plain"> post_check</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">and</span><span class="token plain"> </span><span class="token literal-hex-number number" style="color:#36acaa">$0xdf</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token label function" style="color:#d73a49">post_check:</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">movb</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token register variable" style="color:#36acaa">%edi</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">inc</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%edi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cmp</span><span class="token plain"> </span><span class="token literal-hex-number number" style="color:#36acaa">$0x0d</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">jne</span><span class="token plain"> loop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre></div></div>
<p>Abbiamo dunque rimosso l&#x27;uso di <code>ecx</code> come indice, e usiamo <code>esi</code> ed <code>edi</code> come puntatori.
Il fatto di usare la <code>inc</code> è legato alla dimensione dei dati, cioè 1 byte.
Dovremmo invece scrivere <code>add $2, %esi</code> o <code>add $4, %esi</code> per dati su 2 o 4 byte.
Altra nota è che <em>incrementiamo</em> i puntatori, anziché decrementarli, perché stiamo eseguendo l&#x27;operazione da sinistra verso destra.</p>
<p>Siamo pronti adesso a sostituire le istruzioni evidenziate con delle istruzioni stringa.
Il sorgente finale è scaricabile <a href="/reti-logiche-esercitazioni/2025-26/code/assembler/1/maiusc-str.s" target="_blank" rel="noopener noreferrer">qui</a>.</p>
<div class="language-assembler codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-assembler codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token label function" style="color:#d73a49">punto_2:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> msg_in</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%esi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> msg_out</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%edi</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cld</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token label function" style="color:#d73a49">loop:</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">lodsb</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cmp</span><span class="token plain"> </span><span class="token literal-character number" style="color:#36acaa">$&#x27;a&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">jb</span><span class="token plain"> post_check</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cmp</span><span class="token plain"> </span><span class="token literal-character number" style="color:#36acaa">$&#x27;z&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">ja</span><span class="token plain"> post_check</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">and</span><span class="token plain"> </span><span class="token literal-hex-number number" style="color:#36acaa">$0xdf</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token label function" style="color:#d73a49">post_check:</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">stosb</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cmp</span><span class="token plain"> </span><span class="token literal-hex-number number" style="color:#36acaa">$0x0d</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">jne</span><span class="token plain"> loop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre></div></div>
<p>L&#x27;istruzione <code>cld</code> serve a impostare a 0 il flag di direzione, che serve a indicare alle istruzioni stringa se andare da sinistra verso destra o il contrario.
Dato che tutti i registri sono impliciti, dobbiamo sempre specificare la dimensione delle istruzioni, in questo caso <code>b</code>.</p>
<p>Come esercizio, può essere interessante osservare con il debugger l&#x27;evoluzione dei registri, osservando come si eseguono più operazioni con una sola istruzione.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="esercizio-16-esercizio-di-debugging-soluzione-passo-passo">Esercizio 1.6: esercizio di debugging, soluzione passo-passo<a href="#esercizio-16-esercizio-di-debugging-soluzione-passo-passo" class="hash-link" aria-label="Link diretto a Esercizio 1.6: esercizio di debugging, soluzione passo-passo" title="Link diretto a Esercizio 1.6: esercizio di debugging, soluzione passo-passo" translate="no">​</a></h3>
<p>Ricordiamo la traccia dell&#x27;esercizio:</p>
<blockquote>
<p>Scrivere un programma che, a partire dalla sezione <code>.data</code> che segue (e scaricabile <a href="/reti-logiche-esercitazioni/2025-26/code/assembler/1/per-casa/conta_num.s" target="_blank" rel="noopener noreferrer">qui</a>), conta e stampa il numero di occorrenze di <code>numero</code> in <code>array</code>.</p>
<div class="language-assembler codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-assembler codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token directive keyword" style="color:#00009f">.include </span><span class="token literal-string string" style="color:#e3116c">&quot;./files/utility.s&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token directive keyword" style="color:#00009f">.data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token label function" style="color:#d73a49">array:</span><span class="token plain">      </span><span class="token directive keyword" style="color:#00009f">.word </span><span class="token plain">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 256</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 256</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 512</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 42</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 2048</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 1024</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token label function" style="color:#d73a49">array_len:</span><span class="token plain">  </span><span class="token directive keyword" style="color:#00009f">.long </span><span class="token plain">9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token label function" style="color:#d73a49">numero:</span><span class="token plain">     </span><span class="token directive keyword" style="color:#00009f">.word </span><span class="token plain">1</span><br></span></code></pre></div></div>
</blockquote>
<p>Questa è invece la soluzione proposta dall&#x27;esercizio:</p>
<div class="language-assembler codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-assembler codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm" style="counter-reset:line-count 0"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token directive keyword" style="color:#00009f">.include </span><span class="token literal-string string" style="color:#e3116c">&quot;./files/utility.s&quot;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token directive keyword" style="color:#00009f">.data</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">array:</span><span class="token plain">      </span><span class="token directive keyword" style="color:#00009f">.word </span><span class="token plain">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 256</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 256</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 512</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 42</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 2048</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 1024</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 0</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">array_len:</span><span class="token plain">  </span><span class="token directive keyword" style="color:#00009f">.long </span><span class="token plain">9</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">numero:</span><span class="token plain">     </span><span class="token directive keyword" style="color:#00009f">.word </span><span class="token plain">1</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token directive keyword" style="color:#00009f">.text</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">_main:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">nop</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token literal-decimal-number number" style="color:#36acaa">$0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%cl</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> numero</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ax</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token literal-decimal-number number" style="color:#36acaa">$0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%esi</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">comp:</span><span class="token plain"> </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cmp</span><span class="token plain"> array_len</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%esi</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">je</span><span class="token plain"> fine</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cmpw</span><span class="token plain"> array</span><span class="token punctuation" style="color:#393A34">(</span><span class="token register variable" style="color:#36acaa">%esi</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ax</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">jne</span><span class="token plain"> poi</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">inc</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%cl</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">poi:</span><span class="token plain">  </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">inc</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%esi</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">jmp</span><span class="token plain"> comp</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">fine:</span><span class="token plain"> </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%cl</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> outdecimal_byte</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">ret</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span></code></pre></div></div>
<p>Come prima cosa, cerchiamo di capire, a grandi linee, cosa cerca di fare questo programma.</p>
<p>Notiamo l&#x27;uso di <code>%cl</code>: dall&#x27;inizializzazione a riga 12, l&#x27;incremento condizionato a righe 19-21, e la stampa a righe 28-29, si evince che <code>%cl</code> è usato come contatore dei successi, ossia di quante volte è stato trovato <code>numero</code> in <code>array</code>.
Notiamo che <code>%ax</code> viene inizializzato con <code>numero</code> e, prima della stampa, mai aggiornato.
Infine, <code>%esi</code> viene inizializzato a 0 e incrementato a fine di ogni ciclo, confrontandolo con <code>array_len</code> per determinare quando uscire dal loop.
Infine, a riga 19 notiamo il confronto tra un valore di <code>array</code>, indicizzato con <code>%esi</code>, e <code>%ax</code>, che contiene <code>numero</code>.</p>
<p>Si ricostruisce quindi questa logica: scorro valore per valore <code>array</code>, indicizzandolo con <code>%esi</code>, e lo confronto con <code>numero</code>, che è appoggiato su <code>%ax</code> (perché il confronto tra due valori in memoria non è possibile con <code>cmp</code>). Utilizzo <code>%cl</code> come contatore dei successi, e alla fine dello scorrimento ne stampo il valore.</p>
<p>Fin qui nessuna sorpresa, il programma sembra seguire lo schema che si seguirebbe con un normale programma in C:</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> cl </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">for</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> esi </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> esi </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> array_len</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> esi</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">array</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">esi</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> numero</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cl</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>Proviamo ad eseguire il programma: ci si aspetta che stampi 2. Invece, stampa 3.
Dobbiamo passare al debugger.</p>
<p>Quello che ci conviene guardare è quello che succede ad ogni loop, in particolare alla riga 19, dove la <code>cmpw</code> confronta un valore di <code>array</code> con <code>%ax</code>, che contiene <code>numero</code>.
Però, la <code>cmpw</code> utilizza un indirizzamento complesso che, come descritto nella <a href="/reti-logiche-esercitazioni/esercitazioni/Assembler/Documentazione/Debugger gdb#ispezione-della-memoria">documentazione</a>, richiede una sintassi più complicata nel debugger.
Cambio quindi quella istruzione in una serie equivalente che sia più facile da osservare col debugger.</p>
<div class="language-assembler codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-assembler codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm" style="counter-reset:line-count 0"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token directive keyword" style="color:#00009f">.include </span><span class="token literal-string string" style="color:#e3116c">&quot;./files/utility.s&quot;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token directive keyword" style="color:#00009f">.data</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">array:</span><span class="token plain">      </span><span class="token directive keyword" style="color:#00009f">.word </span><span class="token plain">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 256</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 256</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 512</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 42</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 2048</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 1024</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 0</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">array_len:</span><span class="token plain">  </span><span class="token directive keyword" style="color:#00009f">.long </span><span class="token plain">9</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">numero:</span><span class="token plain">     </span><span class="token directive keyword" style="color:#00009f">.word </span><span class="token plain">1</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token directive keyword" style="color:#00009f">.text</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">_main:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">nop</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token literal-decimal-number number" style="color:#36acaa">$0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%cl</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> numero</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ax</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token literal-decimal-number number" style="color:#36acaa">$0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%esi</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">comp:</span><span class="token plain"> </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cmp</span><span class="token plain"> array_len</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%esi</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">je</span><span class="token plain"> fine</span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">movw</span><span class="token plain"> array</span><span class="token punctuation" style="color:#393A34">(</span><span class="token register variable" style="color:#36acaa">%esi</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%bx</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cmpw</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%bx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ax</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">jne</span><span class="token plain"> poi</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">inc</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%cl</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">poi:</span><span class="token plain">  </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">inc</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%esi</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">jmp</span><span class="token plain"> comp</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">fine:</span><span class="token plain"> </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%cl</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> outdecimal_byte</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">ret</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span></code></pre></div></div>
<p>Assemblo, avvio il debugger, e setto un breakpoint alla riga 20 con <code>break 20</code>.
Lascio girare il programma con <code>continue</code>, che quasi immediatamente raggiunge la riga 20 e si ferma.
Ricordiamo che il debugger si ferma <em>prima</em> di eseguire una istruzione.</p>
<p>Vediamo lo stato dei registri, con <code>i r ax bx cl esi</code> (mostra solo quelli che ci interessano).</p>
<div class="language-gdb codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-gdb codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token gdb-line function" style="color:#d73a49">(gdb) i r ax bx cl esi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ax             0x1                 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bx             0x1                 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cl             0x0                 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">esi            0x0                 0</span><br></span></code></pre></div></div>
<p>Fin qui, tutto come ci si aspetta: <code>%ax</code> che contiene <code>numero</code>, <code>%bx</code> contiene il numero alla prima cella di <code>array</code>, i due contatori <code>%cl</code> e <code>%esi</code> sono a 0.
Facciamo <code>step</code> per vedere l&#x27;esito del confronto: dopo la riga 21 l&#x27;esecuzione giunge alla riga 22, indicando che il salto non è stato fatto perché la <code>jne</code> è stata eseguita dopo un confronto tra valori uguali.</p>
<p>Continuiamo con <code>step</code> controllando che il comportamento sia quello atteso, fino a giungere di nuovo alla riga 20.</p>
<div class="language-gdb codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-gdb codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token gdb-line function" style="color:#d73a49">(gdb) i r ax bx cl esi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ax             0x1                 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bx             0x0                 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cl             0x1                 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">esi            0x1                 1</span><br></span></code></pre></div></div>
<p>Qui abbiamo la prima sorpresa. In <code>%bx</code> troviamo 0, ma il secondo valore di <code>array</code> è 256.
Se continuiamo, vediamo che 256 compare come terzo valore, poi 1 come quarto, poi 256 come quinto.
Abbiamo quindi dei valori aggiuntivi che compaiono durante lo scorrimento del vettore ma che non sono presenti nell&#x27;allocazione a riga 4.
Continuando ancora, vediamo che i 9 valori coperti dal programma non sono affatto tutti e 9 quelli a riga 4, e che effettivamente il valore 1 compare 3 volte.</p>
<p>Con questo, abbiamo intanto confinato il problema: la logica di confronto e conteggio funziona, il problema è nella <em>lettura</em> di valori da <code>array</code>.</p>
<p>Per capire cosa sta succedendo, dobbiamo ricordare come si comporta l&#x27;allocazione in memoria di valori su più byte: abbiamo infatti a che fare con <em>word</em>, composte da 2 byte ciascuna, e ciascun indirizzo in memoria corrisponde a una locazione di un solo byte.</p>
<p>L&#x27;architettura x86 è <em>little-endian</em>, che significa <strong>little end first</strong>, <a href="https://en.wikipedia.org/wiki/Endianness" target="_blank" rel="noopener noreferrer">un riferimento a I viaggi di Gulliver</a>.
Questo si traduce nel fatto che quando un valore di <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">n</span></span></span></span> byte viene salvato in memoria <em>a partire</em> dall&#x27;indirizzo <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">a</span></span></span></span>, il byte meno significativo del valore viene salvato in <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">a</span></span></span></span>, il secondo meno significativo in <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">a+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">1</span></span></span></span>, e così via fino al più significativo in <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>+</mo><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">a+(n-1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span>.</p>
<p>Possiamo quindi immaginare così il nostro <code>array</code> in memoria.</p>
<figure><img src="/reti-logiche-esercitazioni/2025-26/img/assembler/esercitazioni/3/layout-1.drawio.png" style="max-width:min(100%, 30rem)" alt="
Lo schema mostra come i primi 3 valori (le word 0x0001 = 1, 0x0100 = 256 e 0x0100 = 256) sono scritti in memoria in 6 byte consecutivi:
0x01, 0x00, 0x00, 0x01, 0x00, 0x01.
Gli indirizzi di questi byte sono consecutivi: la prima coppia comincia ad &#x27;array&#x27;, la seconda ad &#x27;array+2&#x27;, la terza ad &#x27;array+4&#x27;.
" title="
Come le 3 word sono scritti in memoria in 6 byte consecutivi.
Gli indirizzi di questi byte sono consecutivi: la prima coppia comincia ad &#x27;array&#x27;, la seconda ad &#x27;array+2&#x27;, la terza ad &#x27;array+4&#x27;.
"><figcaption><p>Layout di <code>array</code> in memoria.</p></figcaption></figure>
<p>La lettura di una <em>word</em> dalla memoria funziona quindi così: dato l&#x27;indirizzo <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">a</span></span></span></span>, vengono letti i due byte agli indirizzi <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">a</span></span></span></span> e <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">a+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">1</span></span></span></span> e contatenati nell&#x27;ordine <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>a</mi><mo>+</mo><mn>1</mn><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(a+1, a)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">a</span><span class="mclose">)</span></span></span></span>.
Una istruzione come <code>movw a, %bx</code>, quindi, salverà il contenuto di <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">a+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">1</span></span></span></span> in <code>%bh</code> e il contenuto di <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">a</span></span></span></span> in <code>%bl</code>.</p>
<p>Per la lettura di più <em>word</em> consecutive, dobbiamo assicurarci di incrementare l&#x27;indirizzo di 2 alla volta: come mostrato in figura, il secondo valore è memorizzato a partire da <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mi>r</mi><mi>r</mi><mi>a</mi><mi>y</mi><mo>+</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">array+2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.1944em"></span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.02778em">rr</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">2</span></span></span></span>, il terzo da <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mi>r</mi><mi>r</mi><mi>a</mi><mi>y</mi><mo>+</mo><mn>4</mn></mrow><annotation encoding="application/x-tex">array+4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.1944em"></span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.02778em">rr</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">4</span></span></span></span>, e così via.</p>
<p>Tornando però al codice dell&#x27;esercizio, questo non succede:</p>
<div class="language-assembler codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-assembler codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token label function" style="color:#d73a49">comp:</span><span class="token plain"> </span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cmp</span><span class="token plain"> array_len</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%esi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">je</span><span class="token plain"> fine</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">movw</span><span class="token plain"> array</span><span class="token punctuation" style="color:#393A34">(</span><span class="token register variable" style="color:#36acaa">%esi</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%bx</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cmpw</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%bx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ax</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">jne</span><span class="token plain"> poi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">inc</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%cl</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token label function" style="color:#d73a49">poi:</span><span class="token plain">  </span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">inc</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%esi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">jmp</span><span class="token plain"> comp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<p>Ecco quindi spiegato cosa legge il programma dalla memoria:
quando alla seconda iterazione si esegue <code>movb array(%esi), %bx</code>, con <code>%esi</code> che vale 1, si sta leggendo un valore composto dal byte meno significativo del secondo valore concatenato con il byte più significativo del primo.
Questo valore è del tutto estraneo e privo di senso se confrontato con <code>array</code> così come è stato dichiarato e allocato, ma nell&#x27;eseguire le istruzioni il processore non sa e non controlla niente di tutto ciò.</p>
<figure><img src="/reti-logiche-esercitazioni/2025-26/img/assembler/esercitazioni/3/layout-2.drawio.png" style="max-width:min(100%, 30rem)" alt="
Stesso schema di prima, con delle letture errate evidenziate. 
Leggendo due byte a partire da &#x27;array+1&#x27; troviamo {0x00, 0x00} = 0x0000 = 0; a partire da &#x27;array+3&#x27; troviamo {0x01, 0x00} = 0x0001 = 1.
Entrambi i valori non fanno parte dell&#x27;array dichiarato.
" title="
Stesso schema di prima, con delle letture errate evidenziate. 
Leggendo due byte a partire da &#x27;array+1&#x27; troviamo {0x00, 0x00} = 0x0000 = 0; a partire da &#x27;array+3&#x27; troviamo {0x01, 0x00} = 0x0001 = 1.
Entrambi i valori non fanno parte dell&#x27;array dichiarato.
"><figcaption><p>Lettura erronea di <code>array</code>: sbagliando l&#x27;incremento dell&#x27;indirizzo, leggiamo dei byte senza alcuna relazione fra loro dalla memoria e li interpretiamo come parti di una word.</p></figcaption></figure>
<p>Abbiamo due strade per correggere questo errore.
Il primo approccio è quello di incrementare <code>%esi</code> di 2 alla volta, così che l&#x27;indirizzamento <code>array(%esi)</code> risulti corretto.
Con questo schema però <code>%esi</code> dovrà assumere i valori <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mo>…</mo><mn>16</mn></mrow><annotation encoding="application/x-tex">0, 2, \dots 16</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord">16</span></span></span></span>, cosa che lo rende non più un contatore confrontabile direttamente con <code>array_len</code> come fatto a riga 17.
Si dovrà gestire tale confronto in altro modo, per esempio usando un registro separato come contatore.</p>
<p>La seconda strada è quella di usare il fattore di <em>scala</em> dell&#x27;indirizzamento, che è pensato proprio per essere utilizzato in casi come questo.
Infatti, <code>array(, %esi, 2)</code> calcolerà l&#x27;indirizzo <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mi>r</mi><mi>r</mi><mi>a</mi><mi>y</mi><mo>+</mo><mn>2</mn><mo>∗</mo><mi>e</mi><mi>s</mi><mi>i</mi></mrow><annotation encoding="application/x-tex">array + 2 * esi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.1944em"></span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.02778em">rr</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">  ∗</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6595em"></span><span class="mord mathnormal">es</span><span class="mord mathnormal">i</span></span></span></span>.
Da notare la virgola subito dopo la parentesi, che sta a indicare che il registro <em>base</em> è stato omesso, mentre <code>%esi</code> è <em>indice</em>.</p>
<p>Per concludere, torniamo sul codice C che abbiamo visto prima come modello di questo programma: come viene gestito lì questo problema?
In quel codice C non vi è alcun errore perché <code>array[esi]</code>, sfruttando la tipizzazione e l&#x27;aritmetica dei puntatori, applica sempre i fattori di scala corretti.
Infatti, mentre il processore che esegue istruzioni assembler non ha idea del significato di tali istruzioni, linguaggi di livello più alto introducono concetti come i tipi proprio per permettere di esprimere questi significati e occuparsene a tempo di compilazione per produrre assembler corretto.</p>
<p>Il codice finale, scaricabile <a href="/reti-logiche-esercitazioni/2025-26/code/assembler/2/conta_num_debug_sol.s" target="_blank" rel="noopener noreferrer">qui</a>, è il seguente:</p>
<div class="language-assembler codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-assembler codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm" style="counter-reset:line-count 0"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token directive keyword" style="color:#00009f">.include </span><span class="token literal-string string" style="color:#e3116c">&quot;./files/utility.s&quot;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token directive keyword" style="color:#00009f">.data</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">array:</span><span class="token plain">      </span><span class="token directive keyword" style="color:#00009f">.word </span><span class="token plain">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 256</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 256</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 512</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 42</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 2048</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 1024</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 0</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">array_len:</span><span class="token plain">  </span><span class="token directive keyword" style="color:#00009f">.long </span><span class="token plain">9</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">numero:</span><span class="token plain">     </span><span class="token directive keyword" style="color:#00009f">.word </span><span class="token plain">1</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token directive keyword" style="color:#00009f">.text</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">_main:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">nop</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token literal-decimal-number number" style="color:#36acaa">$0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%cl</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> numero</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ax</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token literal-decimal-number number" style="color:#36acaa">$0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%esi</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">comp:</span><span class="token plain"> </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cmp</span><span class="token plain"> array_len</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%esi</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">je</span><span class="token plain"> fine</span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cmpw</span><span class="token plain"> array</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%esi</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ax</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">jne</span><span class="token plain"> poi</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">inc</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%cl</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">poi:</span><span class="token plain">  </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">inc</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%esi</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">jmp</span><span class="token plain"> comp</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">fine:</span><span class="token plain"> </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%cl</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> outdecimal_byte</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">ret</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="esercizio-31-esercizio-desame-2021-01-08">Esercizio 3.1: esercizio d&#x27;esame 2021-01-08<a href="#esercizio-31-esercizio-desame-2021-01-08" class="hash-link" aria-label="Link diretto a Esercizio 3.1: esercizio d&#x27;esame 2021-01-08" title="Link diretto a Esercizio 3.1: esercizio d&#x27;esame 2021-01-08" translate="no">​</a></h2>
<p>Il testo con soluzione si trova <a href="/reti-logiche-esercitazioni/2025-26/code/assembler/3/2021-01-08_1.zip" target="_blank" rel="noopener noreferrer">qui</a>.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Provare da sé</div><div class="admonitionContent_BuS1"><p>Provare a svolgere da sé l&#x27;esercizio, prima di guardare la soluzione o andare oltre per la discussione.</p></div></div>
<p>Questo esercizio pone principalmente tre spunti.</p>
<p>Il primo è la gestione dell&#x27;input, da eseguire con un loop di <code>inchar</code> e controlli, facendo <code>outchar</code> solo quando il carattere è accettato.
Questo è stato già visto, per esempio, nell&#x27;esercizio 2.1.</p>
<p>Il secondo spunto riguarda il <em>dimensionamento</em> dei dati da gestire.
Infatti, dobbiamo scegliere se usare 8, 16 o 32 bit, e possiamo farlo solo cercando di capire su quanti bit sta il numero più grande che possiamo gestire.</p>
<p>Data la natura del problema, è facile intuire che questo si trova quando <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>=</mo><mn>9</mn></mrow><annotation encoding="application/x-tex">N = 9</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.10903em">N</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">9</span></span></span></span> e <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>=</mo><mn>9</mn></mrow><annotation encoding="application/x-tex">k = 9</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal" style="margin-right:0.03148em">k</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">9</span></span></span></span>.
Dovremmo stampare un triangolo 9 righe, ciascuna composta da 1 a 9 numeri, a partire da 1 e di passo 9.
Da una parte, potremmo ricordarci questa è una sequenza nota: la somma di <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>+</mo><mn>2</mn><mo>+</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo>+</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">1 + 2 + ... + n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em"></span><span class="mord">...</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">n</span></span></span></span> è <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi>n</mi><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{n(n+1)}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.355em;vertical-align:-0.345em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.485em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">n</span><span class="mbin mtight">+</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>, quindi abbiamo  <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>9</mn><mo>⋅</mo><mn>10</mn><mi mathvariant="normal">/</mi><mn>2</mn><mo>=</mo><mn>45</mn></mrow><annotation encoding="application/x-tex">9 \cdot 10/2 = 45</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">9</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord">10/2</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">45</span></span></span></span> elementi.
Tuttavia, un approccio più semplice porta a un risultato simile: di sicuro il triangolo avrà meno elementi di un quadrato di lato 9, composto da <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>9</mn><mo>⋅</mo><mn>9</mn><mo>=</mo><mn>81</mn></mrow><annotation encoding="application/x-tex">9 \cdot 9 = 81</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">9</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">9</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">81</span></span></span></span> elementi e, dato che la diagonale è inclusa, avrà più della metà di questo, cioè <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>81</mn><mi mathvariant="normal">/</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">81 / 2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord">81/2</span></span></span></span>.
Possiamo quindi dire con questo ragionamento che sono più di <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>41</mn></mrow><annotation encoding="application/x-tex">41</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">41</span></span></span></span> elementi e meno di <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>81</mn></mrow><annotation encoding="application/x-tex">81</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">81</span></span></span></span>, mentre usando la formula esatta troviamo che sono <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>45</mn></mrow><annotation encoding="application/x-tex">45</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">45</span></span></span></span>.</p>
<p>Dato che incrementiamo di passo 9 ogni volta, il numero di posizione <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em"></span><span class="mord mathnormal" style="margin-right:0.05724em">j</span></span></span></span> sarà <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>j</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo>⋅</mo><mn>9</mn><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">(j-1) \cdot 9 + 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05724em">j</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em"></span><span class="mord">9</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">1</span></span></span></span>.
Considerando per la stima di prima il 41-esimo elemento, abbiamo <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>40</mn><mo>⋅</mo><mn>9</mn><mo>+</mo><mn>1</mn><mo>=</mo><mn>361</mn></mrow><annotation encoding="application/x-tex">40 \cdot 9 + 1 = 361</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">40</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em"></span><span class="mord">9</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">361</span></span></span></span>, mentre l&#x27;81-esimo elemento (che non sarà mai presente) sarebbe <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>80</mn><mo>⋅</mo><mn>9</mn><mo>+</mo><mn>1</mn><mo>=</mo><mn>721</mn></mrow><annotation encoding="application/x-tex">80 \cdot 9 + 1 = 721</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">80</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em"></span><span class="mord">9</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">721</span></span></span></span>.
Il valore esatto, se ci ricordiamo la formula di cui sopra, è invece <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>44</mn><mo>⋅</mo><mn>9</mn><mo>+</mo><mn>1</mn><mo>=</mo><mn>397</mn></mrow><annotation encoding="application/x-tex">44 \cdot 9 + 1 = 397</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">44</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em"></span><span class="mord">9</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">397</span></span></span></span>.
Un tale numero deve essere rappresentato su più di 8 bit, ma sta senza problemi in 16 bit: svolgeremo quindi i nostri calcoli usando delle <em>word</em> di 16 bit.</p>
<p>Non resta quindi che fare la stampa del triangolo.
Questo si può scrivere come un doppio loop, dove il loop interno usa il contatore esterno per determinare quando uscire stampando una nuova riga, mentre un registro contatore viene utilizzato durante ogni ciclo per calcolare il nuovo numero da stampare.
In (pseudo) C, tale ciclo avrebbe una forma simile:</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">short</span><span class="token plain"> c </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// word da 16 bit</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">for</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> n</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> j </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> j </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> j</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">outdecimal_word</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">outchar</span><span class="token punctuation" style="color:#393A34">(</span><span class="token char">&#x27; &#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        c </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> k</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">outline</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="esercizi-per-casa">Esercizi per casa<a href="#esercizi-per-casa" class="hash-link" aria-label="Link diretto a Esercizi per casa" title="Link diretto a Esercizi per casa" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="esercizio-32">Esercizio 3.2<a href="#esercizio-32" class="hash-link" aria-label="Link diretto a Esercizio 3.2" title="Link diretto a Esercizio 3.2" translate="no">​</a></h3>
<p>Scrivere un programma che svolge quanto segue.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># leggere 2 numeri interi in base 10, calcolarne il prodotto, e stampare il risultato.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># lettura:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># come primo carattere leggere il segno del numero, cioè un &#x27;+&#x27; o un &#x27;-&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># segue il modulo del numero, minore di 256</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># stampa:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># stampare prima il segno del numero (+ o -), poi il modulo in cifre decimali</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="esercizio-33">Esercizio 3.3<a href="#esercizio-33" class="hash-link" aria-label="Link diretto a Esercizio 3.3" title="Link diretto a Esercizio 3.3" translate="no">​</a></h3>
<p>Quello che segue (e scaricabile <a href="/reti-logiche-esercitazioni/2024-25/code/assembler/1/per-casa/imul_debug.s" target="_blank" rel="noopener noreferrer">qui</a>) è un tentativo di soluzione dell&#x27;esercizio precedente.
Contiene tuttavia uno o più bug. Trovarli e correggerli.</p>
<div class="language-assembler codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-assembler codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm" style="counter-reset:line-count 0"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token directive keyword" style="color:#00009f">.include </span><span class="token literal-string string" style="color:#e3116c">&quot;./files/utility.s&quot;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">mess1:</span><span class="token plain">  </span><span class="token directive keyword" style="color:#00009f">.asciz </span><span class="token literal-string string" style="color:#e3116c">&quot;inserire il primo numero intero:\r&quot;</span><span class="token plain"> </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">mess2:</span><span class="token plain">  </span><span class="token directive keyword" style="color:#00009f">.asciz </span><span class="token literal-string string" style="color:#e3116c">&quot;inserire il secondo numero intero:\r&quot;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">mess3:</span><span class="token plain">  </span><span class="token directive keyword" style="color:#00009f">.asciz </span><span class="token literal-string string" style="color:#e3116c">&quot;il prodotto dei due numeri e&#x27;:\r&quot;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">a:</span><span class="token plain">      </span><span class="token directive keyword" style="color:#00009f">.word </span><span class="token plain">0</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">b:</span><span class="token plain">      </span><span class="token directive keyword" style="color:#00009f">.word </span><span class="token plain">0</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">_main:</span><span class="token plain">      </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">nop</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> mess1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> outline</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> in_intero</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ax</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> a</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> mess2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> outline</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> in_intero</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ax</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ax</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%bx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">imul</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%bx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> mess3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> outline</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> out_intero</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">ret</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># legge un intero composto da segno e modulo minore di 256</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ne lascia la rappresentazione in complemento alla radice base 2 in ax</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">in_intero:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">push</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token literal-decimal-number number" style="color:#36acaa">$0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%bl</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">in_segno_loop:</span><span class="token plain">   </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> inchar</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cmp</span><span class="token plain"> </span><span class="token literal-character number" style="color:#36acaa">$&#x27;+&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">je</span><span class="token plain"> in_segno_poi</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cmp</span><span class="token plain"> </span><span class="token literal-character number" style="color:#36acaa">$&#x27;-&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">jne</span><span class="token plain"> in_segno_loop</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token literal-decimal-number number" style="color:#36acaa">$1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%bl</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">in_segno_poi:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> outchar</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> indecimal_word</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> newline</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cmp</span><span class="token plain"> </span><span class="token literal-decimal-number number" style="color:#36acaa">$1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%bl</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">jne</span><span class="token plain"> in_intero_fine</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">neg</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ax</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">in_intero_fine:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">pop</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">ret</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># legge la rappresentazione di un numero intero in complemento alla radice base 2 in eax</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># lo stampa come segno seguito dalle cifre decimali</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">out_intero:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">push</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%eax</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cmp</span><span class="token plain"> </span><span class="token literal-decimal-number number" style="color:#36acaa">$0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">ja</span><span class="token plain"> out_intero_pos</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">jmp</span><span class="token plain"> out_intero_neg</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">out_intero_pos:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token literal-character number" style="color:#36acaa">$&#x27;+&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> outchar</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">jmp</span><span class="token plain"> out_intero_poi</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">out_intero_neg:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token literal-character number" style="color:#36acaa">$&#x27;-&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> outchar</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">neg</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">jmp</span><span class="token plain"> out_intero_poi</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">out_intero_poi:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%eax</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> outdecimal_long</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">pop</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">ret</span></span><br></span></code></pre></div></div>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Soluzione passo-passo</summary><div><div class="collapsibleContent_i85q"><p>Per brevità, e vista la documentazione dei sottoprogrammi, lascio al lettore l&#x27;interpretazione a grandi linee del programma.
Passeremo direttamente ai problemi incontrati testando il programma.</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">inserire il primo numero intero:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+30</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Segmentation fault</span><br></span></code></pre></div></div><p>L&#x27;errore, sicuramente già ben noto, è in realtà	un risultato tipico di una <em>vasta</em> gamma di errori.
Di per sé significa semplicemente &quot;tentativo di accesso in una zona di memoria a cui non si può accedere per fare quello che si voleva fare&quot;.
Non spiega, per esempio, cos&#x27;è che si voleva fare e perché è sbagliato.</p><p>Vediamo tramite il debugger.</p><div class="language-gdb codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-gdb codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Program received signal SIGSEGV, Segmentation fault.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _main () at /mnt/c/reti_logiche/assembler/lezioni/2/imul_debug.s:14</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">14          </span><span class="token instruction keyword" style="color:#00009f">mov %ax, a</span><br></span></code></pre></div></div><p>Questo ci dice che il problema è il tentativo di scrivere all&#x27;indirizzo <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">a</span></span></span></span>, che è la word allocata poco più su.
Il problema qui è che il programma non ha nessuna distinzione tra <code>.data</code> e <code>.text</code>: di default è tutto <code>.text</code>, dove non si può scrivere perché non ci è permesso, normalmente, sovrascrivere le istruzioni del programma.
Il problema inverso si avrebbe tentando di <em>eseguire</em> dalla sezione <code>.data</code>.</p><p>Correggiamo l&#x27;errore aggiungendo le dichiarazioni di queste due sezioni.</p><div class="language-assembler codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-assembler codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm" style="counter-reset:line-count 0"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token directive keyword" style="color:#00009f">.include </span><span class="token literal-string string" style="color:#e3116c">&quot;./files/utility.s&quot;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token directive keyword" style="color:#00009f">.data</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">mess1:</span><span class="token plain">  </span><span class="token directive keyword" style="color:#00009f">.asciz </span><span class="token literal-string string" style="color:#e3116c">&quot;inserire il primo numero intero:\r&quot;</span><span class="token plain"> </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">mess2:</span><span class="token plain">  </span><span class="token directive keyword" style="color:#00009f">.asciz </span><span class="token literal-string string" style="color:#e3116c">&quot;inserire il secondo numero intero:\r&quot;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">mess3:</span><span class="token plain">  </span><span class="token directive keyword" style="color:#00009f">.asciz </span><span class="token literal-string string" style="color:#e3116c">&quot;il prodotto dei due numeri e&#x27;:\r&quot;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">a:</span><span class="token plain">      </span><span class="token directive keyword" style="color:#00009f">.word </span><span class="token plain">0</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">b:</span><span class="token plain">      </span><span class="token directive keyword" style="color:#00009f">.word </span><span class="token plain">0</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token directive keyword" style="color:#00009f">.text</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">_main:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">...</span></span><br></span></code></pre></div></div><p>Ritestiamo quindi il programma:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">inserire il primo numero intero:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+30</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">inserire il secondo numero intero:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+20</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">il prodotto dei due numeri e&#x27;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+600</span><br></span></code></pre></div></div><p>Fin qui, sembra andare bene.
Ricordiamoci però di testare <em>tutti i casi di interesse</em>, in particolare i <em>casi limite</em>.
Le specifiche dell&#x27;esercizio ci chiedono di considerare numeri interi di modulo inferiore a 256.</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">inserire il primo numero intero:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+255</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">inserire il secondo numero intero:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+255</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">il prodotto dei due numeri e&#x27;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+65025</span><br></span></code></pre></div></div><p>Corretto.</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">inserire il primo numero intero:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-255</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">inserire il secondo numero intero:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+255</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">il prodotto dei due numeri e&#x27;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+511</span><br></span></code></pre></div></div><p>Decisamente non corretto.
Verifichiamo col debugger.
Per prima cosa, ci assicuriamo che la lettura di numeri negativi sia corretta.
Mettiamo un brekpoint a riga 16 (riga 14 prima dell&#x27;aggiunta di <code>.data</code> e <code>.text</code>), e verifichiamo cosa viene letto quando inseriamo <code>-255</code>.</p><div class="language-gdb codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-gdb codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token gdb-line function" style="color:#d73a49">(gdb) b 16</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Breakpoint 2 at 0x56556774: file /mnt/c/reti_logiche/assembler/lezioni/2/imul_debug.s, line 16.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token gdb-line function" style="color:#d73a49">(gdb) c</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Continuing.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">inserire il primo numero intero:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-255</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Breakpoint 2, _main () at /mnt/c/reti_logiche/assembler/lezioni/2/imul_debug.s:16</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">16          </span><span class="token instruction keyword" style="color:#00009f">mov %ax, a</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token gdb-line function" style="color:#d73a49">(gdb) i r ax</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ax             0xff01              -255</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb)</span><br></span></code></pre></div></div><p>Fin qui è bene, il problema non sembra essere nella lettura di interi da tastiera.
Proseguiamo quindi alla moltiplicazione, e controlliamone il risultato.
La <code>imul</code> utilizzata è a 16 bit, che da documentazione vediamo usa <code>%ax</code> come operando implicito, <code>%bx</code> come operando esplicito, e <code>%dx_%ax</code> come destinatario del calcolo.</p><div class="language-gdb codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-gdb codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Breakpoint 3, _main () at /mnt/c/reti_logiche/assembler/lezioni/2/imul_debug.s:25</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">25          </span><span class="token instruction keyword" style="color:#00009f">imul %bx</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token gdb-line function" style="color:#d73a49">(gdb) i r ax bx</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ax             0xff01              -255</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bx             0xff                255</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token gdb-line function" style="color:#d73a49">(gdb) s</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">27          </span><span class="token instruction keyword" style="color:#00009f">lea mess3, %ebx</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token gdb-line function" style="color:#d73a49">(gdb) i r dx ax</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dx             0xffff              -1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ax             0x1ff               511</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb)</span><br></span></code></pre></div></div><p>Concatenando i due registri otteniamo <code>0xffff01ff</code>, ricordando, in particolare per <code>%ax</code>, che <code>gdb</code> omette nelle stampe gli zeri all&#x27;inizio di esadecimali.
Possiamo verificare questo valore convertendo da esadecimale a decimale con una calcolatrice da programmatore.
Dato che si parla di interi, è importante impostare la calcolatrice sul numero di bit giusti, in questo caso 32.
Nella calcolatrice di Windows, questo significa impostare la modalità <code>DWORD</code>.</p><figure><img src="/reti-logiche-esercitazioni/2025-26/img/assembler/esercitazioni/3/w11_programmer_calc.png" style="max-width:min(100%, 24rem)" alt="
Schermata della calcolatrice da programmatore di Windows.
La modalità di calcolo è impostata su DWORD, cioè 32 bit.
Il valore inserito, in modalità esadecimale, è ffff01ff.
La calcolatrice mostra la conversione in numero intero decimale -65025.
" title="
Utilizzando la modalità DWORD, cioè 32 bit, l&#x27;esadecimale ffff01ff è convertito nel numero intero decimale -65025.
"><figcaption><p>Uso della calcolatrice da programmatore in Windows 11 per convertire da esadecimale a intero decimale.</p></figcaption></figure><p>Il risultato è -65025, che è quello che ci aspettiamo.
Anche qui, quindi, è bene: resta allora la stampa di questo valore, cioè il sottoprogramma <code>out_intero</code>.</p><div class="language-assembler codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-assembler codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># legge la rappresentazione di un numero intero in complemento alla radice base 2 in eax</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># lo stampa come segno seguito dalle cifre decimali</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token label function" style="color:#d73a49">out_intero:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span></code></pre></div></div><p>Vediamo qui la prima discrepanza: il sottoprogramma si aspetta il risultato in <code>%eax</code>, ma noi sappiamo che la <code>imul</code> lo lascia in <code>%dx_%ax</code>.
Ci si può chiedere quale dei due correggere, se il sottoprogramma o il programma che lo usa.
In generale, è una buona cambiare le specifiche di un componente interno (il sottoprogramma) solo quando queste <em>non hanno senso</em>.
È quindi il componente esterno (il programma) che non rispetta le specifiche d&#x27;uso di quello interno, e che va cambiato.</p><p>Assicuriamoci allora di lasciare il risultato nel registro giusto prima di <code>call out_intero</code>.</p><div class="language-assembler codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-assembler codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ax</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%bx</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">imul</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%bx</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">shl</span><span class="token plain"> </span><span class="token literal-decimal-number number" style="color:#36acaa">$16</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%edx</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">movw</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ax</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%dx</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">movl</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%edx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%eax</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> mess3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> outline</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> out_intero</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre></div></div><p>Riproviamo ad eseguire:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">inserire il primo numero intero:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-255</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">inserire il secondo numero intero:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+255</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">il prodotto dei due numeri e&#x27;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+4294902271</span><br></span></code></pre></div></div><p>Il risultato è cambiato, ma è comunque sbagliato.
Ritorniamo al debugger, cominciando dalla <code>call</code> di <code>out_intero</code>, verificando di avere il valore corretto in <code>%eax</code>.</p><div class="language-gdb codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-gdb codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Breakpoint 2, _main () at /mnt/c/reti_logiche/assembler/lezioni/2/imul_debug.s:33</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">33          </span><span class="token instruction keyword" style="color:#00009f">call out_intero</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token gdb-line function" style="color:#d73a49">(gdb) i r eax</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">eax            0xffff01ff          -65025</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token gdb-line function" style="color:#d73a49">(gdb) </span><br></span></code></pre></div></div><p>Il valore in <code>%eax</code> è corretto, il problema allora è nel sottoprogramma.
Proseguiamo nel sottoprogramma, cercando di capire come funziona e dove potrebbe sbagliare.
La prima cosa che notiamo è che <code>out_intero</code> ha due rami, <code>out_intero_pos</code> e <code>out_intero_neg</code>, dove stampa segni diversi e, in caso di numero negativo, usa la <code>neg</code> per ottenere l&#x27;opposto.
Quando si giunge a <code>out_intero_poi</code>, stampa il modulo del numero usando <code>outdecimal_long</code> (che, ricordiamo, supporta solo numeri naturali).
Tuttavia, nella nostra esecuzione abbiamo un negativo che viene stampato come naturale.</p><p>Verifichiamo seguendo l&#x27;esecuzione con <code>step</code>, che entra nel sottoprogramma <code>out_intero</code>:</p><div class="language-gdb codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-gdb codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token gdb-line function" style="color:#d73a49">(gdb) s</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">out_intero () at /mnt/c/reti_logiche/assembler/lezioni/2/imul_debug.s:62</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">62          </span><span class="token instruction keyword" style="color:#00009f">push %ebx</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token gdb-line function" style="color:#d73a49">(gdb) s</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">63          </span><span class="token instruction keyword" style="color:#00009f">mov %eax, %ebx</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token gdb-line function" style="color:#d73a49">(gdb) s</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">64          </span><span class="token instruction keyword" style="color:#00009f">cmp $0, %ebx</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token gdb-line function" style="color:#d73a49">(gdb) i r ebx</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ebx            0xffff01ff          -65025</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token gdb-line function" style="color:#d73a49">(gdb) s</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">65          </span><span class="token instruction keyword" style="color:#00009f">ja out_intero_pos</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token gdb-line function" style="color:#d73a49">(gdb) s</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">out_intero_pos () at /mnt/c/reti_logiche/assembler/lezioni/2/imul_debug.s:68</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">68          </span><span class="token instruction keyword" style="color:#00009f">mov $&#x27;+&#x27;, %al</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token gdb-line function" style="color:#d73a49">(gdb) </span><br></span></code></pre></div></div><p>Effettivamente, nonostante <code>%ebx</code> sia un numero negativo, il salto a <code>out_intero_pos</code> viene eseguito.
Guardiamo però più attentamente: l&#x27;istruzione di salto è <code>ja</code>, che interpreta il confronto come <em>tra numeri naturali</em>.
In effetti, qualunque valore di <code>%ebx</code> diverso da 0, se interpretato come naturale, risulta maggiore di 0.
Correggiamo quindi utilizzando <code>jg</code>, e ritestiamo.</p><div class="language-assembler codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-assembler codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cmp</span><span class="token plain"> </span><span class="token literal-decimal-number number" style="color:#36acaa">$0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">jg</span><span class="token plain"> out_intero_pos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">jmp</span><span class="token plain"> out_intero_neg</span><br></span></code></pre></div></div><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">inserire il primo numero intero:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-255</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">inserire il secondo numero intero:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+255</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">il prodotto dei due numeri e&#x27;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-65025</span><br></span></code></pre></div></div><p>Si dovrebbe ora continuare con altri test (combinazioni di segni, uso di 0) fino a convincersi che funzioni.
Per questa soluzione ci fermiamo qui.</p><p>Il codice finale, scaricabile <a href="/reti-logiche-esercitazioni/2025-26/code/assembler/2/imul_debug_sol.s" target="_blank" rel="noopener noreferrer">qui</a>, è il seguente:</p><div class="language-assembler codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-assembler codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm" style="counter-reset:line-count 0"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token directive keyword" style="color:#00009f">.include </span><span class="token literal-string string" style="color:#e3116c">&quot;./files/utility.s&quot;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token directive keyword" style="color:#00009f">.data</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">mess1:</span><span class="token plain">  </span><span class="token directive keyword" style="color:#00009f">.asciz </span><span class="token literal-string string" style="color:#e3116c">&quot;inserire il primo numero intero:\r&quot;</span><span class="token plain"> </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">mess2:</span><span class="token plain">  </span><span class="token directive keyword" style="color:#00009f">.asciz </span><span class="token literal-string string" style="color:#e3116c">&quot;inserire il secondo numero intero:\r&quot;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">mess3:</span><span class="token plain">  </span><span class="token directive keyword" style="color:#00009f">.asciz </span><span class="token literal-string string" style="color:#e3116c">&quot;il prodotto dei due numeri e&#x27;:\r&quot;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">a:</span><span class="token plain">      </span><span class="token directive keyword" style="color:#00009f">.word </span><span class="token plain">0</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">b:</span><span class="token plain">      </span><span class="token directive keyword" style="color:#00009f">.word </span><span class="token plain">0</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token directive keyword" style="color:#00009f">.text</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">_main:</span><span class="token plain">      </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">nop</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> mess1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> outline</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> in_intero</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ax</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> a</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> mess2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> outline</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> in_intero</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ax</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ax</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%bx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">imul</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%bx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">shl</span><span class="token plain"> </span><span class="token literal-decimal-number number" style="color:#36acaa">$16</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%edx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">movw</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ax</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%dx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">movl</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%edx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%eax</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> mess3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> outline</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> out_intero</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">ret</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># legge un intero composto da segno e modulo minore di 256</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ne lascia la rappresentazione in complemento alla radice base 2 in ax</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">in_intero:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">push</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token literal-decimal-number number" style="color:#36acaa">$0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%bl</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">in_segno_loop:</span><span class="token plain">   </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> inchar</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cmp</span><span class="token plain"> </span><span class="token literal-character number" style="color:#36acaa">$&#x27;+&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">je</span><span class="token plain"> in_segno_poi</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cmp</span><span class="token plain"> </span><span class="token literal-character number" style="color:#36acaa">$&#x27;-&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">jne</span><span class="token plain"> in_segno_loop</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token literal-decimal-number number" style="color:#36acaa">$1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%bl</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">in_segno_poi:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> outchar</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> indecimal_word</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> newline</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cmp</span><span class="token plain"> </span><span class="token literal-decimal-number number" style="color:#36acaa">$1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%bl</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">jne</span><span class="token plain"> in_intero_fine</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">neg</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ax</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">in_intero_fine:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">pop</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">ret</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># legge la rappresentazione di un numero intero in complemento alla radice base 2 in eax</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># lo stampa come segno seguito dalle cifre decimali</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">out_intero:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">push</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%eax</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cmp</span><span class="token plain"> </span><span class="token literal-decimal-number number" style="color:#36acaa">$0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">jg</span><span class="token plain"> out_intero_pos</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">jmp</span><span class="token plain"> out_intero_neg</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">out_intero_pos:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token literal-character number" style="color:#36acaa">$&#x27;+&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> outchar</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">jmp</span><span class="token plain"> out_intero_poi</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">out_intero_neg:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token literal-character number" style="color:#36acaa">$&#x27;-&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> outchar</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">neg</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">jmp</span><span class="token plain"> out_intero_poi</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">out_intero_poi:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%eax</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> outdecimal_long</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">pop</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">ret</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span></code></pre></div></div></div></div></details>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="esercizio-34">Esercizio 3.4<a href="#esercizio-34" class="hash-link" aria-label="Link diretto a Esercizio 3.4" title="Link diretto a Esercizio 3.4" translate="no">​</a></h3>
<p>Quello che segue (e scaricabile  <a href="/reti-logiche-esercitazioni/2025-26/code/assembler/2/per-casa/substr_debug.s" target="_blank" rel="noopener noreferrer">qui</a>) è un tentativo di soluzione per le seguenti specifiche:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Leggere una riga dal terminale, che DEVE contenere almeno 2 caratteri &#x27;_&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Identificare e stampa la sottostringa delimitata dai primi due caratteri &#x27;_&#x27;</span><br></span></code></pre></div></div>
<p>Un esempio di output (<a href="/reti-logiche-esercitazioni/2025-26/code/assembler/2/per-casa/esempio.txt" target="_blank" rel="noopener noreferrer">qui</a> in formato txt) è il seguente</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">questa e&#x27; una _prova_ !!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">prova</span><br></span></code></pre></div></div>
<p>Contiene tuttavia uno o più bug. Trovarli e correggerli.</p>
<div class="language-assembler codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-assembler codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm" style="counter-reset:line-count 0"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token directive keyword" style="color:#00009f">.include </span><span class="token literal-string string" style="color:#e3116c">&quot;./files/utility.s&quot;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token directive keyword" style="color:#00009f">.data</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">msg_in:</span><span class="token plain"> </span><span class="token directive keyword" style="color:#00009f">.fill </span><span class="token plain">80</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 0</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token directive keyword" style="color:#00009f">.text</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">_main:</span><span class="token plain">  </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">nop</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token literal-decimal-number number" style="color:#36acaa">$80</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%cx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> msg_in</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> inline</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cld</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token literal-character number" style="color:#36acaa">$&#x27;_&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> msg_in</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%esi</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token literal-decimal-number number" style="color:#36acaa">$80</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%cx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">repne scasb</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%esi</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">repne scasb</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%esi</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ecx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">sub</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ecx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> outline</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">ret</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span></code></pre></div></div>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Soluzione</summary><div><div class="collapsibleContent_i85q"><p>Il programma usa <code>repne scasb</code> per scorrere il vettore finché non trova il carattere in <code>%al</code>, cioè <code>_</code>.
Dopo la prima scansione, salva l&#x27;indirizzo attuale per usarlo come indirizzo di partenza della sottostringa.
Dopo la seconda scansione, fa una sottrazione di indirizzi per trovare il numero di caratteri che compongono la sottostringa.
Usando indirizzo di partenza e numero caratteri, stampa quindi a terminale.</p><p>I bug da trovare sono i seguenti:</p><ul>
<li>Le istruzioni <code>rep</code> utilizzano <code>%ecx</code>, ma la riga 17 inizializza solo <code>%cx</code>. Questo funziona solo se, per puro caso, la parte alta di <code>%ecx</code> è a 0 ad inizio programma.</li>
<li>L&#x27;istruzione <code>scasb</code> ha l&#x27;indirizzo del vettore come destinatario implicito in <code>%edi</code>, non <code>%esi</code>.</li>
<li>La <code>repne scasb</code> termina <em>dopo</em> aver scansionato il carattere che rispetta l&#x27;equivalenza. Questo vuol dire che dopo la prima scansione abbiamo l&#x27;indirizzo del carattere dopo il primo <code>_</code> (corretto) ma dopo la seconda scansione abbiamo l&#x27;indirizzo del carattere dopo il secondo <code>_</code>: la sottrazione calcola una sottostringa che include il <code>_</code> di terminazione.</li>
<li>Il sottoprogramma usato è quello sbagliato: <code>outline</code> stampa finché non incrontra <code>\r</code>, per indicare il numero di caratteri da stampare va usato <code>outmess</code>.</li>
</ul><p>Il codice dopo le correzioni è quindi il seguente, scaricabile <a href="/reti-logiche-esercitazioni/2025-26/code/assembler/3/substr_debug_sol.s" target="_blank" rel="noopener noreferrer">qui</a>.</p><div class="language-assembler codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-assembler codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm" style="counter-reset:line-count 0"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token directive keyword" style="color:#00009f">.include </span><span class="token literal-string string" style="color:#e3116c">&quot;./files/utility.s&quot;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token directive keyword" style="color:#00009f">.data</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">msg_in:</span><span class="token plain"> </span><span class="token directive keyword" style="color:#00009f">.fill </span><span class="token plain">80</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 0</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token directive keyword" style="color:#00009f">.text</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">_main:</span><span class="token plain">  </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">nop</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token literal-decimal-number number" style="color:#36acaa">$80</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%cx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> msg_in</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> inline</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cld</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token literal-character number" style="color:#36acaa">$&#x27;_&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> msg_in</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%edi</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token literal-decimal-number number" style="color:#36acaa">$80</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%cx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">repne scasb</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%edi</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">repne scasb</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%edi</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ecx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">sub</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ecx</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">dec</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ecx</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> outmess</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">ret</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span></code></pre></div></div><p>Si sottolinea inoltre una debolezza della soluzione: la sottrazione fra puntatori funziona solo perché la scala è 1, cioè maneggiamo valori da 1 byte, per cui c&#x27;è corrispondenza fra la differenza di due indirizzi e il numero di elementi fra loro.
Una soluzione più robusta è utilizzare la differenza del contantore <code>%ecx</code> anziché di puntatori.
In alternativa, si può utilizzare shift a destra dopo la sottrazione per tener conto di una scala maggiore di 1, ma è un metodo che rende facile sbagliare (bisogna stare attenti all&#x27;ordine tra shift e decremento).</p><p>Si può verificare ciò svolgendo un esercizio simile a questo basato ma basato su word, per esempio con serie di valori decimali delimitati da 0.</p></div></div></details>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="esercizio-35">Esercizio 3.5<a href="#esercizio-35" class="hash-link" aria-label="Link diretto a Esercizio 3.5" title="Link diretto a Esercizio 3.5" translate="no">​</a></h3>
<p>A partire dalla soluzione dell&#x27;esercizio precedente, estendere il programma per rispettare le seguenti specifiche:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Leggere una riga dal terminale</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Identificare e stampa la sottostringa delimitata dai primi due caratteri &#x27;_&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Se un solo carattere &#x27;_&#x27; e&#x27; presente, assumere che la sottostringa cominci </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ad inizio stringa e finisca prima del carattere &#x27;_&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Se nessun carattere &#x27;_&#x27; e&#x27; presente, stampare l&#x27;intera stringa</span><br></span></code></pre></div></div>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Soluzione</summary><div><div class="collapsibleContent_i85q"><p>Il programma dell&#x27;esercizio 3.4 viene complicato dalla richiesta di gestire dei valori di default, in caso siano presenti uno o nessun delimitatore <code>_</code>.
Questo vuol dire gestire il caso in cui una <code>repne scasb</code> termina non perché ha trovato il carattere, ma perché <code>%ecx</code> è stato decrementato fino a 0.</p><p>Questo si implementa come dei semplici check su <code>%ecx</code> dopo ciascuna <code>repne scasb</code>, in caso sia 0 si va a un branch separato: se succede alla prima scansione non è presente alcun <code>_</code> e saltiamo quindi a <code>print_all</code>, se succede alla seconda scansione abbiamo solo un <code>_</code> e saltiamo quindi a <code>print_from_start</code>.
Altrimenti, si prosegue con lo stesso codice dell&#x27;esercizio 2.2, che nomineremo <code>print_substr</code>.</p><p>Per <code>print_all</code> basta una semplice <code>outline</code> dell&#x27;intera stringa.
Per <code>print_from_start</code>, si fa un ragionamento non dissimile da quanto visto per l&#x27;esercizio precedente, dove va usato come inizio l&#x27;indirizzo di <code>msg_in</code> e il numero di caratteri può essere calcolato, come prima, usando l&#x27;indirizzo che troviamo in <code>%edi</code> dopo la prima <code>repne scasb</code>.</p><p>Il codice risultante è il seguente, scaricabile <a href="/reti-logiche-esercitazioni/2025-26/code/assembler/3/substr_default_sol.s" target="_blank" rel="noopener noreferrer">qui</a>.</p><div class="language-assembler codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-assembler codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm" style="counter-reset:line-count 0"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token directive keyword" style="color:#00009f">.include </span><span class="token literal-string string" style="color:#e3116c">&quot;./files/utility.s&quot;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token directive keyword" style="color:#00009f">.data</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">msg_in:</span><span class="token plain"> </span><span class="token directive keyword" style="color:#00009f">.fill </span><span class="token plain">80</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 0</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token directive keyword" style="color:#00009f">.text</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">_main:</span><span class="token plain">  </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">nop</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token literal-decimal-number number" style="color:#36acaa">$80</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%cx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> msg_in</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> inline</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cld</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token literal-character number" style="color:#36acaa">$&#x27;_&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> msg_in</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%edi</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token literal-decimal-number number" style="color:#36acaa">$80</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ecx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">repne scasb</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cmp</span><span class="token plain"> </span><span class="token literal-decimal-number number" style="color:#36acaa">$0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ecx</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">je</span><span class="token plain"> print_all</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%edi</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">repne scasb</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">cmp</span><span class="token plain"> </span><span class="token literal-decimal-number number" style="color:#36acaa">$0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ecx</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">je</span><span class="token plain"> print_from_start</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">print_substr:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%edi</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ecx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">sub</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ecx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">dec</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ecx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> outmess</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">ret</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">print_from_start:</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ecx</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> msg_in</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">sub</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ecx</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">dec</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ecx</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> outmess</span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">ret</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">print_all:</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> msg_in</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> outline</span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token op-code keyword" style="color:#00009f">ret</span></span><br></span></code></pre></div></div></div></div></details></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Pagina del documento"><a class="pagination-nav__link pagination-nav__link--prev" href="/reti-logiche-esercitazioni/esercitazioni/Assembler/Esercitazioni/Esercitazione 2"><div class="pagination-nav__sublabel">Precedente</div><div class="pagination-nav__label">Esercitazione 2</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/reti-logiche-esercitazioni/category/documentazione"><div class="pagination-nav__sublabel">Successivo</div><div class="pagination-nav__label">Documentazione</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#soluzioni-passo-passo-esercizi-per-casa" class="table-of-contents__link toc-highlight">Soluzioni passo-passo esercizi per casa</a><ul><li><a href="#esercizio-12-istruzioni-stringa-soluzione-passo-passo" class="table-of-contents__link toc-highlight">Esercizio 1.2: istruzioni stringa, soluzione passo-passo</a></li><li><a href="#esercizio-16-esercizio-di-debugging-soluzione-passo-passo" class="table-of-contents__link toc-highlight">Esercizio 1.6: esercizio di debugging, soluzione passo-passo</a></li></ul></li><li><a href="#esercizio-31-esercizio-desame-2021-01-08" class="table-of-contents__link toc-highlight">Esercizio 3.1: esercizio d&#39;esame 2021-01-08</a></li><li><a href="#esercizi-per-casa" class="table-of-contents__link toc-highlight">Esercizi per casa</a><ul><li><a href="#esercizio-32" class="table-of-contents__link toc-highlight">Esercizio 3.2</a></li><li><a href="#esercizio-33" class="table-of-contents__link toc-highlight">Esercizio 3.3</a></li><li><a href="#esercizio-34" class="table-of-contents__link toc-highlight">Esercizio 3.4</a></li><li><a href="#esercizio-35" class="table-of-contents__link toc-highlight">Esercizio 3.5</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Raffaele Zippo. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>