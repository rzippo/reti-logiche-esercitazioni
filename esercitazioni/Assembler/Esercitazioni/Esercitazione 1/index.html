<!doctype html>
<html lang="it" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-2025-26 docs-doc-page docs-doc-id-esercitazioni/Assembler/Esercitazioni/Esercitazione 1" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.1">
<title data-rh="true">Esercitazione 1 | Esercitazioni di Reti Logiche</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://your-docusaurus-site.example.com/reti-logiche-esercitazioni/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://your-docusaurus-site.example.com/reti-logiche-esercitazioni/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://your-docusaurus-site.example.com/reti-logiche-esercitazioni/esercitazioni/Assembler/Esercitazioni/Esercitazione 1"><meta data-rh="true" property="og:locale" content="it"><meta data-rh="true" name="docusaurus_locale" content="it"><meta data-rh="true" name="docsearch:language" content="it"><meta data-rh="true" name="docusaurus_version" content="2025-26"><meta data-rh="true" name="docusaurus_tag" content="docs-default-2025-26"><meta data-rh="true" name="docsearch:version" content="2025-26"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-2025-26"><meta data-rh="true" property="og:title" content="Esercitazione 1 | Esercitazioni di Reti Logiche"><link data-rh="true" rel="icon" href="/reti-logiche-esercitazioni/img/favicon.png"><link data-rh="true" rel="canonical" href="https://your-docusaurus-site.example.com/reti-logiche-esercitazioni/esercitazioni/Assembler/Esercitazioni/Esercitazione 1"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/reti-logiche-esercitazioni/esercitazioni/Assembler/Esercitazioni/Esercitazione 1" hreflang="it"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/reti-logiche-esercitazioni/esercitazioni/Assembler/Esercitazioni/Esercitazione 1" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://X6QFHIGLL7-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Assembler","item":"https://your-docusaurus-site.example.com/reti-logiche-esercitazioni/category/assembler"},{"@type":"ListItem","position":2,"name":"Esercitazioni","item":"https://your-docusaurus-site.example.com/reti-logiche-esercitazioni/category/esercitazioni"},{"@type":"ListItem","position":3,"name":"Esercitazione 1","item":"https://your-docusaurus-site.example.com/reti-logiche-esercitazioni/esercitazioni/Assembler/Esercitazioni/Esercitazione 1"}]}</script><link rel="alternate" type="application/rss+xml" href="/reti-logiche-esercitazioni/blog/rss.xml" title="Esercitazioni di Reti Logiche RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/reti-logiche-esercitazioni/blog/atom.xml" title="Esercitazioni di Reti Logiche Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GHFPG7JFTZ"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-GHFPG7JFTZ",{anonymize_ip:!0})</script>



<link rel="search" type="application/opensearchdescription+xml" title="Esercitazioni di Reti Logiche" href="/reti-logiche-esercitazioni/opensearch.xml">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/reti-logiche-esercitazioni/assets/css/styles.e959b96b.css">
<script src="/reti-logiche-esercitazioni/assets/js/runtime~main.93ebe20f.js" defer="defer"></script>
<script src="/reti-logiche-esercitazioni/assets/js/main.ebc816c2.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Passa al contenuto principale"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Passa al contenuto principale</a></div><nav aria-label="Principale" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Attiva/disattiva la barra di navigazione" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/reti-logiche-esercitazioni/"><div class="navbar__logo"><img src="/reti-logiche-esercitazioni/img/logo.png" alt="Reti Logiche" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/reti-logiche-esercitazioni/img/logo.png" alt="Reti Logiche" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Esercitazioni di Reti Logiche</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/reti-logiche-esercitazioni/">Esercitazioni</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/reti-logiche-esercitazioni/esercitazioni/Assembler/Esercitazioni/Esercitazione 1">2025-26</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/reti-logiche-esercitazioni/esercitazioni/Assembler/Esercitazioni/Esercitazione 1">2025-26</a></li><li><a class="dropdown__link" href="/reti-logiche-esercitazioni/2024-25/esercitazioni/Assembler/Esercitazioni/Esercitazione 1">2024-25</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Passa dalla modalità scura a quella chiara (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Cerca (Meta+k)" aria-keyshortcuts="Meta+k"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 24 24" aria-hidden="true"><circle cx="11" cy="11" r="8" stroke="currentColor" fill="none" stroke-width="1.4"></circle><path d="m21 21-4.3-4.3" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Cerca</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Torna indietro all&#x27;inizio" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Barra laterale dei documenti" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/reti-logiche-esercitazioni/"><span title="Esercitazioni di Reti Logiche" class="linkLabel_WmDU">Esercitazioni di Reti Logiche</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/reti-logiche-esercitazioni/esercitazioni/Introduzione"><span title="Introduzione" class="linkLabel_WmDU">Introduzione</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/reti-logiche-esercitazioni/esercitazioni/Ambienti"><span title="Ambienti di sviluppo" class="linkLabel_WmDU">Ambienti di sviluppo</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/reti-logiche-esercitazioni/category/assembler"><span title="Assembler" class="categoryLinkLabel_W154">Assembler</span></a><button aria-label="Collapse sidebar category &#x27;Assembler&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reti-logiche-esercitazioni/esercitazioni/Assembler/Introduzione"><span title="Introduzione" class="linkLabel_WmDU">Introduzione</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reti-logiche-esercitazioni/esercitazioni/Assembler/Ambiente"><span title="Ambiente" class="linkLabel_WmDU">Ambiente</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex="0" href="/reti-logiche-esercitazioni/category/esercitazioni"><span title="Esercitazioni" class="categoryLinkLabel_W154">Esercitazioni</span></a><button aria-label="Collapse sidebar category &#x27;Esercitazioni&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/reti-logiche-esercitazioni/esercitazioni/Assembler/Esercitazioni/Esercitazione 1"><span title="Esercitazione 1" class="linkLabel_WmDU">Esercitazione 1</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/reti-logiche-esercitazioni/esercitazioni/Assembler/Esercitazioni/Esercitazione 2"><span title="Esercitazione 2" class="linkLabel_WmDU">Esercitazione 2</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/reti-logiche-esercitazioni/category/documentazione"><span title="Documentazione" class="categoryLinkLabel_W154">Documentazione</span></a><button aria-label="Expand sidebar category &#x27;Documentazione&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reti-logiche-esercitazioni/esercitazioni/Assembler/Problemi comuni"><span title="Problemi comuni" class="linkLabel_WmDU">Problemi comuni</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/reti-logiche-esercitazioni/category/verilog"><span title="Verilog" class="categoryLinkLabel_W154">Verilog</span></a><button aria-label="Expand sidebar category &#x27;Verilog&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/reti-logiche-esercitazioni/esercitazioni/VS-Code"><span title="Uso di VS Code" class="linkLabel_WmDU">Uso di VS Code</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/reti-logiche-esercitazioni/esercitazioni/Versioni PDF"><span title="Versioni PDF" class="linkLabel_WmDU">Versioni PDF</span></a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Briciole di pane"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Pagina principale" class="breadcrumbs__link" href="/reti-logiche-esercitazioni/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/reti-logiche-esercitazioni/category/assembler"><span>Assembler</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/reti-logiche-esercitazioni/category/esercitazioni"><span>Esercitazioni</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Esercitazione 1</span></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Versione: 2025-26</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">Su questa pagina</button></div><div class="theme-doc-markdown markdown"><header><h1>Esercitazione 1</h1></header>
<p>La caratteristica principale del programmare in assembler è che le operazioni a disposizione sono solo quelle messe a disposizione dal processore.
Infatti, l&#x27;assemblatore fa molto poco: dopo aver sostituito le varie label con indirizzi, traduce ciascuna istruzione, nell&#x27;ordine in cui sono presenti, nel diretto corrispettivo binario (il cosiddetto linguaggio macchina).
Questo binario è poi eseguito direttamente dal processore.
Dato un algoritmo per risolvere un problema, i passi base di questo algoritmo <em>devono</em> essere istruzioni comprese dal processore, e siamo quindi limitati dall&#x27;hardware e le sue caratteristiche.</p>
<p>Per esempio, dato che il processore non supporta <code>mov</code> da un indirizzo di memoria a un altro indirizzo di memoria, non possiamo fare questa operazione con una sola istruzione: dobbiamo invece scomporre in <code>mov src, %eax</code> <code>mov %eax, dest</code>, assicurandoci nel frattempo di non aver perso alcun dato importante prima contenuto in <code>%eax</code>.</p>
<p>Per svolgere gli esercizi, bisogna quindi imparare a scomporre strutture di programmazione già note (come if-then-else, cicli, accesso a vettore) nelle operazioni elementari messe ad disposizione dal processore, usando il limitato numero di registri a disposizione al posto di variabili, e tenendo presente quali operazioni da fare con quali dati, senza un sistema di tipizzazione ad aiutarci.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="premesse-per-programmi-nellambiente-del-corso">Premesse per programmi nell&#x27;ambiente del corso<a href="#premesse-per-programmi-nellambiente-del-corso" class="hash-link" aria-label="Link diretto a Premesse per programmi nell&#x27;ambiente del corso" title="Link diretto a Premesse per programmi nell&#x27;ambiente del corso" translate="no">​</a></h2>
<p>Unica eccezione alla logica di cui sopra sono i sottoprogrammi di ingresso/uscita, forniti tramite <code>utility.s</code>:
questi interagiscono con il terminale tramite il <em>kernel</em> usando il meccanismo delle <em>interruzioni</em>, concetti che avrete il tempo di esplorare in corsi successivi.
Qui ci limiteremo a seguirne le specifiche, documentate <a href="/reti-logiche-esercitazioni/esercitazioni/Assembler/Documentazione/Sottoprogrammi utility">qui</a>, per leggere o stampare a video numeri, caratteri, o stringhe.
Per esempio, parte di queste specifiche è l&#x27;uso del carattere di ritorno carrello <code>\r</code> come terminatore di stringa.
Per usarli, però, va istruito l&#x27;assemblatore di aggiungere questi sottoprogrammi al nostro codice, con</p>
<div class="language-assembler codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-assembler codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token directive keyword" style="color:#00009f">.include </span><span class="token literal-string string" style="color:#e3116c">&quot;./files/utility.s&quot;</span><br></span></code></pre></div></div>
<p>Un altro aspetto importante è dove comincia e finisce il nostro programma:
<em>nell&#x27;ambiente del corso</em>, il punto di ingresso è la label <code>_main</code> e quello di uscita è la corrispondente istruzione <code>ret</code>.
Per motivi di debugging, che saranno chiari più avanti, si tende a cominciare il programma con una istruzione <code>nop</code>.</p>
<p>Inoltre, la distinzione tra zona <code>.data</code> e <code>.text</code> è importante.
Dato che durante l&#x27;esecuzione sono <em>entrambi</em> caricati in memoria, per motivi di sicurezza il kernel Linux ci impedirà di <em>eseguire</em> indirizzi in <code>.data</code> o di <em>scrivere</em> in indirizzi in <code>.text</code>.
Dimenticarsi di dichiararli porta a eccezioni durante l&#x27;esecuzione.</p>
<p>Infine, l&#x27;assemblatore non vede di buon occhio la mancanza di una riga vuota alla fine del file.
Per evitare messaggi di warning inutili, meglio aggiungerla.</p>
<p>Detto ciò, possiamo quindi comprendere il <a href="/reti-logiche-esercitazioni/2025-26/code/assembler/test-ambiente.s" target="_blank" rel="noopener noreferrer">programma di test</a>, che non fa che stampare &quot;Ok.&quot; a terminale e poi termina:</p>
<div class="language-assembler codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-assembler codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm" style="counter-reset:line-count 0"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token directive keyword" style="color:#00009f">.include </span><span class="token literal-string string" style="color:#e3116c">&quot;./files/utility.s&quot;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token directive keyword" style="color:#00009f">.data</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">messaggio:</span><span class="token plain"> </span><span class="token directive keyword" style="color:#00009f">.ascii </span><span class="token literal-string string" style="color:#e3116c">&quot;Ok.\r&quot;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token directive keyword" style="color:#00009f">.text</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">_main:</span><span class="token plain">  </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">nop</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> messaggio</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> outline</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">ret</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Queste premesse si applicano solo a questo corso</div><div class="admonitionContent_BuS1"><p>Le istruzioni di questa sezione sono relative all&#x27;ambiente del corso.
La direttiva <code>.include &quot;./files/utility.s&quot;</code> ricopia il codice del file <code>utility.s</code>, fornito nell&#x27;ambiente del corso.
Le specifiche dei sottoprogrammi (uso dei registri, <code>\r</code> come carattere di terminazione, etc.) sono conseguenza di come è scritto questo codice, che ha a che fare con scelte fatte da noi, per esempio per mantenere la retrocompatibilità con il vecchio ambiente DOS utilizzato precedentemente sempre in questo corso.
L&#x27;uso di <code>_main</code> e <code>ret</code> (peraltro, senza alcun valore di ritorno), così come il comportamento del terminale, sono anche questi relativi all&#x27;ambiente usato.</p><p>Non sono assolutamente concetti validi in generale, per altri assembler e altri ambienti.
Tenete questo ben presente nel caso vi avvicinaste allo sviluppo di assembler in altri contesti.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="esercizio-11">Esercizio 1.1<a href="#esercizio-11" class="hash-link" aria-label="Link diretto a Esercizio 1.1" title="Link diretto a Esercizio 1.1" translate="no">​</a></h2>
<p>Partiamo da un esercizio con le seguenti specifiche</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1. Leggere messaggio da terminale.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. Convertire le lettere minuscole in maiuscolo.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3. Stampare messaggio modificato.</span><br></span></code></pre></div></div>
<p>Per i passi 1 e 3 possiamo usare i sottoprogrammi di utility <code>inline</code> e <code>outline</code> (<a href="/reti-logiche-esercitazioni/esercitazioni/Assembler/Documentazione/Sottoprogrammi utility">documentazione</a>).
Cominciamo riservando in memoria, nella sezione data, spazio per le due stringhe.</p>
<div class="language-assembler codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-assembler codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token directive keyword" style="color:#00009f">.data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token label function" style="color:#d73a49">msg_in:</span><span class="token plain"> </span><span class="token directive keyword" style="color:#00009f">.fill </span><span class="token plain">80</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token label function" style="color:#d73a49">msg_out:</span><span class="token plain"> </span><span class="token directive keyword" style="color:#00009f">.fill </span><span class="token plain">80</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 0</span><br></span></code></pre></div></div>
<p>Per la lettura useremo</p>
<div class="language-assembler codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-assembler codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token literal-decimal-number number" style="color:#36acaa">$80</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%cx</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> msg_in</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> inline</span><br></span></code></pre></div></div>
<p>Per la scrittura invece useremo</p>
<div class="language-assembler codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-assembler codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> msg_out</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> outline</span><br></span></code></pre></div></div>
<p>Quel che manca ora è il punto 2.
Dobbiamo (capire come) fare diverse cose:</p>
<ul>
<li>ricopiare <code>msg_in</code> in <code>msg_out</code> carattere per carattere</li>
<li>controllare tale carattere, per capire se è una lettera minuscola<!-- -->
<ul>
<li>se sì, cambiare tale carattere nella corrispondente maiuscola</li>
</ul>
</li>
</ul>
<p>Cominciamo dal capire il primo punto, cioè come ricopiare il messaggio, ignorando per ora la gestione dei caratteri minuscoli.</p>
<p>Come scorrere i due vettori? Abbiamo due opzioni: usare un indice per accesso indicizzato, o due puntatori da incrementare.
Anche sulla condizione di terminazione abbiamo due opzioni: fermarsi dopo aver processato il carattere di ritorno carrello <code>\r</code>, o dopo aver processato 80 caratteri.</p>
<p>Per questo esercizio, scegliamo la prima opzione per entrambe le scelte.
Se usassimo C, scriveremmo qualcosa simile a questo:</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">char</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> msg_in</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> msg_out</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  c </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> msg_in</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// si può trasformare c qui</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  msg_out</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token char">&#x27;\r&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>In assembler, questo si può scrivere così:</p>
<div class="language-assembler codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-assembler codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> msg_in</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%esi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> msg_out</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%edi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token literal-decimal-number number" style="color:#36acaa">$0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ecx</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token label function" style="color:#d73a49">loop:</span><span class="token plain">   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">movb</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token register variable" style="color:#36acaa">%esi</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ecx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># si può trasformare %al qui</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">movb</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token register variable" style="color:#36acaa">%edi</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ecx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">inc</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ecx</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">cmp</span><span class="token plain"> </span><span class="token literal-hex-number number" style="color:#36acaa">$0x0d</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># $0x0d è equivalente a $&#x27;\r&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">jne</span><span class="token plain"> loop</span><br></span></code></pre></div></div>
<p>Ci sono diversi aspetti da sottolineare.
Il primo è che nell&#x27;accesso con indice, a differenza del C, abbiamo completo controllo sia di come è calcolato l&#x27;indirizzo di accesso, sia sulla dimensione della lettura in memoria.</p>
<p>Prendiamo il caso di <code>movb (%esi, %ecx), %al</code>.
Ricordiamo che il formato dell&#x27;indirizzazione con indice è <code>offset(%base, %indice, scala)</code>, dove l&#x27;indirizzo è calcolato come <code>offset + %base + (%indice * scala)</code>.
Dunque <code>(%esi, %ecx)</code> è, implicitamente, <code>0(%esi, %ecx, 1)</code>, dove l&#x27;1 indica il fatto che ci spostiamo di un byte alla volta.
Dato l&#x27;indirizzo, però, in abbiamo controllo di quanti byte leggere, questa volta tramite il suffisso <code>b</code> o, implicitamente, tramite la dimensione del registro di destinazione <code>%al</code>.</p>
<p>In C, tutti questi aspetti sono gestiti automaticamente come conseguenza dell&#x27;uso del tipo <code>char</code>, che è appunto di 1 byte.
In assembler, <u>dobbiamo starci attenti noi</u>.
Infatti, il processore esegue le istruzioni senza alcun controllo (né cognizione) su che tipo di dato stiamo cercando di accedere e dove.</p>
<p>Prima di passare al resto del punto 2, vale la pena provare a comporre il programma così com&#x27;è, testarlo ed eseguirlo.
Infatti, è sempre una buona idea trovare i bug quanto prima, e quanto più è semplice il codice scritto tanto più lo è trovare la fonte del bug.
Il codice scritto finora è scaricabile <a href="/reti-logiche-esercitazioni/2025-26/code/assembler/1/maiusc_p1.s" target="_blank" rel="noopener noreferrer">qui</a>, e questo è l&#x27;output che otteniamo provando ad assemblarlo ed eseguirlo.</p>
<div class="language-pwsh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-pwsh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">PS /mnt/c/reti_logiche/assembler&gt; ./assemble.ps1 ./esercitazioni/1/maiusc_p1.s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PS /mnt/c/reti_logiche/assembler&gt; ./esercitazioni/1/maiusc_p1           </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">questo E&#x27; UN test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">questo E&#x27; UN test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PS /mnt/c/reti_logiche/assembler&gt; </span><br></span></code></pre></div></div>
<p>Passiamo adesso ai punti ignorati prima, ossia controllare che il carattere letto sia una minuscola, e nel caso cambiarla in maiuscola.
Per controllare che un carattere sia una lettera minuscola, ci basta ricordare che i caratteri ASCII hanno una codifica binaria ordinata: <code>char c</code> è minuscola se <code>c &gt;= &#x27;a&#x27; &amp;&amp; c &lt;= &#x27;z&#x27;</code>.</p>
<p>Per cambiare invece una minuscola e maiuscola, notiamo sempre dalla tabella ASCII che, per lo stesso motivo, la distanza tra <code>&#x27;a&#x27;</code> e <code>&#x27;A&#x27;</code> è la stessa di qualunque altra coppia di maiuscola-minuscola.
Tale distanza è 32: ci basta infatti sottrarre 32 a una minuscola per ottenere la corrispondente maiuscola, e aggiungere 32 per fare il contrario.
Guardando alla rappresentazione in base 2, notiamo che l&#x27;operazione è (non per caso) ancora più semplice: essendo <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>32</mn><mo>=</mo><msup><mn>2</mn><mn>5</mn></msup></mrow><annotation encoding="application/x-tex">32 = 2^5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">32</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.8141em"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span></span></span></span>, si tratta di mettere il bit in posizione 5 a 0 o 1, usando <code>and</code>, <code>or</code> o <code>xor</code> con maschere appropriate.</p>
<p>Detto ciò, il codice C diventa:</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">char</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> msg_in</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> msg_out</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  c </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> msg_in</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c </span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> </span><span class="token char">&#x27;a&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> c </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> </span><span class="token char">&#x27;z&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    c </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> c </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0xdf</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  msg_out</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token char">&#x27;\r&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>La notazione esadecimale <code>0xdf</code> corrisponde a <code>1101 1111</code>.
Fare un <code>and</code> con tale maschera lascia tutti i bit invariati tranne quello in posizione 5, che viene resettato.
Per esempio</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">      0x63 0110 0011  &#x27;c&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  AND 0xdf 1101 1111</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      --------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    = 0x43 0101 0011  &#x27;C&#x27;</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Il controllo non è opzionale</div><div class="admonitionContent_BuS1"><p>Domanda: se vogliamo che tutte le lettere siano maiuscole, non basta resettare il bit 5 a prescindere, e non fare il controllo?</p><p>Risposta: no, perché ci sono altri caratteri ASCII con il bit 5 a 1 che non sono affatto lettere. Per esempio, il carattere spazio di codifica <code>0x20</code>.</p></div></div>
<p>Questo si traduce nel seguente assembler:</p>
<div class="language-assembler codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-assembler codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> msg_in</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%esi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> msg_out</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%edi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token literal-decimal-number number" style="color:#36acaa">$0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ecx</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token label function" style="color:#d73a49">loop:</span><span class="token plain">   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">movb</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token register variable" style="color:#36acaa">%esi</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ecx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">cmp</span><span class="token plain"> </span><span class="token literal-character number" style="color:#36acaa">$&#x27;a&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">jb</span><span class="token plain"> post_check</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">cmp</span><span class="token plain"> </span><span class="token literal-character number" style="color:#36acaa">$&#x27;z&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">ja</span><span class="token plain"> post_check</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">and</span><span class="token plain"> </span><span class="token literal-hex-number number" style="color:#36acaa">$0xdf</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># 1101 1111 -&gt; l&#x27;and resetta il bit 5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token label function" style="color:#d73a49">post_check:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">movb</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token register variable" style="color:#36acaa">%edi</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ecx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">inc</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ecx</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">cmp</span><span class="token plain"> </span><span class="token literal-hex-number number" style="color:#36acaa">$0x0d</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">jne</span><span class="token plain"> loop</span><br></span></code></pre></div></div>
<p>Notiamo che le due condizione nell&#x27;if vanno rimaneggiate per essere tradotte da C ad assembler, infatti saltiamo a <code>post_check</code>, dopo l&#x27;istruzione di conversione, se le condizioni <em>non</em> sono verificate.</p>
<p>Il codice finale è quindi il seguente, scaricabile <a href="/reti-logiche-esercitazioni/2025-26/code/assembler/1/maiusc.s" target="_blank" rel="noopener noreferrer">qui</a> come file sorgente.</p>
<div class="language-assembler codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-assembler codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm" style="counter-reset:line-count 0"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token directive keyword" style="color:#00009f">.include </span><span class="token literal-string string" style="color:#e3116c">&quot;./files/utility.s&quot;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token directive keyword" style="color:#00009f">.data</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">msg_in:</span><span class="token plain"> </span><span class="token directive keyword" style="color:#00009f">.fill </span><span class="token plain">80</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 0</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">msg_out:</span><span class="token plain"> </span><span class="token directive keyword" style="color:#00009f">.fill </span><span class="token plain">80</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 0</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token directive keyword" style="color:#00009f">.text</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">_main:</span><span class="token plain">  </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">nop</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">punto_1:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token literal-decimal-number number" style="color:#36acaa">$80</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%cx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> msg_in</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> inline</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">nop</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">punto_2:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> msg_in</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%esi</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> msg_out</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%edi</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token literal-decimal-number number" style="color:#36acaa">$0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ecx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">loop:</span><span class="token plain">   </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">movb</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token register variable" style="color:#36acaa">%esi</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ecx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">cmp</span><span class="token plain"> </span><span class="token literal-character number" style="color:#36acaa">$&#x27;a&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">jb</span><span class="token plain"> post_check</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">cmp</span><span class="token plain"> </span><span class="token literal-character number" style="color:#36acaa">$&#x27;z&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">ja</span><span class="token plain"> post_check</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">and</span><span class="token plain"> </span><span class="token literal-hex-number number" style="color:#36acaa">$0xdf</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">post_check:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">movb</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token register variable" style="color:#36acaa">%edi</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ecx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">inc</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ecx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">cmp</span><span class="token plain"> </span><span class="token literal-hex-number number" style="color:#36acaa">$0x0d</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">jne</span><span class="token plain"> loop</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">punto_3:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> msg_out</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> outline</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">nop</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">fine:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">ret</span></span><br></span></code></pre></div></div>
<p>Le label <code>punto_1</code>, <code>punto_2</code>, <code>punto_3</code> e <code>fine</code> sono, come è facile verificare, del tutto opzionali.
Sono però utili ai fini del debugging, che presentiamo ora.</p>
<p>Sono da notare le <code>nop</code> aggiunte prima tra le <code>call</code> alle righe 13 e 33 e le successive label:
queste sono un workaround per ovviare a un problema di <code>gdb</code>, che spiegherò più avanti.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="uso-del-debugger">Uso del debugger<a href="#uso-del-debugger" class="hash-link" aria-label="Link diretto a Uso del debugger" title="Link diretto a Uso del debugger" translate="no">​</a></h2>
<blockquote>
<p><em>Debugging is like being the detective in a crime movie where you are also the murderer.</em> <br>
<a href="https://twitter.com/fortes/status/399339918213652480" target="_blank" rel="noopener noreferrer">Filipe Fortes</a></p>
</blockquote>
<p>La parola <em>debugger</em> suggerisce da sé che sia uno strumento per rimuovere bug ma, purtroppo, questo non vuol dire che lo strumento li rimuove da solo.
Infatti, quello in cui ci è utile il debugger è <em>trovare</em> i bug, seguendo l&#x27;esecuzione del programma passo passo e controllando il suo stato per capire dov&#x27;è che il suo comportamento differisce da quanto ci aspettiamo.
Da lì, spesso indagando a ritroso e con un po&#x27; di intuito, si può trovare le istruzioni incriminate e correggerle.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Uno strumento per essere più efficienti</div><div class="admonitionContent_BuS1"><p>Domanda: sembra complicato, non è più facile rileggere il codice?</p><p>Risposta: sì, lo è. Ma, in genere, quando basta rileggere è perché si è fatto un errore di digitazione, non di ragionamento. Saper usare il debugger significa sapersi tirare fuori <em>velocemente</em> da errori che richiederebbero rileggere <em>a fondo</em> tutto il codice.</p></div></div>
<p>Il debugger che usiamo è <code>gdb</code>, che funziona da linea di comando.
Questo parte da un binario eseguibile, che verrà eseguito passo passo come da noi indicato.</p>
<p>Per semplicità d&#x27;uso, l&#x27;ambiente ha uno script <code>debug.ps1</code>, da lanciare con</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./debug.ps1 nome-eseguibile</span><br></span></code></pre></div></div>
<p>Lo script fa dei controlli, tra cui assicurarsi che si sia passato <em>l&#x27;eseguibile</em> e non <em>il sorgente</em>, lancia il debugger con alcuni comandi tipici già inseriti (imposta un breakpoint a <code>_main</code> e lancia il programma), e ne definisce altri per comodità d&#x27;uso (<code>rr</code> e <code>qq</code>, per riavviare il programma o uscire senza dare conferma).</p>
<p>Vediamo come usarlo, lanciando il debugger sul programma realizzato nell&#x27;esercizio precedente.
Dopo un sezione di presentazione del programma, abbiamo del testo del tipo</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Breakpoint 1, _main () at /mnt/c/reti_logiche/assembler/lezioni/1/maiusc.s:9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">9           nop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) </span><br></span></code></pre></div></div>
<p>Un breakpoint è un punto del programma, in genere una linea di codice, dove si desidera che il debugger fermi l&#x27;esecuzione.
Avendo impostato il primo breakpoint a <code>_main</code>, vediamo infatti che il programma si ferma alla prima istruzione relativa, che è appunto la <code>nop</code>.
Importante: il debugger si ferma <em>prima</em> dell&#x27;esecuzione della riga indicata.</p>
<p>Vediamo poi che il debugger richiede input: infatti possiamo interagire con il debugger <em>solo</em> quando il programma è fermo.
Possiamo fare tre cose in particolare:</p>
<ul>
<li>Osservare il contenuto di registri e indirizzi di memoria (<code>info registers</code> e <code>x</code>),</li>
<li>Impostare nuovi breakpoints (<code>break</code>),</li>
<li>Continuare l&#x27;esecuzione in modo controllato (<code>step</code> e <code>next</code>) o fino al prossimo breakpoint (<code>continue</code>)</li>
</ul>
<p>Vediamoli in azione. Cominciamo con il proseguire fino alla riga 13.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Breakpoint 1, _main () at /mnt/c/reti_logiche/assembler/lezioni/1/maiusc.s:9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">9           nop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) step</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">punto_1 () at /mnt/c/reti_logiche/assembler/lezioni/1/maiusc.s:11</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">11          mov $80, %cx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">12          lea msg_in, %ebx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">13          call inline</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) </span><br></span></code></pre></div></div>
<p>Notiamo che <code>gdb</code> accetta sia comandi per esteso sia abbreviati, per esempio per <code>step</code> va bene anche <code>s</code>.
Con questi 3 step, abbiamo eseguito le prime tre istruzioni ma <em>non</em> la <code>call</code> a riga 13.
Possiamo controllare lo stato dei registri usando <code>info registers</code>, abbreviabile con <code>i r</code>.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) i r</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">eax            0x66                102</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ecx            0x50                80</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">edx            0x2d                45</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ebx            0x56559066          1448448102</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">esp            0xffffc06c          0xffffc06c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ebp            0xffffc078          0xffffc078</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">esi            0xf7fb2000          -134537216</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">edi            0xf7fb2000          -134537216</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">eip            0x5655676e          0x5655676e &lt;punto_1+10&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">eflags         0x282               [ SF IF ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cs             0x23                35</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ss             0x2b                43</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ds             0x2b                43</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">es             0x2b                43</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fs             0x0                 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gs             0x63                99</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) </span><br></span></code></pre></div></div>
<blockquote>
<p>Notare: è <em>un caso</em> trovare i registri già inizializzati a 0, come qui mostrato.</p>
</blockquote>
<p>Questo ci da info su diversi registri, molti dei quali non ci interessano.
Possiamo specificare quali registri vogliamo, anche di dimensioni minori di 32 bit.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) i r cx ebx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cx             0x50                80</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ebx            0x56559066          1448448102</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb)</span><br></span></code></pre></div></div>
<p>La prossima istruzione, se lasciamo il programma eseguire, è una <code>call</code>.
In questo caso, abbiamo due scelte: proseguire <em>nella</em> chiamata al sottoprogramma (andando quindi alle istruzioni di <code>inline</code>, definite in <code>utility.s</code>), od <em>oltre</em> la chiamata, andando quindi direttamente alla riga 14.
Questa è la differenza fra <code>step</code> e <code>next</code>: <code>step</code> prosegue dentro i sottoprogrammi, mentre <code>next</code> prosegue finché il sottoprogramma non ritorna.</p>
<p>È qui però che è rilevante la presenza della <code>nop</code> aggiunta a riga 14, prima di <code>parte_2</code>.
<code>next</code> infatti continua fino alla prossima istruzione della <em>sezione corrente</em> del codice, che è in questo caso <code>punto_1</code>.
Se però tale sezione termina subito dopo la call, e non esiste quindi una successiva istruzione nella stessa sezione, allora usando <code>next</code> il programma continuerà fino alla terminazione.
Aggiungere la <code>nop</code> ovvia al problema essendo una successiva istruzione ancora parte di <code>punto_1</code>.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">13          call inline</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">questo e&#x27; un test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">14          nop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) </span><br></span></code></pre></div></div>
<p>Da notare che &quot;questo e&#x27; un test&quot; è proprio l&#x27;input inserito da tastiera durante l&#x27;esecuzione di <code>inline</code>.</p>
<p>Eseguire il programma un&#x27;istruzione alla volta può risultare molto lento.
Per esempio, quando vogliamo osservare cosa succede a una particolare iterazione di un loop.
Per questo ci aiutano <code>break</code> e <code>continue</code>.
Nell&#x27;esempio che segue, sono usati per raggiungere rapidamente la quarta iterazione.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) b loop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Breakpoint 2 at 0x56556785: file /mnt/c/reti_logiche/assembler/lezioni/1/maiusc.s, line 20.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Continuing.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Breakpoint 2, loop () at /mnt/c/reti_logiche/assembler/lezioni/1/maiusc.s:20</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">20          movb (%esi, %ecx), %al</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) i r ecx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ecx            0x0                 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Continuing.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Breakpoint 2, loop () at /mnt/c/reti_logiche/assembler/lezioni/1/maiusc.s:20</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">20          movb (%esi, %ecx), %al</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) i r ecx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ecx            0x1                 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Continuing.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Breakpoint 2, loop () at /mnt/c/reti_logiche/assembler/lezioni/1/maiusc.s:20</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">20          movb (%esi, %ecx), %al</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Continuing.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Breakpoint 2, loop () at /mnt/c/reti_logiche/assembler/lezioni/1/maiusc.s:20</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">20          movb (%esi, %ecx), %al</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) i r ecx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ecx            0x3                 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) </span><br></span></code></pre></div></div>
<p>L&#x27;ultima operazione base da vedere è osservare valori in memoria.
Il comando <code>x</code> sta per <em>examine memory</em> ma, a differenza degli altri comandi, esiste solo in forma abbreviata.
Il comando ha 4 argomenti:</p>
<ul>
<li><code>N</code>, il numero di &quot;celle&quot; consecutive della memoria da leggere;</li>
<li><code>F</code>, il formato con cui interpretare il contenuto di tali &quot;celle&quot;, per esempio <code>d</code> per decimale e <code>c</code> per ASCII;</li>
<li><code>U</code>, la dimensione di ciascuna &quot;cella&quot;: <code>b</code> per 1 byte, <code>h</code> per 2 byte, <code>w</code> per 4 byte;</li>
<li><code>addr</code>, l&#x27;indirizzo in memoria da cui cominciare la lettura.</li>
</ul>
<p>Il formato del comando è <code>x/NFU addr</code>.
Gli argomenti <code>N</code>, <code>F</code> e <code>U</code> sono, di default, <em>gli ultimi utilizzati</em>. Questo è infatti un comando <em>con memoria</em>.
Quando non sono specificati, si dovrà omettere anche lo <code>/</code>.
L&#x27;argomento <code>addr</code> si può passare come</p>
<ul>
<li>costante esadecimale, per esempio <code>x 0x56559066</code>;</li>
<li>label preceduta da <code>&amp;</code>, per esempio <code>x &amp;msg_in</code>;</li>
<li>registro preceduto da <code>$</code>, per esempio <code>x $esi</code>;</li>
<li>espressione basata su aritmetica dei puntatori, per esempio <code>x (int*)&amp;msg_in+$ecx</code>.</li>
</ul>
<p>L&#x27;ultima opzione è abbastanza ostica da sfruttare, vedremo come evitarla con una tecnica alternativa.</p>
<p>Vediamo degli esempi tornando al debugging del nostro primo programma:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) x/20cb &amp;msg_in</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0x56559066:     113 &#x27;q&#x27; 117 &#x27;u&#x27; 101 &#x27;e&#x27; 115 &#x27;s&#x27; 116 &#x27;t&#x27; 111 &#x27;o&#x27; 32 &#x27; &#x27;  101 &#x27;e&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0x5655906e:     39 &#x27;\&#x27;&#x27; 32 &#x27; &#x27;  117 &#x27;u&#x27; 110 &#x27;n&#x27; 32 &#x27; &#x27;  116 &#x27;t&#x27; 101 &#x27;e&#x27; 115 &#x27;s&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0x56559076:     116 &#x27;t&#x27; 13 &#x27;\r&#x27; 10 &#x27;\n&#x27; 0 &#x27;\000&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) x/20cb &amp;msg_out</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0x565590b6:     81 &#x27;Q&#x27;  85 &#x27;U&#x27;  69 &#x27;E&#x27;  0 &#x27;\000&#x27;        0 &#x27;\000&#x27;        0 &#x27;\000&#x27;        0 &#x27;\000&#x27;      0 &#x27;\000&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0x565590be:     0 &#x27;\000&#x27;        0 &#x27;\000&#x27;        0 &#x27;\000&#x27;        0 &#x27;\000&#x27;        0 &#x27;\000&#x27;     0 &#x27;\000&#x27; 0 &#x27;\000&#x27;        0 &#x27;\000&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0x565590c6:     0 &#x27;\000&#x27;        0 &#x27;\000&#x27;        0 &#x27;\000&#x27;        0 &#x27;\000&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) x/20cb $esi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0x56559066:     113 &#x27;q&#x27; 117 &#x27;u&#x27; 101 &#x27;e&#x27; 115 &#x27;s&#x27; 116 &#x27;t&#x27; 111 &#x27;o&#x27; 32 &#x27; &#x27;  101 &#x27;e&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0x5655906e:     39 &#x27;\&#x27;&#x27; 32 &#x27; &#x27;  117 &#x27;u&#x27; 110 &#x27;n&#x27; 32 &#x27; &#x27;  116 &#x27;t&#x27; 101 &#x27;e&#x27; 115 &#x27;s&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0x56559076:     116 &#x27;t&#x27; 13 &#x27;\r&#x27; 10 &#x27;\n&#x27; 0 &#x27;\000&#x27;</span><br></span></code></pre></div></div>
<p>In questo programma usiamo un&#x27;indirizzazione con indice per leggere e scrivere lettere nei vettori.
Infatti, vediamo che il registro <code>esi</code> punta sempre alla prima lettera del vettore, e abbiamo bisogno di usare anche <code>ecx</code> per sapere qual è la lettera che il programma intende processare in questa iterazione del loop.</p>
<p>Per usare la sintassi menzionata sopra, dovremmo ricordarci come tradurre <code>(%esi, %ecx)</code> in un&#x27;espressione di aritmetica dei puntatori.
Una alternativa molto agevole è invece la scomposizione dell&#x27;istruzione <code>movb (%esi, %ecx), %al</code> in due: una <code>lea</code> e una <code>mov</code>.
Infatti, ricordiamo che la <code>lea</code> ci permette di calcolare un indirizzo, anche se con composto con indice, e salvarlo in un registro.
Possiamo per esempio scrivere</p>
<div class="language-assembler codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-assembler codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">lea</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token register variable" style="color:#36acaa">%esi</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ecx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">movb</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><br></span></code></pre></div></div>
<p>In questo modo, l&#x27;indirizzo della lettera da leggere sarà contenuto in <code>ebx</code>, cosa che possiamo sfruttare nel debugger con il comando <code>x/1cb $ebx</code>.</p>
<p>Come ultime indicazioni sul debugger, menzioniamo il comando <code>layout regs</code>, che mostra a ogni passo i registri e il codice da eseguire, e i comandi <code>r</code>, per riavviare il programma e <code>q</code>, per terminare il debugger.
Le versioni <code>qq</code> e <code>rr</code>, <em>definite ad hoc nell&#x27;ambiente di questo corso</em>, fanno lo stesso senza richiedere conferma.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="domande-a-risposta-multipla">Domande a risposta multipla<a href="#domande-a-risposta-multipla" class="hash-link" aria-label="Link diretto a Domande a risposta multipla" title="Link diretto a Domande a risposta multipla" translate="no">​</a></h2>
<p>Vedremo ora delle domande a risposta multipla, riguardanti assembler e aritmetica.
Prima però un disclaimer, che sembra purtroppo necessario.</p>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>Studiare <em>per l&#x27;esame</em>, non <em>l&#x27;esame</em></div><div class="admonitionContent_BuS1"><p>Le domande e gli esercizi dell&#x27;esame di Reti Logiche sono pensati perché, con la dovuta conoscenza e comprensione degli argomenti del programma del corso, sia agevole arrivare alla risposta/soluzione.
Cioè <code>domanda + conoscenze =&gt; risposta</code>.</p><p>È invece difficile e controproducente cercare di fare il contrario: non basta fissare domande e risposte per riuscirne a derivare conoscenze di alcun tipo.
Anzi, le conoscenze necessarie sono quasi del tutto assenti dal testo delle domande e delle risposte, quelle le trovate nel <em>materiale di studio</em> del corso.</p><p>Questo disclaimer è dato nella speranza di scongiurare il frequente caso di studenti che ignorano lezioni, dispense, libri di testo e ricevimenti, cercando invece di trovare autonomamente &quot;strategie più dirette&quot;.
Ripetendo poi l&#x27;esame più e più volte.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="15072025-domanda-9">15/07/2025, domanda 9<a href="#15072025-domanda-9" class="hash-link" aria-label="Link diretto a 15/07/2025, domanda 9" title="Link diretto a 15/07/2025, domanda 9" translate="no">​</a></h3>
<blockquote>
<div class="language-assembler codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-assembler codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> 0x00</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 0xFF</span><br></span></code></pre></div></div>
<p>Nell&#x27;architettura x86 l&#x27;istruzione scritta sopra:</p>
<ol type="a"><li> copia la costante <code>0x00</code> (su 8 bit) nella cella di memoria di indirizzo <code>0xFF</code> </li><li> copia il contenuto della cella di memoria di indirizzo <code>0x00</code> dentro la cella di indirizzo <code>0xFF</code> </li><li> viene accettata dall&#x27;assemblatore solo se completata con un suffisso (<code>b</code>,<code>w</code>,<code>l</code>) </li><li> nessuna delle precedenti </li></ol>
</blockquote>
<p>Per prima cosa, ricordiamo le sintassi per operandi <em>immediati</em>: con <code>$0x00</code> si rappresenta il <em>byte</em> <code>0x00</code>, mentre con solo <code>0x00</code> si rappresenta <em>l&#x27;indirizzo</em> <code>0x00</code>.
Verrebbe quindi da rispondere <em>b</em>, o <em>c</em> se ci si accorge che non c&#x27;è nulla a indicare la dimensione dello spostamento.</p>
<p>Tuttavia il dubbio è inutile, perché la <code>mov</code> nell&#x27;architettura x86 non supporta affatto lo spostamento tra un indirizzo di memoria a un altro;
serve l&#x27;istruzione stringa <code>movs</code> per farlo (che richiede infatti di esplicitare sempre <code>b</code>,<code>w</code> o <code>l</code>).
La risposta giusta è quindi la <em>d</em>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="24062025-domanda-9">24/06/2025, domanda 9<a href="#24062025-domanda-9" class="hash-link" aria-label="Link diretto a 24/06/2025, domanda 9" title="Link diretto a 24/06/2025, domanda 9" translate="no">​</a></h3>
<blockquote>
<div class="language-assembler codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-assembler codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token label function" style="color:#d73a49">var0:</span><span class="token plain"> </span><span class="token directive keyword" style="color:#00009f">.byte </span><span class="token plain">0x30</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 0x31</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token label function" style="color:#d73a49">var1:</span><span class="token plain"> </span><span class="token directive keyword" style="color:#00009f">.word </span><span class="token plain">0x100</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 0x120</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token label function" style="color:#d73a49">var2:</span><span class="token plain"> </span><span class="token directive keyword" style="color:#00009f">.long </span><span class="token plain">var0+3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> var2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token register variable" style="color:#36acaa">%ebx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><br></span></code></pre></div></div>
<p>Alla fine del segmento di codice scritto sopra, <code>al</code> contiene</p>
<ol type="a"><li> <code>0x01</code> </li><li> <code>0x20</code> </li><li> <code>var0+3</code> </li><li> Nessuna delle precedenti </li></ol>
</blockquote>
<p>Questo è un genere di esercizio che può trarre in inganno perché la risposta <em>non si trova affatto</em> sempre allo stesso modo.</p>
<p>Ciò che è <em>in comune</em> sono le cose che vanno sapute fare:</p>
<ul>
<li>ricostruire il layout in memoria dei dati, e quindi la corrispondenza tra un indirizzo e il byte corrispondente</li>
<li>distinguere le varianti di operandi immediati e forme di indirizzamento</li>
<li>distinguere <code>lea</code> e <code>mov</code></li>
</ul>
<p>A fini didattici, svolgerò per intero la ricostruzione del layout in memoria, <em>poi</em> guarderò a cosa fa il programma.
All&#x27;esame, fate il contrario.</p>
<p>Cominciamo dalla prima riga: all&#x27;indirizzo <code>var0</code> c&#x27;è il byte <code>0x30</code>, a <code>var0+1</code> il byte <code>0x31</code>.</p>
<p>Passiamo quindi alla seconda riga: deriviamo innanzitutto che, se questi nuovi dati cominciano a <code>var1</code>, allora dev&#x27;essere <code>var1 = var0 + 2</code>.</p>
<p>In questa riga i dati sono <em>word</em>, ossia valori scritti su due byte.
Ricordiamo che l&#x27;architettura è <em>little-endian</em>, ossia <strong>little end first</strong>: il byte meno significativo viene scritto prima.</p>
<p>Dunque, la word <code>0x0100</code> (il primo <code>0</code> è implicito) viene suddivisa nei due byte <code>0x01</code> e <code>0x00</code>, e salvati in memoria nell&#x27;ordine <code>0x00</code> (a <code>var0 + 2</code>) <code>0x01</code> (a <code>var0 + 3</code>).
Seguono, per la stessa ragione, <code>0x20</code> (a <code>var0 + 4</code>) e <code>0x01</code> (a <code>var0 + 5</code>).</p>
<p>Infine, alla terza riga abbiamo <code>var2: .long var0+3</code>: questo è il <em>valore di un indirizzo</em>, non il <em>contenuto di un indirizzo</em>.
Questo valore verrà calcolato <em>poi</em> dall&#x27;assemblatore (o altri... è complicato) in base all&#x27;indirizzo a partire dal quale verrà allocata questa sezione <code>.data</code>.
Dunque non possiamo prevederne il valore a priori, ma possiamo prevedere che punterà al byte più significativo della prima word in <code>var1</code>: <code>0x01</code>.</p>
<p>Ora abbiamo un&#x27;idea completa di questa sezione <code>.data</code>, e possiamo passare allo svolgimento del programma.</p>
<p>La prima istruzione è <code>mov var2, %ebx</code>, dove il primo operando è un <em>indirizzo immediato</em>.
Quello che fa la <code>mov</code>, quindi, è copiare il <em>valore all&#x27;indirizzo <code>var2</code></em> nel registro <code>%ebx</code>.
Dato che <code>%ebx</code> è a 32 bit, tale copia sarà a 32 bit (cioè, è implicitamente una <code>movl</code>).
Dunque, <code>%ebx</code> conterrà l&#x27;indirizzo <code>var0+3</code>.</p>
<p>La seconda istruzione è <code>mov (%ebx), %al</code>, dove il primo operando è un <em>indirizzamento tramite registro</em>.
Quello che fa la <code>mov</code>, quindi, è copiare il <em>valore all&#x27;indirizzo contenuto in <code>%ebx</code></em> in <code>%al</code>.
Dato che <code>%al</code> è a 8 bit, questa è implicitamente una <code>movb</code>.
Dunque, è <code>0x01</code> che viene copiato in <code>%al</code>.</p>
<p>La risposta corretta è la <em>a</em>.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Andare dritti al punto</div><div class="admonitionContent_BuS1"><p>Per svolgere il ragionamento di sopra, e tutte le sue varianti, c&#x27;è bisogno di padroneggiare i <em>pochi</em> concetti elencati sopra.</p><p>In un vero contesto d&#x27;esame, è consigliato partire dal programma (<em>poche</em> istruzioni) e svolgere direttamente e solo i calcoli richiesti da tale programma.
Per esempio, in questo esercizio è stato del tutto inutile discutere dei byte a <code>var0</code> e della seconda word di <code>var1</code>.</p></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Debugger come strumento di verifica</div><div class="admonitionContent_BuS1"><p>Il modo più diretto per controllare un esercizio di questo tipo è assemblarlo e vedere con il debugger il contenuto di registri e memoria.
Per esempio, con il comando <code>x/4xb &amp;var1</code> si può verificare che i byte a partire da <code>var1</code> sono proprio quelli detti sopra.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="09092025-domanda-3">09/09/2025, domanda 3<a href="#09092025-domanda-3" class="hash-link" aria-label="Link diretto a 09/09/2025, domanda 3" title="Link diretto a 09/09/2025, domanda 3" translate="no">​</a></h3>
<blockquote>
<div class="language-assembler codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-assembler codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token op-code keyword" style="color:#00009f">add</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%bl</span><br></span></code></pre></div></div>
<p>Dopo l&#x27;istruzione riportata sopra, quale delle seguenti configurazioni degli operandi scrive 1 dentro <code>OF</code>, e 1 dentro <code>CF</code>?</p>
<ol type="a"><li> al = <code>0100_0000</code>, bl = <code>0100_0000</code> </li><li> al = <code>1000_0000</code>, bl = <code>1000_0000</code> </li><li> al = <code>1111_1111</code>, bl = <code>0000_0001</code> </li><li> Nessuna delle precedenti </li></ol>
</blockquote>
<p>Per rispondere, ricapitoliamo come si comportano l&#x27;istruzione <code>add</code> e i flag <code>OF</code> e <code>CF</code>.</p>
<p>Si parte dal fatto che la somma di numeri naturali e numeri interi in complemento alla radice (CR) eseguono <em>esattamente le stesse operazioni</em>.
Quindi abbiamo una sola istruzione <code>add</code> che va usata sia che gli operandi vadano interpretati come naturali, sia che vadano interpretati come interi.</p>
<p>Per il processore, però, non c&#x27;è nulla che indichi se siamo nell&#x27;uno o nell&#x27;altro caso.
Dunque, i flag relativi vengono popolati in ogni caso, e sta a noi controllare i flag giusti in base all&#x27;operazione svolta.</p>
<p>Il flag <code>CF</code> viene settato a 1 (0 altrimenti) se la somma, interpretata come somma fra naturali, produce riporto.
In altre parole, se il risultato naturale non sta sul numero di bit previsto, in questo caso 8, che può contenere solo naturali tra <code>0</code> e <code>255</code>.
Questo è il caso delle risposte <em>b</em> e <em>c</em>: per <em>b</em> abbiamo <code>128 + 128 = 256</code>, per <em>c</em> <code>255 + 1 = 256</code>, dove <code>256 = 1_0000_0000</code> non sta su 8 bit.
Invece, per <em>a</em> abbiamo <code>64 + 64 = 128</code>, ossia <code>1000_0000</code>, che sta tranquillamente su 8 bit.</p>
<p>Il flag <code>OF</code> viene settato a 1 (0 altrimenti) se la somma, interpretata come somma fra interi, produce overflow.
In altre parole, se il risultato intero non sta sul numero di bit previsto, in questo caso 8, che può contenere solo interi (in CR) tra <code>-128</code> e <code>+127</code>.
Questo è il caso delle risposte <em>a</em> e <em>b</em>: per <em>a</em> abbiamo <code>64 + 64 = 128</code>, che in CR si rappresenta con <code>0_1000_0000</code>, per <em>b</em> abbiamo <code>-128 + (-128) = -256</code>, che in CR si rappresenta come <code>1_0000_000</code>.
Invece, per <em>c</em> abbiamo <code>-1 + 1 = 0</code>, ossia <code>0000_0000</code>.</p>
<p>Dato che la <em>b</em> verifica entrambi i criteri, è la risposta giusta.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="esercizi-per-casa">Esercizi per casa<a href="#esercizi-per-casa" class="hash-link" aria-label="Link diretto a Esercizi per casa" title="Link diretto a Esercizi per casa" translate="no">​</a></h2>
<p>Parte fondamentale delle esercitazioni è <em>fare pratica</em>.
Per questo, vengono lasciati alcuni esercizi per casa.
Le soluzioni di alcuni di questi saranno discusse nelle esercitazioni successive.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="esercizio-12-istruzioni-stringa">Esercizio 1.2: istruzioni stringa<a href="#esercizio-12-istruzioni-stringa" class="hash-link" aria-label="Link diretto a Esercizio 1.2: istruzioni stringa" title="Link diretto a Esercizio 1.2: istruzioni stringa" translate="no">​</a></h3>
<p>L&#x27;esercizio 1.1 compie un&#x27;operazione ripetuta su vettori.
Legge da un vettore, una cella alla volta, ne manipola il contenuto, poi lo scrive su un altro vettore.
Questo genere di operazioni è adatto per l&#x27;uso delle <em>istruzioni stringa</em>.
Riscrivere quindi il programma sfruttando questo set di istruzioni:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1. Leggere messaggio da terminale.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. Convertire le lettere minuscole in maiuscolo, usando le istruzioni stringa.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3. Stampare messaggio modificato.</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="esercizi-13-e-14">Esercizi 1.3 e 1.4<a href="#esercizi-13-e-14" class="hash-link" aria-label="Link diretto a Esercizi 1.3 e 1.4" title="Link diretto a Esercizi 1.3 e 1.4" translate="no">​</a></h3>
<p>Scrivere dei programmi che si comportano come gli esercizi 1.1 e 1.2, tranne che per il fatto di convertire da maiuscolo in minuscolo anziché il contrario.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="esercizio-15">Esercizio 1.5<a href="#esercizio-15" class="hash-link" aria-label="Link diretto a Esercizio 1.5" title="Link diretto a Esercizio 1.5" translate="no">​</a></h3>
<p>Scrivere un programma che, a partire dalla sezione <code>.data</code> che segue (e scaricabile <a href="/reti-logiche-esercitazioni/2025-26/code/assembler/1/per-casa/conta_num.s" target="_blank" rel="noopener noreferrer">qui</a>), conta e stampa il numero di occorrenze di <code>numero</code> in <code>array</code>.</p>
<div class="language-assembler codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-assembler codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token directive keyword" style="color:#00009f">.include </span><span class="token literal-string string" style="color:#e3116c">&quot;./files/utility.s&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token directive keyword" style="color:#00009f">.data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token label function" style="color:#d73a49">array:</span><span class="token plain">      </span><span class="token directive keyword" style="color:#00009f">.word </span><span class="token plain">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 256</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 256</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 512</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 42</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 2048</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 1024</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token label function" style="color:#d73a49">array_len:</span><span class="token plain">  </span><span class="token directive keyword" style="color:#00009f">.long </span><span class="token plain">9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token label function" style="color:#d73a49">numero:</span><span class="token plain">     </span><span class="token directive keyword" style="color:#00009f">.word </span><span class="token plain">1</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="esercizio-16">Esercizio 1.6<a href="#esercizio-16" class="hash-link" aria-label="Link diretto a Esercizio 1.6" title="Link diretto a Esercizio 1.6" translate="no">​</a></h3>
<p>Quello che segue (e scaricabile <a href="/reti-logiche-esercitazioni/2025-26/code/assembler/1/per-casa/conta_num_debug.s" target="_blank" rel="noopener noreferrer">qui</a>) è un tentativo di soluzione dell&#x27;esercizio precedente.
Contiene tuttavia uno o più bug. Trovarli e correggerli.</p>
<div class="language-assembler codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-assembler codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm" style="counter-reset:line-count 0"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token directive keyword" style="color:#00009f">.include </span><span class="token literal-string string" style="color:#e3116c">&quot;./files/utility.s&quot;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token directive keyword" style="color:#00009f">.data</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">array:</span><span class="token plain">      </span><span class="token directive keyword" style="color:#00009f">.word </span><span class="token plain">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 256</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 256</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 512</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 42</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 2048</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 1024</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 0</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">array_len:</span><span class="token plain">  </span><span class="token directive keyword" style="color:#00009f">.long </span><span class="token plain">9</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">numero:</span><span class="token plain">     </span><span class="token directive keyword" style="color:#00009f">.word </span><span class="token plain">1</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token directive keyword" style="color:#00009f">.text</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">_main:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">nop</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token literal-decimal-number number" style="color:#36acaa">$0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%cl</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> numero</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ax</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token literal-decimal-number number" style="color:#36acaa">$0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%esi</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">comp:</span><span class="token plain"> </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">cmp</span><span class="token plain"> array_len</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%esi</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">je</span><span class="token plain"> fine</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">cmpw</span><span class="token plain"> array</span><span class="token punctuation" style="color:#393A34">(</span><span class="token register variable" style="color:#36acaa">%esi</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%ax</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">jne</span><span class="token plain"> poi</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">inc</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%cl</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">poi:</span><span class="token plain">  </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">inc</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%esi</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">jmp</span><span class="token plain"> comp</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token label function" style="color:#d73a49">fine:</span><span class="token plain"> </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">mov</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%cl</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token register variable" style="color:#36acaa">%al</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">call</span><span class="token plain"> outdecimal_byte</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token op-code keyword" style="color:#00009f">ret</span></span><br></span></code></pre></div></div></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Pagina del documento"><a class="pagination-nav__link pagination-nav__link--prev" href="/reti-logiche-esercitazioni/category/esercitazioni"><div class="pagination-nav__sublabel">Precedente</div><div class="pagination-nav__label">Esercitazioni</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/reti-logiche-esercitazioni/esercitazioni/Assembler/Esercitazioni/Esercitazione 2"><div class="pagination-nav__sublabel">Successivo</div><div class="pagination-nav__label">Esercitazione 2</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#premesse-per-programmi-nellambiente-del-corso" class="table-of-contents__link toc-highlight">Premesse per programmi nell&#39;ambiente del corso</a></li><li><a href="#esercizio-11" class="table-of-contents__link toc-highlight">Esercizio 1.1</a></li><li><a href="#uso-del-debugger" class="table-of-contents__link toc-highlight">Uso del debugger</a></li><li><a href="#domande-a-risposta-multipla" class="table-of-contents__link toc-highlight">Domande a risposta multipla</a><ul><li><a href="#15072025-domanda-9" class="table-of-contents__link toc-highlight">15/07/2025, domanda 9</a></li><li><a href="#24062025-domanda-9" class="table-of-contents__link toc-highlight">24/06/2025, domanda 9</a></li><li><a href="#09092025-domanda-3" class="table-of-contents__link toc-highlight">09/09/2025, domanda 3</a></li></ul></li><li><a href="#esercizi-per-casa" class="table-of-contents__link toc-highlight">Esercizi per casa</a><ul><li><a href="#esercizio-12-istruzioni-stringa" class="table-of-contents__link toc-highlight">Esercizio 1.2: istruzioni stringa</a></li><li><a href="#esercizi-13-e-14" class="table-of-contents__link toc-highlight">Esercizi 1.3 e 1.4</a></li><li><a href="#esercizio-15" class="table-of-contents__link toc-highlight">Esercizio 1.5</a></li><li><a href="#esercizio-16" class="table-of-contents__link toc-highlight">Esercizio 1.6</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Raffaele Zippo. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>