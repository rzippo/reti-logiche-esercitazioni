<!doctype html>
<html lang="it" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-esercitazioni/Verilog/Esercitazioni/Esercitazione 1" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.6.1">
<title data-rh="true">Esercitazione 1 | Esercitazioni di Reti Logiche</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://your-docusaurus-site.example.com/reti-logiche-esercitazioni/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://your-docusaurus-site.example.com/reti-logiche-esercitazioni/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://your-docusaurus-site.example.com/reti-logiche-esercitazioni/esercitazioni/Verilog/Esercitazioni/Esercitazione 1"><meta data-rh="true" property="og:locale" content="it"><meta data-rh="true" name="docusaurus_locale" content="it"><meta data-rh="true" name="docsearch:language" content="it"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Esercitazione 1 | Esercitazioni di Reti Logiche"><link data-rh="true" rel="icon" href="/reti-logiche-esercitazioni/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://your-docusaurus-site.example.com/reti-logiche-esercitazioni/esercitazioni/Verilog/Esercitazioni/Esercitazione 1"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/reti-logiche-esercitazioni/esercitazioni/Verilog/Esercitazioni/Esercitazione 1" hreflang="it"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/reti-logiche-esercitazioni/esercitazioni/Verilog/Esercitazioni/Esercitazione 1" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://X6QFHIGLL7-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/reti-logiche-esercitazioni/blog/rss.xml" title="Esercitazioni di Reti Logiche RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/reti-logiche-esercitazioni/blog/atom.xml" title="Esercitazioni di Reti Logiche Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GHFPG7JFTZ"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-GHFPG7JFTZ",{anonymize_ip:!0})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Esercitazioni di Reti Logiche" href="/reti-logiche-esercitazioni/opensearch.xml">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/reti-logiche-esercitazioni/assets/css/styles.167e4433.css">
<script src="/reti-logiche-esercitazioni/assets/js/runtime~main.fde516bc.js" defer="defer"></script>
<script src="/reti-logiche-esercitazioni/assets/js/main.f468d784.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Passa al contenuto principale"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Passa al contenuto principale</a></div><nav aria-label="Principale" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Attiva/disattiva la barra di navigazione" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/reti-logiche-esercitazioni/"><div class="navbar__logo"><img src="/reti-logiche-esercitazioni/img/logo.png" alt="Reti Logiche" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/reti-logiche-esercitazioni/img/logo.png" alt="Reti Logiche" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Esercitazioni di Reti Logiche</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/reti-logiche-esercitazioni/">Esercitazioni</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Passa dalla modalità scura a quella chiara (currently modalità luce)" aria-label="Passa dalla modalità scura a quella chiara (currently modalità luce)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Cerca (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Cerca</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Torna indietro all&#x27;inizio" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Barra laterale dei documenti" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/reti-logiche-esercitazioni/">Esercitazioni di Reti Logiche</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/reti-logiche-esercitazioni/esercitazioni/Introduzione">Introduzione</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/reti-logiche-esercitazioni/category/assembler">Assembler</a><button aria-label="Expand sidebar category &#x27;Assembler&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/reti-logiche-esercitazioni/category/verilog">Verilog</a><button aria-label="Collapse sidebar category &#x27;Verilog&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/reti-logiche-esercitazioni/category/esercitazioni-1">Esercitazioni</a><button aria-label="Collapse sidebar category &#x27;Esercitazioni&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/reti-logiche-esercitazioni/esercitazioni/Verilog/Esercitazioni/Esercitazione 1">Esercitazione 1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/reti-logiche-esercitazioni/esercitazioni/Verilog/Esercitazioni/Esercitazione 2">Esercitazione 2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/reti-logiche-esercitazioni/esercitazioni/Verilog/Esercitazioni/Esercitazione 3">Esercitazione 3</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/reti-logiche-esercitazioni/category/documentazione-1">Documentazione</a><button aria-label="Expand sidebar category &#x27;Documentazione&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/reti-logiche-esercitazioni/esercitazioni/VS-Code">Uso di VS Code</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Briciole di pane"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Pagina principale" class="breadcrumbs__link" href="/reti-logiche-esercitazioni/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/reti-logiche-esercitazioni/category/verilog"><span itemprop="name">Verilog</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/reti-logiche-esercitazioni/category/esercitazioni-1"><span itemprop="name">Esercitazioni</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Esercitazione 1</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">Su questa pagina</button></div><div class="theme-doc-markdown markdown"><header><h1>Esercitazione 1</h1></header>
<p>Per capire bene cos&#x27;è il Verilog è bene partire dal capire per cosa si usa.
È un <em>Hardware Description Language</em>, cioè un linguaggio formalizzato per la progettazione e realizzazione di componenti hardware: da reti combinatorie a CPU, architetture avanzate e componenti dedicati a scopi specifici.</p>
<p>Lo scopo non è quindi <em>solo</em> descrivere dell&#x27;hardware con del codice anziché disegni, ma in generale supportare con strumenti utili l&#x27;ingegnere in tutte le fasi di progettazione dell&#x27;hardware, a partire dalla semplice prototizione dell&#x27;interfaccia (dove poco importa la realizzazione interna, ma solo l&#x27;algoritmo implementato), passando per la simulazione in testbench software, alla realizzazione fisica su FPGA e test in hardware.</p>
<p>Tutti questi scopi hanno richieste diverse, e <em>semantiche</em> relative diverse.
Per questo non dovrebbe stupire il fatto che Verilog include molte diverse funzionalità e sintassi che hanno senso solo in specifici contesti e non altri, che spazia dalle porte logiche elementari a strutture di programmazione stile-C e funzionalità di stampa a terminale.</p>
<p>Questo è spesso fonte di confusione, visto che il compilatore Verilog non aiuta a fare queste distinzioni, anzi, supporta intenzionalmente diversi modi di usare le stesse keyword, come <code>reg</code> che può essere utilizzata sia come variabile di un programma che come un registro in una rete sincronizzata.
Come vedremo, è importante tenere presente <em>cosa</em> si sta facendo e <em>perché</em> per poter capire quale forma e sintassi ha senso usare e quale no.</p>
<p>Noi vedremo 4 usi diversi, in particolare:</p>
<ul>
<li>descrizione e sintesi di reti combinatorie</li>
<li>descrizione e sintesi di reti sincronizzate</li>
<li>verifica con testbench simulativa</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Argomenti d&#x27;esame</div><div class="admonitionContent_BuS1"><p>Saper leggere o scrivere testbench <em>non è</em> parte degli argomenti d&#x27;esame.
È tuttavia estremamente utile per esercitarsi provando con mano l&#x27;hardware descritto e capire come si comporta.</p><p>Per ogni esercizio, così come in sede d&#x27;esame, viene <em>fornita</em> una testbench adatta.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="da-schemi-circuitali-a-codice">Da schemi circuitali a codice<a href="#da-schemi-circuitali-a-codice" class="hash-link" aria-label="Link diretto a Da schemi circuitali a codice" title="Link diretto a Da schemi circuitali a codice">​</a></h2>
<p>La bussola fondamentale per scrivere Verilog è tenere sempre presente l&#x27;hardware che si vuole realizzare.
Partiamo dall&#x27;idea di hardware che abbiamo tramite schemi, come nell&#x27;esempio in figura.</p>
<img src="/reti-logiche-esercitazioni/img/verilog/1/scatoletta.drawio.png" alt="">
<p>Questo schema mostra una generica rete combinatoria <code>RC</code> con ingressi <code>x</code> e <code>y</code>, e uscite <code>z</code> e <code>w</code>.
Questa rete logica sarà implementata poi con componenti elettronici.
Sappiamo che questi, in quanto componenti fisici reali, non hanno un concetto di ordine tra di loro, o sincronizzazione, o attesa: gli ingressi <code>x</code> e <code>y</code> variano indipendentemente, possono avere cambiamenti anche contemparei e fluttuanti, e la rete <code>RC</code> risponde sempre a questi cambiamenti tramite le uscite <code>z</code> e <code>w</code>, anche <em>durante</em> i transitori dove gli ingressi variano da uno stato ad un altro.
Questa può sembrare una ripetizione banale se si pensa ai segnali elettrici che si propagano in un circuito, ma è facile dimenticarsene quando si guarda al codice Verilog.
Vediamo come questo schema si può tradurre in codice.</p>
<div class="language-verilog codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-verilog codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token block function" style="color:#d73a49">module</span><span class="token plain"> RC</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> y</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> z</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> w</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token declaration variable" style="color:#36acaa">input</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> y;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token declaration variable" style="color:#36acaa">output</span><span class="token plain"> z</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> w;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token behavior keyword" style="color:#00009f">assign</span><span class="token plain"> </span><span class="token delay constant" style="color:#36acaa">#1</span><span class="token plain"> z </span><span class="token assignment keyword" style="color:#00009f">=</span><span class="token plain"> x </span><span class="token brackets operator" style="color:#393A34">|</span><span class="token plain"> y; </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token behavior keyword" style="color:#00009f">assign</span><span class="token plain"> </span><span class="token delay constant" style="color:#36acaa">#2</span><span class="token plain"> w </span><span class="token assignment keyword" style="color:#00009f">=</span><span class="token plain"> x </span><span class="token brackets operator" style="color:#393A34">&amp;</span><span class="token plain"> y; </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token block function" style="color:#d73a49">endmodule</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copia il codice negli appunti" title="Copia" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In Verilog si dichiarano moduli in modo simile alle classi in linguaggi di programmazione: un modulo è un <em>tipo</em> di componente che altri moduli potranno poi usare.
La riga 1 inizia la dichiarazione del modulo, che è composta dal nome del modulo (<code>RC</code>) e dalla lista di porte di questo modulo, anch&#x27;esse con nome (<code>x</code>, <code>y</code>, <code>z</code>, <code>w</code>).
Queste porte possono essere di input e/o output, a uno o a più bit.
Specifichiamo questo alle righe 3 e 4. Mancando indicazioni di dimensione, saranno tutte da 1 bit.
Alle righe 6 e 7 specifichiamo il comportamento dei fili di uscita <code>z</code> e <code>w</code>.
Lo statement <code>assign</code> indica che l&#x27;elemento a sinistra assume continuamente il valore indicato dall&#x27;espressione a destra.
Con <code>#1</code> si indica un fattore di ritardo nell&#x27;aggiornamento, di 1 unità	di tempo.
Ogni rete combinatoria che non sia un semplice filo ha un certo tempo di attraversamento non trascurabile, ed è importante rappresentarlo con un elemento di ritardo.</p>
<p>Nel codice, vediamo che l&#x27;<code>assign</code> di <code>z</code> precede quello di <code>w</code>.
Questo però non ha nulla a che vedere con le proprietà temporali che li legano: con queste linee di codice rappresentiamo componenti hardware distinti che si evolvono continuamente, indipendentemente e contemporaneamente.
L&#x27;ordine degli statement di un <code>module</code> ha lo stesso valore dell&#x27;ordine con cui si disegnano le linee di uno schema circuitale: completamente irrilevante ai fini del risultato finale.
Questo rimarrà vero quando vedremo reti più complesse, dove dimenticarsi di questo porta a errori gravi.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="concetto-di-testbench">Concetto di testbench<a href="#concetto-di-testbench" class="hash-link" aria-label="Link diretto a Concetto di testbench" title="Link diretto a Concetto di testbench">​</a></h2>
<p>Abbiamo progettato il nostro hardware, la rete <code>RC</code> di cui sopra.
Vogliamo sapere però come si comporta, e in particolare se fa quello che ci aspettiamo dalle specifiche.
Per far questo, ho bisogno di mettere <code>RC</code> in un contesto in cui ne manipolo gli ingressi in un modo noto, così da conoscere quali output aspettarsi, e con della logica apposita misuro le uscite e verifico che corrispondano a quelle attese.
Tale ambiente è quello che chiamamo <em>testbench</em>.
Nell&#x27;esempio in figura, una rete <code>check</code> controlla le uscite e con l&#x27;uscita <code>ok</code> indica se il test è andato a buon fine o no.</p>
<img src="/reti-logiche-esercitazioni/img/verilog/1/testbench_hw.drawio.png" alt="">
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>suggerimento</div><div class="admonitionContent_BuS1"><p>Il corrispettivo nel mondo software è un programma di test che prova i metodi e strutture dati di una libreria. Anche noto come <em>unit test</em>.</p></div></div>
<p>Una opzione è progettare questa testbench come un ulteriore componente hardware, e seguire tutti i passaggi necessari a realizzare <em>con hardware vero</em> la testbench con dentro la rete sopra descritta, per esempio con FPGA.
Questo è sicuramente corretto, ma molto costoso, quantomeno nel tempo necessario a fare la verifica.
Una opzione più interessante è usare la <em>simulazione</em>: si <em>compila</em> un programma eseguibile che simula il comportamento dell&#x27;hardware, almeno fino ad un certo livello di dettaglio.
Questo ci da un responso in modo molto più efficiente, visto che si può modificare, ricompilare e rieseguire in pochi secondi vedendo il risultato direttamente a terminale.</p>
<p>Si può fare un passo in più: anziché progettare la testbench come dell&#x27;altro hardware con semplice uscita <code>ok</code>, si sfrutta appieno la natura software della simulazione per scrivere qualcosa che è più simile ad un <em>programma di test</em>, dove abbiamo effettivamente ordine e temporazzazione tra gli statement, insieme ad altri concetti che sarebbero privi di senso al di fuori della simulazione.
Questo ci fornisce un modo per fare <em>debugging</em> su descrizioni di hardware.</p>
<div class="language-verilog codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-verilog codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token block function" style="color:#d73a49">module</span><span class="token plain"> testbench</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token declaration variable" style="color:#36acaa">reg</span><span class="token plain"> x_t</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> y_t; </span><span class="token comment" style="color:#999988;font-style:italic">// &quot;variabili&quot;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token declaration variable" style="color:#36acaa">wire</span><span class="token plain"> z_t</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> w_t;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    RC rc </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        .x</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x_t</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> .y</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">y_t</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        .z</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">z_t</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> .w</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">w_t</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token behavior keyword" style="color:#00009f">initial</span><span class="token plain"> </span><span class="token block function" style="color:#d73a49">begin</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        $dumpfile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token literal-string string" style="color:#e3116c">&quot;waveform.vcd&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        $dumpvars;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        x_t </span><span class="token assignment keyword" style="color:#00009f">=</span><span class="token plain"> 0; </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        y_t </span><span class="token assignment keyword" style="color:#00009f">=</span><span class="token plain"> 0;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token delay constant" style="color:#36acaa">#10</span><span class="token plain">;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token block function" style="color:#d73a49">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">z_t == 0 </span><span class="token brackets operator" style="color:#393A34">&amp;</span><span class="token brackets operator" style="color:#393A34">&amp;</span><span class="token plain"> w_t == 0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            $display</span><span class="token punctuation" style="color:#393A34">(</span><span class="token literal-string string" style="color:#e3116c">&quot;0 0 -&gt; 0 0 success&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token block function" style="color:#d73a49">else</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            $display</span><span class="token punctuation" style="color:#393A34">(</span><span class="token literal-string string" style="color:#e3116c">&quot;0 0 -&gt; 0 0 fail&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        x_t </span><span class="token assignment keyword" style="color:#00009f">=</span><span class="token plain"> 0; </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        y_t </span><span class="token assignment keyword" style="color:#00009f">=</span><span class="token plain"> 1;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token delay constant" style="color:#36acaa">#10</span><span class="token plain">;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token block function" style="color:#d73a49">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">z_t == 0 </span><span class="token brackets operator" style="color:#393A34">&amp;</span><span class="token brackets operator" style="color:#393A34">&amp;</span><span class="token plain"> w_t == 1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            $display</span><span class="token punctuation" style="color:#393A34">(</span><span class="token literal-string string" style="color:#e3116c">&quot;0 1 -&gt; 0 1 success&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token block function" style="color:#d73a49">else</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            $display</span><span class="token punctuation" style="color:#393A34">(</span><span class="token literal-string string" style="color:#e3116c">&quot;0 1 -&gt; 0 1 fail&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        x_t </span><span class="token assignment keyword" style="color:#00009f">=</span><span class="token plain"> 1; </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        y_t </span><span class="token assignment keyword" style="color:#00009f">=</span><span class="token plain"> 0;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token delay constant" style="color:#36acaa">#10</span><span class="token plain">;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token block function" style="color:#d73a49">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">z_t == 0 </span><span class="token brackets operator" style="color:#393A34">&amp;</span><span class="token brackets operator" style="color:#393A34">&amp;</span><span class="token plain"> w_t == 1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            $display</span><span class="token punctuation" style="color:#393A34">(</span><span class="token literal-string string" style="color:#e3116c">&quot;1 0 -&gt; 0 1 success&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token block function" style="color:#d73a49">else</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            $display</span><span class="token punctuation" style="color:#393A34">(</span><span class="token literal-string string" style="color:#e3116c">&quot;1 0 -&gt; 0 1 fail&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        x_t </span><span class="token assignment keyword" style="color:#00009f">=</span><span class="token plain"> 1; </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        y_t </span><span class="token assignment keyword" style="color:#00009f">=</span><span class="token plain"> 1;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token delay constant" style="color:#36acaa">#10</span><span class="token plain">;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token block function" style="color:#d73a49">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">z_t == 1 </span><span class="token brackets operator" style="color:#393A34">&amp;</span><span class="token brackets operator" style="color:#393A34">&amp;</span><span class="token plain"> w_t == 1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            $display</span><span class="token punctuation" style="color:#393A34">(</span><span class="token literal-string string" style="color:#e3116c">&quot;1 1 -&gt; 1 1 success&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token block function" style="color:#d73a49">else</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">            $display</span><span class="token punctuation" style="color:#393A34">(</span><span class="token literal-string string" style="color:#e3116c">&quot;1 1 -&gt; 1 1 fail&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token block function" style="color:#d73a49">end</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token block function" style="color:#d73a49">endmodule</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copia il codice negli appunti" title="Copia" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Le righe da 2 a 8 sono molto vicine a quello che vediamo nel disegno.
Dichiariamo dei <code>reg</code> che useremo per pilotare gli ingressi della rete combinatoria, e dei <code>wire</code> che useremo per monitorarne le uscite.
Dichiariamo poi la nostra rete combinatoria: lo statement a righe 5-8 è nella forma <code>tipo_modulo nome_istanza( [lista porte] );</code>.
Possiamo immaginare questo statement come equivalente dell&#x27;atto fisico di prendere un chip di tipo <code>RC</code>, che chiameremo con un nome d&#x27;istanza <code>rc</code> per distinguerlo dagli altri, e posizionarlo nella nostra rete collegandone i vari piedini con altri elementi: l&#x27;ingresso <code>x</code> al <code>reg</code> <code>x_t</code>, l&#x27;uscita <code>z</code> al <code>wire</code> <code>z_t</code>, e così via.
La notazione mostrata a righe 6-7 è con parametri nominati (<em>named parameters</em>), dove si indicano esplicitamente gli assegnamenti tra parametro del componente e componente esterno.
Si può sempre utilizzare l&#x27;alternativa più nota - perché unica scelta in molti linguaggi, come C - ossia la notazione con parametri posizionali (<em>positional parameters</em>), dove l&#x27;associazione è data dalla corrispondenza con l&#x27;ordine di dichiarazione dei parametri.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Evitare parametri posizionali</div><div class="admonitionContent_BuS1"><p>La notazione con parametri posizionali può sembrare meno prolissa, ma è anche più pericolosa.
In primo luogo, si basa sul fatto di ricordarsi <em>esattamente</em> l&#x27;ordine dei parametri, quando è invece facile distrarsi e scambiarli di posto.
In secondo luogo, non permette di <em>saltare</em> una posizione, mentre vedremo esempi dove collegare qualcosa ad una o più uscite di una rete è del tutto opzionale.</p><p>Queste limitazioni possono sembrare semplici da aggirare, ma il vero problema è che ad una semplice svista su un assegnamento di parametri posizionali corrisponde una lunga e faticosa fase di debug in cui tutto sembra comportarsi in modo completamente casuale.</p></div></div>
<p>Guardando le righe successive, ci sono diversi concetti che hanno un senso <em>in questo contesto</em> mentre altrove o hanno un senso <em>diverso</em> o sono del tutto privi di senso.
Iniziamo dall&#x27;uso di <code>reg</code> come variabili, assegnando valori in serie come in un programma C.
Nelle reti sincronizzate, vedremo che <code>reg</code> viene usato con significato e comportamento completamente diverso.
Vediamo poi che usiamo un blocco <code>initial begin ... end</code>: questo contiene degli statement, eseguiti come un programma uno alla volta, separati talvolta da delle attese esplicite come <code>#10</code> che attende 10 unità di tempo.
Il termine <code>initial</code> significa che il programma è eseguito &quot;all&#x27;inizio della simulazione&quot;: questo è un esempio di concetto completamente insensato per dell&#x27;hardware, dove <u>non esiste</u> un tempo 0.
Altri statement che hanno senso solo in una simulazione sono <code>$display</code>, che stampa a terminale, e <code>$dumpfile</code> e <code>$dumpvars</code>, che producono invece un file <code>waveform.vcd</code> che possiamo studiare con <code>GTKWave</code>.</p>
<p>Leggendo il codice come un programma, vediamo che questa testbench altro non fa che testare tutti e 4 i possibili stati di <code>x</code> e <code>y</code>, confrontando le uscite <code>z</code> e <code>w</code> con i valori attesi.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Unità di tempo</div><div class="admonitionContent_BuS1"><p>Le unità temporali (sia di default che di volta in volta) si possono specificare, ma noi per semplicità non lo facciamo.
Come vedremo dalle waveform, di conseguenza ogni valore viene interpretato di default come <em>secondi</em>, cosa decisamente poco realistica, ma comunque di nessun impatto per i nostri usi.</p></div></div>
<p>Per eseguire il test useremo tre programmi: <code>iverilog</code> e <code>vvp</code>, dalla suite <a href="https://github.com/steveicarus/iverilog" target="_blank" rel="noopener noreferrer">Icarus Verilog</a>, e <code>GTKWave</code>.
A differenza dell&#x27;ambiente per Assembler, questi sono facilmente reperibili per ogni piattaforma, o compilabili dal sorgente.
<a href="https://bleyer.org/icarus/" target="_blank" rel="noopener noreferrer">Qui</a> si trovano installer per Windows.</p>
<p><code>iverilog</code> è il programma che <em>compila</em> la nostra simulazione. La sintassi è la seguente:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">iverilog -o nome_simulazione testbench.v mia_rete.v [altri file .v]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copia il codice negli appunti" title="Copia" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>I file per questo test sono scaricabili <a href="/reti-logiche-esercitazioni/assets/files/testbench-be1cd15a27ae79629aa5892a4fb3f9a6.v" target="_blank">qui</a> e <a href="/reti-logiche-esercitazioni/assets/files/rc-e23623ff59a8818c5da2e767f6cb9ce9.v" target="_blank">qui</a>.
Il file prodotto da <code>iverilog</code> non è direttamente eseguibile, ma va eseguito usando <code>vvp</code>:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">vvp nome_simulazione</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copia il codice negli appunti" title="Copia" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Otteniamo un output come il seguente:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">VCD info: dumpfile waveform.vcd opened for output.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0 0 -&gt; 0 0 success</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0 1 -&gt; 0 1 fail</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 0 -&gt; 0 1 fail</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 1 -&gt; 1 1 success</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copia il codice negli appunti" title="Copia" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>La prima riga è relativa ai comandi <code>$dumpfile</code> e <code>$dumpvars</code>, ci informa semplicemente che la simulazione sta effettivamente salvando i dati su <code>waveform.vcd</code>.
Le righe successive sono invece quelle stampate dai nostri <code>$display</code>: vediamo che alcuni test sono falliti.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Stampe a fine simulazione</div><div class="admonitionContent_BuS1"><p>Alcune versioni di <code>iverilog</code> aggiungono <em>di default</em> una stampa del tipo &quot;$finish called at ...&quot; al termine della simulazione, altre no.</p></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Chi ha ragione?</div><div class="admonitionContent_BuS1"><p>Un test che fallisce indica soltanto che il codice di test e il codice testato sono in disaccordo.
La maggior parte delle volte, se fatto bene, il test rappresenta la specifica desiderata, mentre ciò che è testato ne indica solo l&#x27;implementazione.
Per questo, di solito, ha ragione il test e va cambiato ciò che è testato.</p></div></div>
<p>Cerchiamo di capire perché il test fallisce, e quindi in cosa la rete <code>RC</code> non segue la specifica.
Le stampe ci indicano i valori attesi e il fatto che non corrispondono con quelli prodotti da <code>RC</code>, non quali valori sono stati trovati in <code>z</code> e <code>w</code>.
Potremmo cambiare le stampe per includerlo, ma è facile intuire che questo approccio non scala bene: non possiamo stampare a schermo tutte le variabili in tutte le situazioni.
È per questo che si usa la waveform.
Lanciamo GTKWave con il comando</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">gtkwave waveform.vcd</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copia il codice negli appunti" title="Copia" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Si dovrebbe aprire quindi una finestra dal quale possiamo analizzare l&#x27;evoluzione della rete, filo per filo, nel tempo.
Espandiamo le reti nel menu a sinistra, selezioniamo la rete <code>rc</code> e quindi gli input <code>x</code> e <code>y</code> e gli output <code>z</code> e <code>w</code>, clicchiamo poi <em>Append</em>.
Otteniamo una schermata come quella in figura.</p>
<img src="/reti-logiche-esercitazioni/img/verilog/1/waveform_1.png" alt="">
<p>La schermata mostra l&#x27;evoluzione nel tempo dei fili selezionati, in particolare nel momento selezionato (la linea verticale rossa).</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Significato delle waveform</div><div class="admonitionContent_BuS1"><p>GTKWave usa linee verdi con valore alto o basso per elementi da un singolo bit che hanno valore <em>logico</em> 0 o 1.
In caso di elemento da più bit, utilizza linee verdi sopra e sotto il valore corrente dell&#x27;elemento (si può cambiare come sono interpretati i bit usando il menu contestuale).</p><p>Le aree di colore rosso indicano punti in cui il valore logico è <em>non specificato</em>, <code>&#x27;bx</code>, tipicamente perché uno o più bit dell&#x27;elemento non sono unicamente determinabili.
Una linea in mezzo di colore giallo vuol dire invece <em>alta impedenza</em>, <code>&#x27;bz</code>, che <u>non è un valore logico</u> e vuol dire che, elettricamente, il filo non è connesso.
Sia <code>&#x27;bx</code> che <code>&#x27;bz</code> hanno contesti ed usi utili in cui è normale che compaiano, ma <em>molto spesso</em> sono sintomo di un errore e un buon punto di partenza per il debug.</p></div></div>
<p>Vediamo dalla waveform i valori di <code>w</code> e <code>z</code> in corrispondenza dei test falliti: in entrambi i casi il test richiede <code>z</code> a 0 e lo trova a 1, <code>w</code> a 1 e lo trova a 0.
Notiamo quindi che il test si aspetta che <code>z</code> si comporti come un AND e <code>w</code> come un OR, mentre vediamo che succede il contrario.
Dobbiamo quindi scambiare gli <code>assign</code> delle due uscite.</p>
<div class="language-verilog codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-verilog codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token block function" style="color:#d73a49">module</span><span class="token plain"> RC</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> y</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> z</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> w</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token declaration variable" style="color:#36acaa">input</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> y;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token declaration variable" style="color:#36acaa">output</span><span class="token plain"> z</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> w;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token behavior keyword" style="color:#00009f">assign</span><span class="token plain"> </span><span class="token delay constant" style="color:#36acaa">#1</span><span class="token plain"> z </span><span class="token assignment keyword" style="color:#00009f">=</span><span class="token plain"> x </span><span class="token brackets operator" style="color:#393A34">&amp;</span><span class="token plain"> y; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token behavior keyword" style="color:#00009f">assign</span><span class="token plain"> </span><span class="token delay constant" style="color:#36acaa">#2</span><span class="token plain"> w </span><span class="token assignment keyword" style="color:#00009f">=</span><span class="token plain"> x </span><span class="token brackets operator" style="color:#393A34">|</span><span class="token plain"> y; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token block function" style="color:#d73a49">endmodule</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copia il codice negli appunti" title="Copia" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Usare il reload in GTKWave</div><div class="admonitionContent_BuS1"><p>Una volta cambiato il codice, vorremmo ricompilare e rieseguire la simulazione.
Ma il comando <code>gtkwave waveform.vcd</code> blocca il terminale finché non chiudiamo la finestra.
Potremmo chiudere GTKWave e riavvarlo dopo, ma questo significa rifare daccapo tutto il setup per analizzare le waveform.</p><p>È per questo una buona idea utilizzare una delle seguenti strategie:</p><ul>
<li>usare due terminali, uno dedicato a <code>iverilog</code> e <code>vvp</code>, l&#x27;altro a <code>gtkwave</code></li>
<li>lanciare il comando in background. Nell&#x27;ambiente Windows all&#x27;esame, questo si può fare con un <code>&amp;</code> in fondo: <code>gtkwave waveform.vcd &amp;</code></li>
</ul><p>In entrambi i casi, otteniamo di poter rieseguire la simulazione mentre GTKWave è aperto. Possiamo quindi sfruttare il pulsante Reload, che caricherà le nuove waveform dall&#x27;ultima simulazione senza dover reimpostare l&#x27;interfaccia.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="full-adder-descrizione-e-sintesi-di-reti-combinatorie">Full adder, descrizione e sintesi di reti combinatorie<a href="#full-adder-descrizione-e-sintesi-di-reti-combinatorie" class="hash-link" aria-label="Link diretto a Full adder, descrizione e sintesi di reti combinatorie" title="Link diretto a Full adder, descrizione e sintesi di reti combinatorie">​</a></h2>
<p>In generale, la differenza tra <em>descrizione</em> e <em>sintesi</em> è la seguente: una descrizione si limita a dire cosa una rete <em>fa</em>, senza scendere oltre nei dettagli implementativi; una sintesi mostra invece <em>come si implementa</em> questo comportamento.
Una sintesi è un modo di realizzare una rete che si comporta come indicato dalla descrizione, e ci possono essere diversi modi (seguendo diversi modelli, algoritmi, criteri di costo) per sintetizzare una descrizione.</p>
<p>Per il caso delle reti combinatorie, vediamo l&#x27;esampio del <em>full adder</em>, partendo dal caso a 1 bit (<a href="/reti-logiche-esercitazioni/assets/files/testbench-d7995cdeb24025a41a8c7d6fd8a069c3.v" target="_blank">testbench</a>, <a href="/reti-logiche-esercitazioni/assets/files/full-adder-descrizione-9d261a1a3e89d3191f6f617b66a09722.v" target="_blank">descrizione</a>, <a href="/reti-logiche-esercitazioni/assets/files/full-adder-sintesi-e50521205561ea701aa49e119fe704f8.v" target="_blank">sintesi</a>).</p>
<div class="language-verilog codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-verilog codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token block function" style="color:#d73a49">module</span><span class="token plain"> full_adder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> y</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> c_in</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    s</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> c_out</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token declaration variable" style="color:#36acaa">input</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> y;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token declaration variable" style="color:#36acaa">input</span><span class="token plain"> c_in;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token declaration variable" style="color:#36acaa">output</span><span class="token plain"> s;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token declaration variable" style="color:#36acaa">output</span><span class="token plain"> c_out;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token behavior keyword" style="color:#00009f">assign</span><span class="token plain"> </span><span class="token delay constant" style="color:#36acaa">#5</span><span class="token plain"> </span><span class="token brackets operator" style="color:#393A34">{</span><span class="token plain">c_out</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> s</span><span class="token brackets operator" style="color:#393A34">}</span><span class="token plain"> </span><span class="token assignment keyword" style="color:#00009f">=</span><span class="token plain"> x </span><span class="token brackets operator" style="color:#393A34">+</span><span class="token plain"> y </span><span class="token brackets operator" style="color:#393A34">+</span><span class="token plain"> c_in;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token block function" style="color:#d73a49">endmodule</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copia il codice negli appunti" title="Copia" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Sintassi: raggruppamento</div><div class="admonitionContent_BuS1"><p>Le parentesi graffe, come in <code>{c_out, s}</code>, si può usare per raggruppare elementi sia a destra che a sinistra di un assegnamento.
Bisogna stare però attenti alle dimensioni in bit, e cosa viene assegnato a cosa.</p></div></div>
<p>Questa è una <em>descrizione</em> del full adder: ci spiega cosa fa questo modulo, indicando le porte e la relazione tra ingressi e uscite, ma non ci dice nulla su come è implementata questa relazione.
Infatti, la riga 10 utilizza l&#x27;operatore <code>+</code> del linguaggio Verilog, non ci spiega <em>come si fa</em> la somma.
Quando si usano espressioni in questo modo, il compilatore Verilog non le traduce in hardware, ma ne calcola direttamente il risultato usando la nostra CPU a tempo di simulazione.</p>
<div class="language-verilog codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-verilog codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token block function" style="color:#d73a49">module</span><span class="token plain"> full_adder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> y</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> c_in</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    s</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> c_out</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token declaration variable" style="color:#36acaa">input</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> y;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token declaration variable" style="color:#36acaa">input</span><span class="token plain"> c_in;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token declaration variable" style="color:#36acaa">output</span><span class="token plain"> s;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token declaration variable" style="color:#36acaa">output</span><span class="token plain"> c_out;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token behavior keyword" style="color:#00009f">assign</span><span class="token plain"> </span><span class="token delay constant" style="color:#36acaa">#5</span><span class="token plain"> s </span><span class="token assignment keyword" style="color:#00009f">=</span><span class="token plain"> x </span><span class="token brackets operator" style="color:#393A34">^</span><span class="token plain"> y </span><span class="token brackets operator" style="color:#393A34">^</span><span class="token plain"> c_in;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token behavior keyword" style="color:#00009f">assign</span><span class="token plain"> </span><span class="token delay constant" style="color:#36acaa">#5</span><span class="token plain"> c_out </span><span class="token assignment keyword" style="color:#00009f">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> x </span><span class="token brackets operator" style="color:#393A34">&amp;</span><span class="token plain"> y </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token brackets operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> y </span><span class="token brackets operator" style="color:#393A34">&amp;</span><span class="token plain"> c_in</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token brackets operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> x </span><span class="token brackets operator" style="color:#393A34">&amp;</span><span class="token plain"> c_in </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token block function" style="color:#d73a49">endmodule</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copia il codice negli appunti" title="Copia" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Questa invece è una <em>sintesi</em>: ci mostra come realizzare il sommatore usando operatori logici elementari.</p>
<p>Un altro modo per definire <em>sintesi</em> è il fatto che siamo in grado, a partire dalla sintesi, di produrre lo schema circuitale corrispondente.
Infatti, dal codice sopra possiamo ricavare il seguente schema.</p>
<img src="/reti-logiche-esercitazioni/img/verilog/1/full-adder-1.drawio.png" alt="">
<p>Vediamo ora il caso di un full adder a 3 bit (<a href="/reti-logiche-esercitazioni/assets/files/testbench-3-d413290141b0ecd7a0c7238d18b7a5d4.v" target="_blank">testbench</a>, <a href="/reti-logiche-esercitazioni/assets/files/full-adder-3-descrizione-2ed83894ee7d3bb3f9a9127bd7e98b26.v" target="_blank">descrizione</a>, <a href="/reti-logiche-esercitazioni/assets/files/full-adder-3-sintesi-e4dc5f728b5d2074d5fc46e0bac1f9f1.v" target="_blank">sintesi</a>).</p>
<p>Per una descrizione, ci basta seguire l&#x27;esempio del caso a 1 bit, con l&#x27;aggiunta delle diverse dimensioni dei fili.</p>
<div class="language-verilog codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-verilog codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token block function" style="color:#d73a49">module</span><span class="token plain"> full_adder_3</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> y</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> c_in</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    s</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> c_out</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token declaration variable" style="color:#36acaa">input</span><span class="token plain"> </span><span class="token brackets operator" style="color:#393A34">[</span><span class="token plain">2</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">0</span><span class="token brackets operator" style="color:#393A34">]</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> y;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token declaration variable" style="color:#36acaa">input</span><span class="token plain"> c_in;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token declaration variable" style="color:#36acaa">output</span><span class="token plain"> </span><span class="token brackets operator" style="color:#393A34">[</span><span class="token plain">2</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">0</span><span class="token brackets operator" style="color:#393A34">]</span><span class="token plain"> s;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token declaration variable" style="color:#36acaa">output</span><span class="token plain"> c_out;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token behavior keyword" style="color:#00009f">assign</span><span class="token plain"> </span><span class="token delay constant" style="color:#36acaa">#5</span><span class="token plain"> </span><span class="token brackets operator" style="color:#393A34">{</span><span class="token plain">c_out</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> s</span><span class="token brackets operator" style="color:#393A34">}</span><span class="token plain"> </span><span class="token assignment keyword" style="color:#00009f">=</span><span class="token plain"> x </span><span class="token brackets operator" style="color:#393A34">+</span><span class="token plain"> y </span><span class="token brackets operator" style="color:#393A34">+</span><span class="token plain"> c_in;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token block function" style="color:#d73a49">endmodule</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copia il codice negli appunti" title="Copia" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Sintassi: elementi di più bit</div><div class="admonitionContent_BuS1"><p>La dichiarazione con <code>[2:0]</code> indica che l&#x27;elemento è composto da 3 bit, indicizzati da 0 a 2.
Questi indici possono poi essere utilizzati per selezionare uno più di componenti.
Per esempio, con <code>x[2:1]</code> si selezionano i bit 2 e 1 di <code>x</code>, con <code>x[1]</code> solo il bit 1.</p></div></div>
<p>Come prima, questa è una descrizione perché non ci dice affatto come realizzare il sommatore, e non possiamo disegnare uno schema circuitale a partire da questo codice senza sapere già, da un&#x27;altra fonte, come realizzare un full adder a 3 bit.</p>
<p>Passiamo invece alla sintesi. Sappiamo che il full adder è un esempio di rete componibile, nel senso che possiamo realizzare un full adder a N bit usando N full adder a 1 bit.
Vediamo come partendo, questa volta, dallo schema circuitale.</p>
<img src="/reti-logiche-esercitazioni/img/verilog/1/full-adder-3.drawio.png" alt="">
<p>Da questo schema, si evince che sappiamo realizzare un full adder a 3 bit se sappiamo già realizzare un full adder a 1 bit.
Questa relazione si conserva anche nel codice Verilog: nella sintesi di una rete combinatoria si possono utilizzare altre reti combinatorie di cui, a loro volta, si conosce la sintesi.</p>
<div class="language-verilog codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-verilog codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token block function" style="color:#d73a49">module</span><span class="token plain"> full_adder_3</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> y</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> c_in</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    s</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> c_out</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token declaration variable" style="color:#36acaa">input</span><span class="token plain"> </span><span class="token brackets operator" style="color:#393A34">[</span><span class="token plain">2</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">0</span><span class="token brackets operator" style="color:#393A34">]</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> y;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token declaration variable" style="color:#36acaa">input</span><span class="token plain"> c_in;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token declaration variable" style="color:#36acaa">output</span><span class="token plain"> </span><span class="token brackets operator" style="color:#393A34">[</span><span class="token plain">2</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">0</span><span class="token brackets operator" style="color:#393A34">]</span><span class="token plain"> s;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token declaration variable" style="color:#36acaa">output</span><span class="token plain"> c_out;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token declaration variable" style="color:#36acaa">wire</span><span class="token plain"> c_in_1;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    full_adder fa_0 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        .x</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token brackets operator" style="color:#393A34">[</span><span class="token plain">0</span><span class="token brackets operator" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> .y</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">y</span><span class="token brackets operator" style="color:#393A34">[</span><span class="token plain">0</span><span class="token brackets operator" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> .c_in</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c_in</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        .s</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s</span><span class="token brackets operator" style="color:#393A34">[</span><span class="token plain">0</span><span class="token brackets operator" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> .c_out</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c_in_1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token declaration variable" style="color:#36acaa">wire</span><span class="token plain"> c_in_2;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    full_adder fa_1 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        .x</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token brackets operator" style="color:#393A34">[</span><span class="token plain">1</span><span class="token brackets operator" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> .y</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">y</span><span class="token brackets operator" style="color:#393A34">[</span><span class="token plain">1</span><span class="token brackets operator" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> .c_in</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c_in_1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        .s</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s</span><span class="token brackets operator" style="color:#393A34">[</span><span class="token plain">1</span><span class="token brackets operator" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> .c_out</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c_in_2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    full_adder fa_2 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        .x</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token brackets operator" style="color:#393A34">[</span><span class="token plain">2</span><span class="token brackets operator" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> .y</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">y</span><span class="token brackets operator" style="color:#393A34">[</span><span class="token plain">2</span><span class="token brackets operator" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> .c_in</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c_in_2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        .s</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s</span><span class="token brackets operator" style="color:#393A34">[</span><span class="token plain">2</span><span class="token brackets operator" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> .c_out</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c_out</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token block function" style="color:#d73a49">endmodule</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copia il codice negli appunti" title="Copia" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In questo codice riutilizziamo la rete <code>full_adder</code> che abbiamo sintetizzato prima.
Notiamo come per farlo dobbiamo instanziare la rete tre volte, dandogli nomi diversi (<code>fa_0</code>, <code>fa_1</code>, <code>fa_2</code>), e dichiarare dei nuovi <code>wire</code> per collegarli, <code>c_in_1</code> e <code>c_in_2</code>.
Infine, utilizziamo indici per indicare le componenti di <code>x</code> e <code>y</code> da collegare a ciascun <code>full_adder</code>, così come quale componente di <code>s</code> è collegata a quale uscita.</p>
<p>Di nuovo, possiamo vedere la corrispondenza tra il codice Verilog e lo schema circuitale: questo non è un caso, anzi è <u>fondamentale</u>.
Tolto il caso limite delle testbench simulative, ogni cosa che scriviamo in Verilog ha senso <u>solo</u> se ci è chiaro che tipo di hardware corrisponde a ciò che scriviamo e come si può realizzare.</p>
<p>Questo vale anche quando si fa una descrizione.
Per esempio, abbiamo prima visto come si può descrivere un full adder scrivendo <code>{c_out, s} = x + y + c_in</code>.
Questo ci permette di essere meno prolissi, a patto che si sa come si fa un sommatore.
Vedremo più avanti, nelle reti sincronizzate, esempi di cose che sono semplici da scrivere in descrizione, affidandosi al simulatore per eseguirne la logica, ma che si rivelano poi <em>molto difficili</em> da sintetizzare.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Pagina del documento"><a class="pagination-nav__link pagination-nav__link--prev" href="/reti-logiche-esercitazioni/category/esercitazioni-1"><div class="pagination-nav__sublabel">Precedente</div><div class="pagination-nav__label">Esercitazioni</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/reti-logiche-esercitazioni/esercitazioni/Verilog/Esercitazioni/Esercitazione 2"><div class="pagination-nav__sublabel">Successivo</div><div class="pagination-nav__label">Esercitazione 2</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#da-schemi-circuitali-a-codice" class="table-of-contents__link toc-highlight">Da schemi circuitali a codice</a></li><li><a href="#concetto-di-testbench" class="table-of-contents__link toc-highlight">Concetto di testbench</a></li><li><a href="#full-adder-descrizione-e-sintesi-di-reti-combinatorie" class="table-of-contents__link toc-highlight">Full adder, descrizione e sintesi di reti combinatorie</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Raffaele Zippo. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>